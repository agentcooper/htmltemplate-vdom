!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.clientRuntime=n():e.clientRuntime=n()}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){"use strict";var r=t(44);e.exports={h:t(9),loop:function o(e,n){var o=r(e,n,{create:t(53),diff:t(54),patch:t(55)});return o}}},function(e,n){function t(e){return e&&"Widget"===e.type}e.exports=t},function(e,n){e.exports="2"},function(e,n,t){function r(e){return e&&"VirtualNode"===e.type&&e.version===o}var o=t(2);e.exports=r},function(e,n){function t(e){return e&&"Thunk"===e.type}e.exports=t},function(e,n){function t(e){return e&&("function"==typeof e.hook&&!e.hasOwnProperty("hook")||"function"==typeof e.unhook&&!e.hasOwnProperty("unhook"))}e.exports=t},function(e,n,t){function r(e){return e&&"VirtualText"===e.type&&e.version===o}var o=t(2);e.exports=r},,function(e,n){function t(e){return"[object Array]"===o.call(e)}var r=Array.isArray,o=Object.prototype.toString;e.exports=r||t},function(e,n,t){var r=t(16);e.exports=r},function(e,n){/*!
	 * Cross-Browser Split 1.1.1
	 * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>
	 * Available under the MIT License
	 * ECMAScript compliant, uniform cross-browser split method
	 */
e.exports=function(e){var n,t=String.prototype.split,r=/()??/.exec("")[1]===e;return n=function(n,o,i){if("[object RegExp]"!==Object.prototype.toString.call(o))return t.call(n,o,i);var u,a,s,c,f=[],l=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.extended?"x":"")+(o.sticky?"y":""),p=0,o=new RegExp(o.source,l+"g");for(n+="",r||(u=new RegExp("^"+o.source+"$(?!\\s)",l)),i=i===e?-1>>>0:i>>>0;(a=o.exec(n))&&(s=a.index+a[0].length,!(s>p&&(f.push(n.slice(p,a.index)),!r&&a.length>1&&a[0].replace(u,function(){for(var n=1;n<arguments.length-2;n++)arguments[n]===e&&(a[n]=e)}),a.length>1&&a.index<n.length&&Array.prototype.push.apply(f,a.slice(1)),c=a[0].length,p=s,f.length>=i)));)o.lastIndex===a.index&&o.lastIndex++;return p===n.length?(c||!o.test(""))&&f.push(""):f.push(n.slice(p)),f.length>i?f.slice(0,i):f}}()},function(e,n,t){"use strict";function r(e){var n=e[u];return n||(n=e[u]={}),n}var o=t(13),i="7";o("ev-store",i);var u="__EV_STORE_KEY@"+i;e.exports=r},function(e,n){(function(n){"use strict";function t(e,n){return e in r?r[e]:(r[e]=n,n)}var r="undefined"!=typeof window?window:"undefined"!=typeof n?n:{};e.exports=t}).call(n,function(){return this}())},function(e,n,t){"use strict";function r(e,n,t){var r="__INDIVIDUAL_ONE_VERSION_"+e,i=r+"_ENFORCE_SINGLETON",u=o(i,n);if(u!==n)throw new Error("Can only have one copy of "+e+".\nYou already have version "+u+" installed.\nThis means you cannot install version "+n);return o(r,t)}var o=t(12);e.exports=r},function(e,n,t){"use strict";function r(e){return this instanceof r?void(this.value=e):new r(e)}var o=t(11);e.exports=r,r.prototype.hook=function(e,n){var t=o(e),r=n.substr(3);t[r]=this.value},r.prototype.unhook=function(e,n){var t=o(e),r=n.substr(3);t[r]=void 0}},function(e,n){"use strict";function t(e){return this instanceof t?void(this.value=e):new t(e)}e.exports=t,t.prototype.hook=function(e,n){e[n]!==this.value&&(e[n]=this.value)}},function(e,n,t){"use strict";function r(e,n,t){var r,u,s,c,f=[];return!t&&a(n)&&(t=n,u={}),u=u||n||{},r=m(e,u),u.hasOwnProperty("key")&&(s=u.key,u.key=void 0),u.hasOwnProperty("namespace")&&(c=u.namespace,u.namespace=void 0),"INPUT"!==r||c||!u.hasOwnProperty("value")||void 0===u.value||y(u.value)||(u.value=w(u.value)),i(u),void 0!==t&&null!==t&&o(t,f,r,u),new l(r,u,f,s,c)}function o(e,n,t,r){if("string"==typeof e)n.push(new p(e));else if("number"==typeof e)n.push(new p(String(e)));else if(u(e))n.push(e);else{if(!f(e)){if(null===e||void 0===e)return;throw s({foreignObject:e,parentVnode:{tagName:t,properties:r}})}for(var i=0;i<e.length;i++)o(e[i],n,t,r)}}function i(e){for(var n in e)if(e.hasOwnProperty(n)){var t=e[n];if(y(t))continue;"ev-"===n.substr(0,3)&&(e[n]=x(t))}}function u(e){return h(e)||v(e)||d(e)||g(e)}function a(e){return"string"==typeof e||f(e)||u(e)}function s(e){var n=new Error;return n.type="virtual-hyperscript.unexpected.virtual-element",n.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+c(e.foreignObject)+".\nThe parent vnode is:\n"+c(e.parentVnode),n.foreignObject=e.foreignObject,n.parentVnode=e.parentVnode,n}function c(e){try{return JSON.stringify(e,null,"    ")}catch(n){return String(e)}}var f=t(8),l=t(18),p=t(19),h=t(3),v=t(6),d=t(1),y=t(5),g=t(4),m=t(17),w=t(15),x=t(14);e.exports=r},function(e,n,t){"use strict";function r(e,n){if(!e)return"DIV";var t=!n.hasOwnProperty("id"),r=o(e,i),a=null;u.test(r[1])&&(a="DIV");var s,c,f,l;for(l=0;l<r.length;l++)c=r[l],c&&(f=c.charAt(0),a?"."===f?(s=s||[],s.push(c.substring(1,c.length))):"#"===f&&t&&(n.id=c.substring(1,c.length)):a=c);return s&&(n.className&&s.push(n.className),n.className=s.join(" ")),n.namespace?a:a.toUpperCase()}var o=t(10),i=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,u=/^\.|#/;e.exports=r},function(e,n,t){function r(e,n,t,r,o){this.tagName=e,this.properties=n||c,this.children=t||f,this.key=null!=r?String(r):void 0,this.namespace="string"==typeof o?o:null;var l,p=t&&t.length||0,h=0,v=!1,d=!1,y=!1;for(var g in n)if(n.hasOwnProperty(g)){var m=n[g];s(m)&&m.unhook&&(l||(l={}),l[g]=m)}for(var w=0;p>w;w++){var x=t[w];i(x)?(h+=x.count||0,!v&&x.hasWidgets&&(v=!0),!d&&x.hasThunks&&(d=!0),y||!x.hooks&&!x.descendantHooks||(y=!0)):!v&&u(x)?"function"==typeof x.destroy&&(v=!0):!d&&a(x)&&(d=!0)}this.count=p+h,this.hasWidgets=v,this.hasThunks=d,this.hooks=l,this.descendantHooks=y}var o=t(2),i=t(3),u=t(1),a=t(4),s=t(5);e.exports=r;var c={},f=[];r.prototype.version=o,r.prototype.type="VirtualNode"},function(e,n,t){function r(e){this.text=String(e)}var o=t(2);e.exports=r,r.prototype.version=o,r.prototype.type="VirtualText"},,,,,function(e,n,t){(function(n){var r="undefined"!=typeof n?n:"undefined"!=typeof window?window:{},o=t(63);if("undefined"!=typeof document)e.exports=document;else{var i=r["__GLOBAL_DOCUMENT_CACHE@4"];i||(i=r["__GLOBAL_DOCUMENT_CACHE@4"]=o),e.exports=i}}).call(n,function(){return this}())},function(e,n){"use strict";e.exports=function(e){return"object"==typeof e&&null!==e}},function(e,n,t){function r(e,n,t){for(var r in n){var u=n[r];void 0===u?o(e,r,u,t):s(u)?(o(e,r,u,t),u.hook&&u.hook(e,r,t?t[r]:void 0)):a(u)?i(e,n,t,r,u):e[r]=u}}function o(e,n,t,r){if(r){var o=r[n];if(s(o))o.unhook&&o.unhook(e,n,t);else if("attributes"===n)for(var i in o)e.removeAttribute(i);else if("style"===n)for(var u in o)e.style[u]="";else"string"==typeof o?e[n]="":e[n]=null}}function i(e,n,t,r,o){var i=t?t[r]:void 0;if("attributes"!==r){if(i&&a(i)&&u(i)!==u(o))return void(e[r]=o);a(e[r])||(e[r]={});var s="style"===r?"":void 0;for(var c in o){var f=o[c];e[r][c]=void 0===f?s:f}}else for(var l in o){var p=o[l];void 0===p?e.removeAttribute(l):e.setAttribute(l,p)}}function u(e){return Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__?e.__proto__:e.constructor?e.constructor.prototype:void 0}var a=t(25),s=t(5);e.exports=r},function(e,n,t){function r(e,n){var t=n?n.document||o:o,f=n?n.warn:null;if(e=c(e).a,s(e))return e.init();if(a(e))return t.createTextNode(e.text);if(!u(e))return f&&f("Item is not a valid virtual dom node",e),null;var l=null===e.namespace?t.createElement(e.tagName):t.createElementNS(e.namespace,e.tagName),p=e.properties;i(l,p);for(var h=e.children,v=0;v<h.length;v++){var d=r(h[v],n);d&&l.appendChild(d)}return l}var o=t(24),i=t(26),u=t(3),a=t(6),s=t(1),c=t(28);e.exports=r},function(e,n,t){function r(e,n){var t=e,r=n;return s(n)&&(r=o(n,e)),s(e)&&(t=o(e,null)),{a:t,b:r}}function o(e,n){var t=e.vnode;if(t||(t=e.vnode=e.render(n)),!(i(t)||u(t)||a(t)))throw new Error("thunk did not return a valid node");return t}var i=t(3),u=t(6),a=t(1),s=t(4);e.exports=r},function(e,n,t){function r(e,n,t){this.type=Number(e),this.vNode=n,this.patch=t}var o=t(2);r.NONE=0,r.VTEXT=1,r.VNODE=2,r.WIDGET=3,r.PROPS=4,r.ORDER=5,r.INSERT=6,r.REMOVE=7,r.THUNK=8,e.exports=r,r.prototype.version=o,r.prototype.type="VirtualPatch"},function(e,n){function t(){c=!1,u.length?s=u.concat(s):f=-1,s.length&&r()}function r(){if(!c){var e=setTimeout(t);c=!0;for(var n=s.length;n;){for(u=s,s=[];++f<n;)u[f].run();f=-1,n=s.length}u=null,c=!1,clearTimeout(e)}}function o(e,n){this.fun=e,this.array=n}function i(){}var u,a=e.exports={},s=[],c=!1,f=-1;a.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];s.push(new o(e,n)),1!==s.length||c||setTimeout(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=i,a.addListener=i,a.once=i,a.off=i,a.removeListener=i,a.removeAllListeners=i,a.emit=i,a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},,,,,,,,,,,,,,function(e,n,t){function r(e,n,t){function r(e){if(v)throw u({diff:e._diff,stringDiff:JSON.stringify(e._diff)});null!==a||l||(l=!0,o(i)),a=e}function i(){if(l=!1,null!==a){v=!0;var e=n(a);if(t.createOnly)v=!1,s(e,t);else{var r=c(p,e,t);v=!1,h=f(h,r,t)}p=e,a=null}}t=t||{};var a=e,s=t.create,c=t.diff,f=t.patch,l=!1,p=t.initialTree||n(a),h=t.target||s(p,t),v=!1;return a=null,{target:h,update:r}}var o=t(49),i=t(48),u=i({type:"main-loop.invalid.update.in-render",message:"main-loop: Unexpected update occurred in loop.\nWe are currently rendering a view, you can't change state right now.\nThe diff is: {stringDiff}.\nSUGGESTED FIX: find the state mutation in your view or rendering function and remove it.\nThe view should not have any side effects.\n",diff:null,stringDiff:null});e.exports=r},function(e,n){function t(e){return e&&"object"==typeof e?a(e)||s(e)?e:u(e)?o(e,t):i(f(e),function(n,o){var i=r(o);return n[i]=t(e[o]),n},{}):e}function r(e){return e.replace(/[_.-](\w|$)/g,function(e,n){return n.toUpperCase()})}function o(e,n){if(e.map)return e.map(n);for(var t=[],r=0;r<e.length;r++)t.push(n(e[r],r));return t}function i(e,n,t){if(e.reduce)return e.reduce(n,t);for(var r=0;r<e.length;r++)t=n(t,e[r],r);return t}e.exports=function(e){return"string"==typeof e?r(e):t(e)};var u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=function(e){return"[object Date]"===Object.prototype.toString.call(e)},s=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},c=Object.prototype.hasOwnProperty,f=Object.keys||function(e){var n=[];for(var t in e)c.call(e,t)&&n.push(t);return n}},function(e,n){function t(e){var n;return n=2===arguments.length&&"object"==typeof arguments[1]?arguments[1]:o.call(arguments,1),n&&n.hasOwnProperty||(n={}),e.replace(r,function(t,r,o){var i;return"{"===e[o-1]&&"}"===e[o+t.length]?r:(i=n.hasOwnProperty(r)?n[r]:null,null===i||void 0===i?"":i)})}var r=/\{([0-9a-zA-Z]+)\}/g,o=Array.prototype.slice;e.exports=t},function(e,n){function t(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}return e}e.exports=t},function(e,n,t){function r(e){function n(n){var r=new Error;Object.defineProperty(r,"type",{value:r.type,enumerable:!0,writable:!0,configurable:!0});var o=u({},e,n);return u(r,o),r.message=i(t,o),r}if(!e)throw new Error("args is required");if(!e.type)throw new Error("args.type is required");if(!e.message)throw new Error("args.message is required");var t=e.message;if(e.type&&!e.name){var r=o(e.type)+"Error";e.name=r[0].toUpperCase()+r.substr(1)}return u(n,e),n._name=e.name,n}var o=t(45),i=t(46),u=t(47);e.exports=r},function(e,n,t){for(var r=t(50),o="undefined"==typeof window?{}:window,i=["moz","webkit"],u="AnimationFrame",a=o["request"+u],s=o["cancel"+u]||o["cancelRequest"+u],c=!0,f=0;f<i.length&&!a;f++)a=o[i[f]+"Request"+u],s=o[i[f]+"Cancel"+u]||o[i[f]+"CancelRequest"+u];if(!a||!s){c=!1;var l=0,p=0,h=[],v=1e3/60;a=function(e){if(0===h.length){var n=r(),t=Math.max(0,v-(n-l));l=t+n,setTimeout(function(){var e=h.slice(0);h.length=0;for(var n=0;n<e.length;n++)if(!e[n].cancelled)try{e[n].callback(l)}catch(t){setTimeout(function(){throw t},0)}},Math.round(t))}return h.push({handle:++p,callback:e,cancelled:!1}),p},s=function(e){for(var n=0;n<h.length;n++)h[n].handle===e&&(h[n].cancelled=!0)}}e.exports=function(e){return c?a.call(o,function(){try{e.apply(this,arguments)}catch(n){setTimeout(function(){throw n},0)}}):a.call(o,e)},e.exports.cancel=function(){s.apply(o,arguments)}},function(e,n,t){(function(n){(function(){var t,r,o;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof n&&null!==n&&n.hrtime?(e.exports=function(){return(t()-o)/1e6},r=n.hrtime,t=function(){var e;return e=r(),1e9*e[0]+e[1]},o=t()):Date.now?(e.exports=function(){return Date.now()-o},o=Date.now()):(e.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(n,t(30))},,,function(e,n,t){var r=t(27);e.exports=r},function(e,n,t){var r=t(61);e.exports=r},function(e,n,t){var r=t(58);e.exports=r},function(e,n){function t(e,n,t,o){return t&&0!==t.length?(t.sort(i),r(e,n,t,o,0)):{}}function r(e,n,t,i,a){if(i=i||{},e){o(t,a,a)&&(i[a]=e);var s=n.children;if(s)for(var c=e.childNodes,f=0;f<n.children.length;f++){a+=1;var l=s[f]||u,p=a+(l.count||0);o(t,a,p)&&r(c[f],l,t,i,a),a=p}}return i}function o(e,n,t){if(0===e.length)return!1;for(var r,o,i=0,u=e.length-1;u>=i;){if(r=(u+i)/2>>0,o=e[r],i===u)return o>=n&&t>=o;if(n>o)i=r+1;else{if(!(o>t))return!0;u=r-1}}return!1}function i(e,n){return e>n?1:-1}var u={};e.exports=t},function(e,n,t){function r(e,n,t){var r=e.type,c=e.vNode,h=e.patch;switch(r){case v.REMOVE:return o(n,c);case v.INSERT:return i(n,h,t);case v.VTEXT:return u(n,c,h,t);case v.WIDGET:return a(n,c,h,t);case v.VNODE:return s(n,c,h,t);case v.ORDER:return f(n,h),n;case v.PROPS:return p(n,h,c.properties),n;case v.THUNK:return l(n,t.patch(n,h,t));default:return n}}function o(e,n){var t=e.parentNode;return t&&t.removeChild(e),c(e,n),null}function i(e,n,t){var r=t.render(n,t);return e&&e.appendChild(r),e}function u(e,n,t,r){var o;if(3===e.nodeType)e.replaceData(0,e.length,t.text),o=e;else{var i=e.parentNode;o=r.render(t,r),i&&o!==e&&i.replaceChild(o,e)}return o}function a(e,n,t,r){var o,i=d(n,t);o=i?t.update(n,e)||e:r.render(t,r);var u=e.parentNode;return u&&o!==e&&u.replaceChild(o,e),i||c(e,n),o}function s(e,n,t,r){var o=e.parentNode,i=r.render(t,r);return o&&i!==e&&o.replaceChild(i,e),i}function c(e,n){"function"==typeof n.destroy&&h(n)&&n.destroy(e)}function f(e,n){for(var t,r,o,i=e.childNodes,u={},a=0;a<n.removes.length;a++)r=n.removes[a],t=i[r.from],r.key&&(u[r.key]=t),e.removeChild(t);for(var s=i.length,c=0;c<n.inserts.length;c++)o=n.inserts[c],t=u[o.key],e.insertBefore(t,o.to>=s++?null:i[o.to])}function l(e,n){return e&&n&&e!==n&&e.parentNode&&e.parentNode.replaceChild(n,e),n}var p=t(26),h=t(1),v=t(29),d=t(59);e.exports=r},function(e,n,t){function r(e,n,t){return t=t||{},t.patch=t.patch&&t.patch!==r?t.patch:o,t.render=t.render||c,t.patch(e,n,t)}function o(e,n,t){var r=u(n);if(0===r.length)return e;var o=f(e,n.a,r),s=e.ownerDocument;t.document||s===a||(t.document=s);for(var c=0;c<r.length;c++){var l=r[c];e=i(e,o[l],n[l],t)}return e}function i(e,n,t,r){if(!n)return e;var o;if(s(t))for(var i=0;i<t.length;i++)o=l(t[i],n,r),n===e&&(e=o);else o=l(t,n,r),n===e&&(e=o);return e}function u(e){var n=[];for(var t in e)"a"!==t&&n.push(Number(t));return n}var a=t(24),s=t(8),c=t(27),f=t(56),l=t(57);e.exports=r},function(e,n,t){function r(e,n){return o(e)&&o(n)?"name"in e&&"name"in n?e.id===n.id:e.init===n.init:!1}var o=t(1);e.exports=r},function(e,n,t){function r(e,n){var t;for(var a in e){a in n||(t=t||{},t[a]=void 0);var s=e[a],c=n[a];if(s!==c)if(i(s)&&i(c))if(o(c)!==o(s))t=t||{},t[a]=c;else if(u(c))t=t||{},t[a]=c;else{var f=r(s,c);f&&(t=t||{},t[a]=f)}else t=t||{},t[a]=c}for(var l in n)l in e||(t=t||{},t[l]=n[l]);return t}function o(e){return Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__?e.__proto__:e.constructor?e.constructor.prototype:void 0}var i=t(25),u=t(5);e.exports=r},function(e,n,t){function r(e,n){var t={a:e};return o(e,n,t,0),t}function o(e,n,t,r){if(e!==n){var o=t[r],a=!1;if(k(e)||k(n))s(e,n,t,r);else if(null==n)x(e)||(u(e,t,r),o=t[r]),o=d(o,new g(g.REMOVE,e,n));else if(m(n))if(m(e))if(e.tagName===n.tagName&&e.namespace===n.namespace&&e.key===n.key){var c=E(e.properties,n.properties);c&&(o=d(o,new g(g.PROPS,e,c))),o=i(e,n,t,o,r)}else o=d(o,new g(g.VNODE,e,n)),a=!0;else o=d(o,new g(g.VNODE,e,n)),a=!0;else w(n)?w(e)?e.text!==n.text&&(o=d(o,new g(g.VTEXT,e,n))):(o=d(o,new g(g.VTEXT,e,n)),a=!0):x(n)&&(x(e)||(a=!0),o=d(o,new g(g.WIDGET,e,n)));o&&(t[r]=o),a&&u(e,t,r)}}function i(e,n,t,r,i){for(var u=e.children,a=p(u,n.children),s=a.children,c=u.length,f=s.length,l=c>f?c:f,h=0;l>h;h++){var v=u[h],y=s[h];i+=1,v?o(v,y,t,i):y&&(r=d(r,new g(g.INSERT,null,y))),m(v)&&v.count&&(i+=v.count)}return a.moves&&(r=d(r,new g(g.ORDER,e,a.moves))),r}function u(e,n,t){f(e,n,t),a(e,n,t)}function a(e,n,t){if(x(e))"function"==typeof e.destroy&&(n[t]=d(n[t],new g(g.REMOVE,e,null)));else if(m(e)&&(e.hasWidgets||e.hasThunks))for(var r=e.children,o=r.length,i=0;o>i;i++){var u=r[i];t+=1,a(u,n,t),m(u)&&u.count&&(t+=u.count)}else k(e)&&s(e,null,n,t)}function s(e,n,t,o){var i=O(e,n),u=r(i.a,i.b);c(u)&&(t[o]=new g(g.THUNK,null,u))}function c(e){for(var n in e)if("a"!==n)return!0;return!1}function f(e,n,t){if(m(e)){if(e.hooks&&(n[t]=d(n[t],new g(g.PROPS,e,l(e.hooks)))),e.descendantHooks||e.hasThunks)for(var r=e.children,o=r.length,i=0;o>i;i++){var u=r[i];t+=1,f(u,n,t),m(u)&&u.count&&(t+=u.count)}}else k(e)&&s(e,null,n,t)}function l(e){var n={};for(var t in e)n[t]=void 0;return n}function p(e,n){var t=v(n),r=t.keys,o=t.free;if(o.length===n.length)return{children:n,moves:null};var i=v(e),u=i.keys,a=i.free;if(a.length===e.length)return{children:n,moves:null};for(var s=[],c=0,f=o.length,l=0,p=0;p<e.length;p++){var d,y=e[p];y.key?r.hasOwnProperty(y.key)?(d=r[y.key],s.push(n[d])):(d=p-l++,s.push(null)):f>c?(d=o[c++],s.push(n[d])):(d=p-l++,s.push(null))}for(var g=c>=o.length?n.length:o[c],m=0;m<n.length;m++){var w=n[m];w.key?u.hasOwnProperty(w.key)||s.push(w):m>=g&&s.push(w)}for(var x,k=s.slice(),O=0,E=[],b=[],N=0;N<n.length;){var T=n[N];for(x=k[O];null===x&&k.length;)E.push(h(k,O,null)),x=k[O];x&&x.key===T.key?(O++,N++):T.key?(x&&x.key&&r[x.key]!==N+1?(E.push(h(k,O,x.key)),x=k[O],x&&x.key===T.key?O++:b.push({key:T.key,to:N})):b.push({key:T.key,to:N}),N++):x&&x.key&&E.push(h(k,O,x.key))}for(;O<k.length;)x=k[O],E.push(h(k,O,x&&x.key));return E.length!==l||b.length?{children:s,moves:{removes:E,inserts:b}}:{children:s,moves:null}}function h(e,n,t){return e.splice(n,1),{from:n,key:t}}function v(e){for(var n={},t=[],r=e.length,o=0;r>o;o++){var i=e[o];i.key?n[i.key]=o:t.push(o)}return{keys:n,free:t}}function d(e,n){return e?(y(e)?e.push(n):e=[e,n],e):n}var y=t(8),g=t(29),m=t(3),w=t(6),x=t(1),k=t(4),O=t(28),E=t(60);e.exports=r},,function(e,n){}])});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy9jbGllbnRSdW50aW1lLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAyNzgwZGRmNzg2MzFhNGUxZmZjZiIsIndlYnBhY2s6Ly8vLi9saWIvY2xpZW50LXJ1bnRpbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi92aXJ0dWFsLWRvbS92bm9kZS9pcy13aWRnZXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi92aXJ0dWFsLWRvbS92bm9kZS92ZXJzaW9uLmpzIiwid2VicGFjazovLy8uL34vdmlydHVhbC1kb20vdm5vZGUvaXMtdm5vZGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi92aXJ0dWFsLWRvbS92bm9kZS9pcy10aHVuay5qcyIsIndlYnBhY2s6Ly8vLi9+L3ZpcnR1YWwtZG9tL3Zub2RlL2lzLXZob29rLmpzIiwid2VicGFjazovLy8uL34vdmlydHVhbC1kb20vdm5vZGUvaXMtdnRleHQuanMiLCJ3ZWJwYWNrOi8vLy4vfi92aXJ0dWFsLWRvbS9+L3gtaXMtYXJyYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi92aXJ0dWFsLWRvbS9oLmpzIiwid2VicGFjazovLy8uL34vdmlydHVhbC1kb20vfi9icm93c2VyLXNwbGl0L2luZGV4LmpzIiwid2VicGFjazovLy8uL34vdmlydHVhbC1kb20vfi9ldi1zdG9yZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L3ZpcnR1YWwtZG9tL34vZXYtc3RvcmUvfi9pbmRpdmlkdWFsL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vdmlydHVhbC1kb20vfi9ldi1zdG9yZS9+L2luZGl2aWR1YWwvb25lLXZlcnNpb24uanMiLCJ3ZWJwYWNrOi8vLy4vfi92aXJ0dWFsLWRvbS92aXJ0dWFsLWh5cGVyc2NyaXB0L2hvb2tzL2V2LWhvb2suanMiLCJ3ZWJwYWNrOi8vLy4vfi92aXJ0dWFsLWRvbS92aXJ0dWFsLWh5cGVyc2NyaXB0L2hvb2tzL3NvZnQtc2V0LWhvb2suanMiLCJ3ZWJwYWNrOi8vLy4vfi92aXJ0dWFsLWRvbS92aXJ0dWFsLWh5cGVyc2NyaXB0L2luZGV4LmpzIiwid2VicGFjazovLy8uL34vdmlydHVhbC1kb20vdmlydHVhbC1oeXBlcnNjcmlwdC9wYXJzZS10YWcuanMiLCJ3ZWJwYWNrOi8vLy4vfi92aXJ0dWFsLWRvbS92bm9kZS92bm9kZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3ZpcnR1YWwtZG9tL3Zub2RlL3Z0ZXh0LmpzIiwid2VicGFjazovLy8uL34vdmlydHVhbC1kb20vfi9nbG9iYWwvZG9jdW1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi92aXJ0dWFsLWRvbS9+L2lzLW9iamVjdC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L3ZpcnR1YWwtZG9tL3Zkb20vYXBwbHktcHJvcGVydGllcy5qcyIsIndlYnBhY2s6Ly8vLi9+L3ZpcnR1YWwtZG9tL3Zkb20vY3JlYXRlLWVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi92aXJ0dWFsLWRvbS92bm9kZS9oYW5kbGUtdGh1bmsuanMiLCJ3ZWJwYWNrOi8vLy4vfi92aXJ0dWFsLWRvbS92bm9kZS92cGF0Y2guanMiLCJ3ZWJwYWNrOi8vLy4uLy5udm0vdmVyc2lvbnMvbm9kZS92MC4xMi4wL2xpYi9+L3dlYnBhY2svfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9+L21haW4tbG9vcC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L21haW4tbG9vcC9+L2Vycm9yL34vY2FtZWxpemUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9tYWluLWxvb3Avfi9lcnJvci9+L3N0cmluZy10ZW1wbGF0ZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L21haW4tbG9vcC9+L2Vycm9yL34veHRlbmQvbXV0YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L21haW4tbG9vcC9+L2Vycm9yL3R5cGVkLmpzIiwid2VicGFjazovLy8uL34vbWFpbi1sb29wL34vcmFmL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbWFpbi1sb29wL34vcmFmL34vcGVyZm9ybWFuY2Utbm93L2xpYi9wZXJmb3JtYW5jZS1ub3cuanMiLCJ3ZWJwYWNrOi8vLy4vfi92aXJ0dWFsLWRvbS9jcmVhdGUtZWxlbWVudC5qcyIsIndlYnBhY2s6Ly8vLi9+L3ZpcnR1YWwtZG9tL2RpZmYuanMiLCJ3ZWJwYWNrOi8vLy4vfi92aXJ0dWFsLWRvbS9wYXRjaC5qcyIsIndlYnBhY2s6Ly8vLi9+L3ZpcnR1YWwtZG9tL3Zkb20vZG9tLWluZGV4LmpzIiwid2VicGFjazovLy8uL34vdmlydHVhbC1kb20vdmRvbS9wYXRjaC1vcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3ZpcnR1YWwtZG9tL3Zkb20vcGF0Y2guanMiLCJ3ZWJwYWNrOi8vLy4vfi92aXJ0dWFsLWRvbS92ZG9tL3VwZGF0ZS13aWRnZXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi92aXJ0dWFsLWRvbS92dHJlZS9kaWZmLXByb3BzLmpzIiwid2VicGFjazovLy8uL34vdmlydHVhbC1kb20vdnRyZWUvZGlmZi5qcyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ0aGlzIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJtYWluTG9vcCIsImgiLCJsb29wIiwic3RhdGUiLCJyZW5kZXIiLCJjcmVhdGUiLCJkaWZmIiwicGF0Y2giLCJpc1dpZGdldCIsInciLCJ0eXBlIiwiaXNWaXJ0dWFsTm9kZSIsIngiLCJ2ZXJzaW9uIiwiaXNUaHVuayIsInQiLCJpc0hvb2siLCJob29rIiwiaGFzT3duUHJvcGVydHkiLCJ1bmhvb2siLCJpc1ZpcnR1YWxUZXh0IiwiaXNBcnJheSIsIm9iaiIsInRvU3RyaW5nIiwibmF0aXZlSXNBcnJheSIsIkFycmF5IiwiT2JqZWN0IiwicHJvdG90eXBlIiwidW5kZWYiLCJzZWxmIiwibmF0aXZlU3BsaXQiLCJTdHJpbmciLCJzcGxpdCIsImNvbXBsaWFudEV4ZWNOcGNnIiwiZXhlYyIsInN0ciIsInNlcGFyYXRvciIsImxpbWl0Iiwic2VwYXJhdG9yMiIsIm1hdGNoIiwibGFzdEluZGV4IiwibGFzdExlbmd0aCIsIm91dHB1dCIsImZsYWdzIiwiaWdub3JlQ2FzZSIsIm11bHRpbGluZSIsImV4dGVuZGVkIiwic3RpY2t5IiwibGFzdExhc3RJbmRleCIsIlJlZ0V4cCIsInNvdXJjZSIsImluZGV4IiwibGVuZ3RoIiwicHVzaCIsInNsaWNlIiwicmVwbGFjZSIsImkiLCJhcmd1bWVudHMiLCJhcHBseSIsInRlc3QiLCJFdlN0b3JlIiwiZWxlbSIsImhhc2giLCJoYXNoS2V5IiwiT25lVmVyc2lvbkNvbnN0cmFpbnQiLCJNWV9WRVJTSU9OIiwiZ2xvYmFsIiwiSW5kaXZpZHVhbCIsImtleSIsInZhbHVlIiwid2luZG93IiwiT25lVmVyc2lvbiIsIm1vZHVsZU5hbWUiLCJkZWZhdWx0VmFsdWUiLCJlbmZvcmNlS2V5IiwidmVyc2lvblZhbHVlIiwiRXJyb3IiLCJFdkhvb2siLCJub2RlIiwicHJvcGVydHlOYW1lIiwiZXMiLCJwcm9wTmFtZSIsInN1YnN0ciIsInVuZGVmaW5lZCIsIlNvZnRTZXRIb29rIiwidGFnTmFtZSIsInByb3BlcnRpZXMiLCJjaGlsZHJlbiIsInRhZyIsInByb3BzIiwibmFtZXNwYWNlIiwiY2hpbGROb2RlcyIsImlzQ2hpbGRyZW4iLCJwYXJzZVRhZyIsInNvZnRTZXRIb29rIiwidHJhbnNmb3JtUHJvcGVydGllcyIsImFkZENoaWxkIiwiVk5vZGUiLCJWVGV4dCIsImlzQ2hpbGQiLCJVbmV4cGVjdGVkVmlydHVhbEVsZW1lbnQiLCJmb3JlaWduT2JqZWN0IiwicGFyZW50Vm5vZGUiLCJldkhvb2siLCJpc1ZOb2RlIiwiaXNWVGV4dCIsImlzVlRodW5rIiwiZGF0YSIsImVyciIsIm1lc3NhZ2UiLCJlcnJvclN0cmluZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJlIiwibm9JZCIsInRhZ1BhcnRzIiwiY2xhc3NJZFNwbGl0Iiwibm90Q2xhc3NJZCIsImNsYXNzZXMiLCJwYXJ0IiwiY2hhckF0Iiwic3Vic3RyaW5nIiwiY2xhc3NOYW1lIiwiam9pbiIsInRvVXBwZXJDYXNlIiwiVmlydHVhbE5vZGUiLCJub1Byb3BlcnRpZXMiLCJub0NoaWxkcmVuIiwiaG9va3MiLCJjb3VudCIsImRlc2NlbmRhbnRzIiwiaGFzV2lkZ2V0cyIsImhhc1RodW5rcyIsImRlc2NlbmRhbnRIb29rcyIsInByb3BlcnR5IiwiaXNWSG9vayIsImNoaWxkIiwiZGVzdHJveSIsIlZpcnR1YWxUZXh0IiwidGV4dCIsInRvcExldmVsIiwibWluRG9jIiwiZG9jdW1lbnQiLCJkb2NjeSIsImFwcGx5UHJvcGVydGllcyIsInByZXZpb3VzIiwicHJvcFZhbHVlIiwicmVtb3ZlUHJvcGVydHkiLCJpc09iamVjdCIsInBhdGNoT2JqZWN0IiwicHJldmlvdXNWYWx1ZSIsImF0dHJOYW1lIiwicmVtb3ZlQXR0cmlidXRlIiwic3R5bGUiLCJnZXRQcm90b3R5cGUiLCJyZXBsYWNlciIsImsiLCJhdHRyVmFsdWUiLCJzZXRBdHRyaWJ1dGUiLCJnZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsImNvbnN0cnVjdG9yIiwiY3JlYXRlRWxlbWVudCIsInZub2RlIiwib3B0cyIsImRvYyIsIndhcm4iLCJoYW5kbGVUaHVuayIsImEiLCJpbml0IiwiY3JlYXRlVGV4dE5vZGUiLCJjcmVhdGVFbGVtZW50TlMiLCJjaGlsZE5vZGUiLCJhcHBlbmRDaGlsZCIsImIiLCJyZW5kZXJlZEEiLCJyZW5kZXJlZEIiLCJyZW5kZXJUaHVuayIsInRodW5rIiwicmVuZGVyZWRUaHVuayIsIlZpcnR1YWxQYXRjaCIsInZOb2RlIiwiTnVtYmVyIiwiTk9ORSIsIlZURVhUIiwiVk5PREUiLCJXSURHRVQiLCJQUk9QUyIsIk9SREVSIiwiSU5TRVJUIiwiUkVNT1ZFIiwiVEhVTksiLCJjbGVhblVwTmV4dFRpY2siLCJkcmFpbmluZyIsImN1cnJlbnRRdWV1ZSIsInF1ZXVlIiwiY29uY2F0IiwicXVldWVJbmRleCIsImRyYWluUXVldWUiLCJ0aW1lb3V0Iiwic2V0VGltZW91dCIsImxlbiIsInJ1biIsImNsZWFyVGltZW91dCIsIkl0ZW0iLCJmdW4iLCJhcnJheSIsIm5vb3AiLCJwcm9jZXNzIiwibmV4dFRpY2siLCJhcmdzIiwidGl0bGUiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb25zIiwib24iLCJhZGRMaXN0ZW5lciIsIm9uY2UiLCJvZmYiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsImVtaXQiLCJiaW5kaW5nIiwibmFtZSIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siLCJtYWluIiwiaW5pdGlhbFN0YXRlIiwidmlldyIsInVwZGF0ZSIsImluUmVuZGVyaW5nVHJhbnNhY3Rpb24iLCJJbnZhbGlkVXBkYXRlSW5SZW5kZXIiLCJfZGlmZiIsInN0cmluZ0RpZmYiLCJjdXJyZW50U3RhdGUiLCJyZWRyYXdTY2hlZHVsZWQiLCJyYWYiLCJyZWRyYXciLCJuZXdUcmVlIiwiY3JlYXRlT25seSIsInBhdGNoZXMiLCJ0cmVlIiwidGFyZ2V0IiwiaW5pdGlhbFRyZWUiLCJUeXBlZEVycm9yIiwid2FsayIsImlzRGF0ZSIsImlzUmVnZXgiLCJtYXAiLCJyZWR1Y2UiLCJvYmplY3RLZXlzIiwiYWNjIiwiY2FtZWwiLCJjYW1lbENhc2UiLCJfIiwieHMiLCJmIiwicmVzIiwiaGFzIiwia2V5cyIsInRlbXBsYXRlIiwic3RyaW5nIiwibmFyZ3MiLCJyZXN1bHQiLCJleHRlbmQiLCJjcmVhdGVFcnJvciIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwib3B0aW9ucyIsImVycm9yTmFtZSIsImNhbWVsaXplIiwiX25hbWUiLCJub3ciLCJ2ZW5kb3JzIiwic3VmZml4IiwiY2FmIiwiaXNOYXRpdmUiLCJsYXN0IiwiZnJhbWVEdXJhdGlvbiIsImNhbGxiYWNrIiwiX25vdyIsIm5leHQiLCJNYXRoIiwibWF4IiwiY3AiLCJjYW5jZWxsZWQiLCJyb3VuZCIsImhhbmRsZSIsImZuIiwiY2FuY2VsIiwiZ2V0TmFub1NlY29uZHMiLCJocnRpbWUiLCJsb2FkVGltZSIsInBlcmZvcm1hbmNlIiwiaHIiLCJEYXRlIiwiZ2V0VGltZSIsImRvbUluZGV4Iiwicm9vdE5vZGUiLCJpbmRpY2VzIiwibm9kZXMiLCJzb3J0IiwiYXNjZW5kaW5nIiwicmVjdXJzZSIsInJvb3RJbmRleCIsImluZGV4SW5SYW5nZSIsInZDaGlsZHJlbiIsInZDaGlsZCIsIm5vQ2hpbGQiLCJuZXh0SW5kZXgiLCJsZWZ0IiwicmlnaHQiLCJjdXJyZW50SW5kZXgiLCJjdXJyZW50SXRlbSIsIm1pbkluZGV4IiwibWF4SW5kZXgiLCJhcHBseVBhdGNoIiwidnBhdGNoIiwiZG9tTm9kZSIsInJlbmRlck9wdGlvbnMiLCJWUGF0Y2giLCJyZW1vdmVOb2RlIiwiaW5zZXJ0Tm9kZSIsInN0cmluZ1BhdGNoIiwid2lkZ2V0UGF0Y2giLCJ2Tm9kZVBhdGNoIiwicmVvcmRlckNoaWxkcmVuIiwicmVwbGFjZVJvb3QiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJkZXN0cm95V2lkZ2V0IiwibmV3Tm9kZSIsImxlZnRWTm9kZSIsInZUZXh0Iiwibm9kZVR5cGUiLCJyZXBsYWNlRGF0YSIsInJlcGxhY2VDaGlsZCIsIndpZGdldCIsInVwZGF0aW5nIiwidXBkYXRlV2lkZ2V0IiwibW92ZXMiLCJyZW1vdmUiLCJpbnNlcnQiLCJrZXlNYXAiLCJyZW1vdmVzIiwiZnJvbSIsImoiLCJpbnNlcnRzIiwiaW5zZXJ0QmVmb3JlIiwidG8iLCJvbGRSb290IiwibmV3Um9vdCIsInBhdGNoUmVjdXJzaXZlIiwicGF0Y2hJbmRpY2VzIiwib3duZXJEb2N1bWVudCIsIm5vZGVJbmRleCIsInBhdGNoTGlzdCIsInBhdGNoT3AiLCJkaWZmUHJvcHMiLCJhS2V5IiwiYVZhbHVlIiwiYlZhbHVlIiwib2JqZWN0RGlmZiIsImJLZXkiLCJhcHBseUNsZWFyIiwidGh1bmtzIiwiY2xlYXJTdGF0ZSIsImFwcGVuZFBhdGNoIiwicHJvcHNQYXRjaCIsImRpZmZDaGlsZHJlbiIsImFDaGlsZHJlbiIsIm9yZGVyZWRTZXQiLCJyZW9yZGVyIiwiYkNoaWxkcmVuIiwiYUxlbiIsImJMZW4iLCJsZWZ0Tm9kZSIsInJpZ2h0Tm9kZSIsImRlc3Ryb3lXaWRnZXRzIiwidGh1bmtQYXRjaCIsImhhc1BhdGNoZXMiLCJ1bmRlZmluZWRLZXlzIiwiYkNoaWxkSW5kZXgiLCJrZXlJbmRleCIsImJLZXlzIiwiYkZyZWUiLCJmcmVlIiwiYUNoaWxkSW5kZXgiLCJhS2V5cyIsImFGcmVlIiwibmV3Q2hpbGRyZW4iLCJmcmVlSW5kZXgiLCJmcmVlQ291bnQiLCJkZWxldGVkSXRlbXMiLCJpdGVtSW5kZXgiLCJhSXRlbSIsImxhc3RGcmVlSW5kZXgiLCJuZXdJdGVtIiwic2ltdWxhdGVJdGVtIiwic2ltdWxhdGUiLCJzaW11bGF0ZUluZGV4Iiwid2FudGVkSXRlbSIsImFyciIsInNwbGljZSJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxnQkFBQUMsVUFBQSxnQkFBQUMsUUFDQUEsT0FBQUQsUUFBQUQsSUFDQSxrQkFBQUcsZ0JBQUFDLElBQ0FELFVBQUFILEdBQ0EsZ0JBQUFDLFNBQ0FBLFFBQUEsY0FBQUQsSUFFQUQsRUFBQSxjQUFBQyxLQUNDSyxLQUFBLFdBQ0QsTUNBZ0IsVUFBVUMsR0NOMUIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFQLE9BR0EsSUFBQUMsR0FBQU8sRUFBQUQsSUFDQVAsV0FDQVMsR0FBQUYsRUFDQUcsUUFBQSxFQVVBLE9BTkFMLEdBQUFFLEdBQUFJLEtBQUFWLEVBQUFELFFBQUFDLElBQUFELFFBQUFNLEdBR0FMLEVBQUFTLFFBQUEsRUFHQVQsRUFBQUQsUUF2QkEsR0FBQVEsS0FxQ0Es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R0FBQWMsR0FBQTlCLEVBQUEsR0FFQThVLEVBQUE5VSxFQUFBLElBQ0FpSCxFQUFBakgsRUFBQSxHQUNBa0gsRUFBQWxILEVBQUEsR0FDQWlCLEVBQUFqQixFQUFBLEdBQ0F1QixFQUFBdkIsRUFBQSxHQUNBZ0wsRUFBQWhMLEVBQUEsSUFFQW9YLEVBQUFwWCxFQUFBLEdBRUFMLEdBQUFELFFBQUFxQixHM0M0eUVRLENBRUYsU0FBU3BCLEVBQVFEIiwiZmlsZSI6ImNsaWVudFJ1bnRpbWUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJjbGllbnRSdW50aW1lXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImNsaWVudFJ1bnRpbWVcIl0gPSBmYWN0b3J5KCk7XG59KSh0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiBcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB3ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb25cbiAqKi8iLCIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJjbGllbnRSdW50aW1lXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImNsaWVudFJ1bnRpbWVcIl0gPSBmYWN0b3J5KCk7XG59KSh0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiAvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBtYWluTG9vcCA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgICBoOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpLFxuXHRcblx0ICAgIGxvb3A6IGZ1bmN0aW9uIGxvb3Aoc3RhdGUsIHJlbmRlcikge1xuXHQgICAgICAgIHZhciBsb29wID0gbWFpbkxvb3Aoc3RhdGUsIHJlbmRlciwge1xuXHQgICAgICAgICAgICBjcmVhdGU6IF9fd2VicGFja19yZXF1aXJlX18oNTMpLFxuXHQgICAgICAgICAgICBkaWZmOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KSxcblx0ICAgICAgICAgICAgcGF0Y2g6IF9fd2VicGFja19yZXF1aXJlX18oNTUpXG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIHJldHVybiBsb29wO1xuXHQgICAgfVxuXHR9O1xuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBpc1dpZGdldFxuXHRcblx0ZnVuY3Rpb24gaXNXaWRnZXQodykge1xuXHQgICAgcmV0dXJuIHcgJiYgdy50eXBlID09PSBcIldpZGdldFwiXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjJcIlxuXG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgdmVyc2lvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMilcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNWaXJ0dWFsTm9kZVxuXHRcblx0ZnVuY3Rpb24gaXNWaXJ0dWFsTm9kZSh4KSB7XG5cdCAgICByZXR1cm4geCAmJiB4LnR5cGUgPT09IFwiVmlydHVhbE5vZGVcIiAmJiB4LnZlcnNpb24gPT09IHZlcnNpb25cblx0fVxuXG5cbi8qKiovIH0sXG4vKiA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzVGh1bmtcclxuXHRcclxuXHRmdW5jdGlvbiBpc1RodW5rKHQpIHtcclxuXHQgICAgcmV0dXJuIHQgJiYgdC50eXBlID09PSBcIlRodW5rXCJcclxuXHR9XHJcblxuXG4vKioqLyB9LFxuLyogNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBpc0hvb2tcblx0XG5cdGZ1bmN0aW9uIGlzSG9vayhob29rKSB7XG5cdCAgICByZXR1cm4gaG9vayAmJlxuXHQgICAgICAodHlwZW9mIGhvb2suaG9vayA9PT0gXCJmdW5jdGlvblwiICYmICFob29rLmhhc093blByb3BlcnR5KFwiaG9va1wiKSB8fFxuXHQgICAgICAgdHlwZW9mIGhvb2sudW5ob29rID09PSBcImZ1bmN0aW9uXCIgJiYgIWhvb2suaGFzT3duUHJvcGVydHkoXCJ1bmhvb2tcIikpXG5cdH1cblxuXG4vKioqLyB9LFxuLyogNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIHZlcnNpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzVmlydHVhbFRleHRcblx0XG5cdGZ1bmN0aW9uIGlzVmlydHVhbFRleHQoeCkge1xuXHQgICAgcmV0dXJuIHggJiYgeC50eXBlID09PSBcIlZpcnR1YWxUZXh0XCIgJiYgeC52ZXJzaW9uID09PSB2ZXJzaW9uXG5cdH1cblxuXG4vKioqLyB9LFxuLyogNyAqLyxcbi8qIDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdHZhciBuYXRpdmVJc0FycmF5ID0gQXJyYXkuaXNBcnJheVxuXHR2YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IG5hdGl2ZUlzQXJyYXkgfHwgaXNBcnJheVxuXHRcblx0ZnVuY3Rpb24gaXNBcnJheShvYmopIHtcblx0ICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09IFwiW29iamVjdCBBcnJheV1cIlxuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNilcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaFxuXG5cbi8qKiovIH0sXG4vKiAxMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyohXG5cdCAqIENyb3NzLUJyb3dzZXIgU3BsaXQgMS4xLjFcblx0ICogQ29weXJpZ2h0IDIwMDctMjAxMiBTdGV2ZW4gTGV2aXRoYW4gPHN0ZXZlbmxldml0aGFuLmNvbT5cblx0ICogQXZhaWxhYmxlIHVuZGVyIHRoZSBNSVQgTGljZW5zZVxuXHQgKiBFQ01BU2NyaXB0IGNvbXBsaWFudCwgdW5pZm9ybSBjcm9zcy1icm93c2VyIHNwbGl0IG1ldGhvZFxuXHQgKi9cblx0XG5cdC8qKlxuXHQgKiBTcGxpdHMgYSBzdHJpbmcgaW50byBhbiBhcnJheSBvZiBzdHJpbmdzIHVzaW5nIGEgcmVnZXggb3Igc3RyaW5nIHNlcGFyYXRvci4gTWF0Y2hlcyBvZiB0aGVcblx0ICogc2VwYXJhdG9yIGFyZSBub3QgaW5jbHVkZWQgaW4gdGhlIHJlc3VsdCBhcnJheS4gSG93ZXZlciwgaWYgYHNlcGFyYXRvcmAgaXMgYSByZWdleCB0aGF0IGNvbnRhaW5zXG5cdCAqIGNhcHR1cmluZyBncm91cHMsIGJhY2tyZWZlcmVuY2VzIGFyZSBzcGxpY2VkIGludG8gdGhlIHJlc3VsdCBlYWNoIHRpbWUgYHNlcGFyYXRvcmAgaXMgbWF0Y2hlZC5cblx0ICogRml4ZXMgYnJvd3NlciBidWdzIGNvbXBhcmVkIHRvIHRoZSBuYXRpdmUgYFN0cmluZy5wcm90b3R5cGUuc3BsaXRgIGFuZCBjYW4gYmUgdXNlZCByZWxpYWJseVxuXHQgKiBjcm9zcy1icm93c2VyLlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyIFN0cmluZyB0byBzcGxpdC5cblx0ICogQHBhcmFtIHtSZWdFeHB8U3RyaW5nfSBzZXBhcmF0b3IgUmVnZXggb3Igc3RyaW5nIHRvIHVzZSBmb3Igc2VwYXJhdGluZyB0aGUgc3RyaW5nLlxuXHQgKiBAcGFyYW0ge051bWJlcn0gW2xpbWl0XSBNYXhpbXVtIG51bWJlciBvZiBpdGVtcyB0byBpbmNsdWRlIGluIHRoZSByZXN1bHQgYXJyYXkuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gQXJyYXkgb2Ygc3Vic3RyaW5ncy5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogLy8gQmFzaWMgdXNlXG5cdCAqIHNwbGl0KCdhIGIgYyBkJywgJyAnKTtcblx0ICogLy8gLT4gWydhJywgJ2InLCAnYycsICdkJ11cblx0ICpcblx0ICogLy8gV2l0aCBsaW1pdFxuXHQgKiBzcGxpdCgnYSBiIGMgZCcsICcgJywgMik7XG5cdCAqIC8vIC0+IFsnYScsICdiJ11cblx0ICpcblx0ICogLy8gQmFja3JlZmVyZW5jZXMgaW4gcmVzdWx0IGFycmF5XG5cdCAqIHNwbGl0KCcuLndvcmQxIHdvcmQyLi4nLCAvKFthLXpdKykoXFxkKykvaSk7XG5cdCAqIC8vIC0+IFsnLi4nLCAnd29yZCcsICcxJywgJyAnLCAnd29yZCcsICcyJywgJy4uJ11cblx0ICovXG5cdG1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uIHNwbGl0KHVuZGVmKSB7XG5cdFxuXHQgIHZhciBuYXRpdmVTcGxpdCA9IFN0cmluZy5wcm90b3R5cGUuc3BsaXQsXG5cdCAgICBjb21wbGlhbnRFeGVjTnBjZyA9IC8oKT8/Ly5leGVjKFwiXCIpWzFdID09PSB1bmRlZixcblx0ICAgIC8vIE5QQ0c6IG5vbnBhcnRpY2lwYXRpbmcgY2FwdHVyaW5nIGdyb3VwXG5cdCAgICBzZWxmO1xuXHRcblx0ICBzZWxmID0gZnVuY3Rpb24oc3RyLCBzZXBhcmF0b3IsIGxpbWl0KSB7XG5cdCAgICAvLyBJZiBgc2VwYXJhdG9yYCBpcyBub3QgYSByZWdleCwgdXNlIGBuYXRpdmVTcGxpdGBcblx0ICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoc2VwYXJhdG9yKSAhPT0gXCJbb2JqZWN0IFJlZ0V4cF1cIikge1xuXHQgICAgICByZXR1cm4gbmF0aXZlU3BsaXQuY2FsbChzdHIsIHNlcGFyYXRvciwgbGltaXQpO1xuXHQgICAgfVxuXHQgICAgdmFyIG91dHB1dCA9IFtdLFxuXHQgICAgICBmbGFncyA9IChzZXBhcmF0b3IuaWdub3JlQ2FzZSA/IFwiaVwiIDogXCJcIikgKyAoc2VwYXJhdG9yLm11bHRpbGluZSA/IFwibVwiIDogXCJcIikgKyAoc2VwYXJhdG9yLmV4dGVuZGVkID8gXCJ4XCIgOiBcIlwiKSArIC8vIFByb3Bvc2VkIGZvciBFUzZcblx0ICAgICAgKHNlcGFyYXRvci5zdGlja3kgPyBcInlcIiA6IFwiXCIpLFxuXHQgICAgICAvLyBGaXJlZm94IDMrXG5cdCAgICAgIGxhc3RMYXN0SW5kZXggPSAwLFxuXHQgICAgICAvLyBNYWtlIGBnbG9iYWxgIGFuZCBhdm9pZCBgbGFzdEluZGV4YCBpc3N1ZXMgYnkgd29ya2luZyB3aXRoIGEgY29weVxuXHQgICAgICBzZXBhcmF0b3IgPSBuZXcgUmVnRXhwKHNlcGFyYXRvci5zb3VyY2UsIGZsYWdzICsgXCJnXCIpLFxuXHQgICAgICBzZXBhcmF0b3IyLCBtYXRjaCwgbGFzdEluZGV4LCBsYXN0TGVuZ3RoO1xuXHQgICAgc3RyICs9IFwiXCI7IC8vIFR5cGUtY29udmVydFxuXHQgICAgaWYgKCFjb21wbGlhbnRFeGVjTnBjZykge1xuXHQgICAgICAvLyBEb2Vzbid0IG5lZWQgZmxhZ3MgZ3ksIGJ1dCB0aGV5IGRvbid0IGh1cnRcblx0ICAgICAgc2VwYXJhdG9yMiA9IG5ldyBSZWdFeHAoXCJeXCIgKyBzZXBhcmF0b3Iuc291cmNlICsgXCIkKD8hXFxcXHMpXCIsIGZsYWdzKTtcblx0ICAgIH1cblx0ICAgIC8qIFZhbHVlcyBmb3IgYGxpbWl0YCwgcGVyIHRoZSBzcGVjOlxuXHQgICAgICogSWYgdW5kZWZpbmVkOiA0Mjk0OTY3Mjk1IC8vIE1hdGgucG93KDIsIDMyKSAtIDFcblx0ICAgICAqIElmIDAsIEluZmluaXR5LCBvciBOYU46IDBcblx0ICAgICAqIElmIHBvc2l0aXZlIG51bWJlcjogbGltaXQgPSBNYXRoLmZsb29yKGxpbWl0KTsgaWYgKGxpbWl0ID4gNDI5NDk2NzI5NSkgbGltaXQgLT0gNDI5NDk2NzI5Njtcblx0ICAgICAqIElmIG5lZ2F0aXZlIG51bWJlcjogNDI5NDk2NzI5NiAtIE1hdGguZmxvb3IoTWF0aC5hYnMobGltaXQpKVxuXHQgICAgICogSWYgb3RoZXI6IFR5cGUtY29udmVydCwgdGhlbiB1c2UgdGhlIGFib3ZlIHJ1bGVzXG5cdCAgICAgKi9cblx0ICAgIGxpbWl0ID0gbGltaXQgPT09IHVuZGVmID8gLTEgPj4+IDAgOiAvLyBNYXRoLnBvdygyLCAzMikgLSAxXG5cdCAgICBsaW1pdCA+Pj4gMDsgLy8gVG9VaW50MzIobGltaXQpXG5cdCAgICB3aGlsZSAobWF0Y2ggPSBzZXBhcmF0b3IuZXhlYyhzdHIpKSB7XG5cdCAgICAgIC8vIGBzZXBhcmF0b3IubGFzdEluZGV4YCBpcyBub3QgcmVsaWFibGUgY3Jvc3MtYnJvd3NlclxuXHQgICAgICBsYXN0SW5kZXggPSBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aDtcblx0ICAgICAgaWYgKGxhc3RJbmRleCA+IGxhc3RMYXN0SW5kZXgpIHtcblx0ICAgICAgICBvdXRwdXQucHVzaChzdHIuc2xpY2UobGFzdExhc3RJbmRleCwgbWF0Y2guaW5kZXgpKTtcblx0ICAgICAgICAvLyBGaXggYnJvd3NlcnMgd2hvc2UgYGV4ZWNgIG1ldGhvZHMgZG9uJ3QgY29uc2lzdGVudGx5IHJldHVybiBgdW5kZWZpbmVkYCBmb3Jcblx0ICAgICAgICAvLyBub25wYXJ0aWNpcGF0aW5nIGNhcHR1cmluZyBncm91cHNcblx0ICAgICAgICBpZiAoIWNvbXBsaWFudEV4ZWNOcGNnICYmIG1hdGNoLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgICAgIG1hdGNoWzBdLnJlcGxhY2Uoc2VwYXJhdG9yMiwgZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aCAtIDI7IGkrKykge1xuXHQgICAgICAgICAgICAgIGlmIChhcmd1bWVudHNbaV0gPT09IHVuZGVmKSB7XG5cdCAgICAgICAgICAgICAgICBtYXRjaFtpXSA9IHVuZGVmO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChtYXRjaC5sZW5ndGggPiAxICYmIG1hdGNoLmluZGV4IDwgc3RyLmxlbmd0aCkge1xuXHQgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkob3V0cHV0LCBtYXRjaC5zbGljZSgxKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGxhc3RMZW5ndGggPSBtYXRjaFswXS5sZW5ndGg7XG5cdCAgICAgICAgbGFzdExhc3RJbmRleCA9IGxhc3RJbmRleDtcblx0ICAgICAgICBpZiAob3V0cHV0Lmxlbmd0aCA+PSBsaW1pdCkge1xuXHQgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIGlmIChzZXBhcmF0b3IubGFzdEluZGV4ID09PSBtYXRjaC5pbmRleCkge1xuXHQgICAgICAgIHNlcGFyYXRvci5sYXN0SW5kZXgrKzsgLy8gQXZvaWQgYW4gaW5maW5pdGUgbG9vcFxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAobGFzdExhc3RJbmRleCA9PT0gc3RyLmxlbmd0aCkge1xuXHQgICAgICBpZiAobGFzdExlbmd0aCB8fCAhc2VwYXJhdG9yLnRlc3QoXCJcIikpIHtcblx0ICAgICAgICBvdXRwdXQucHVzaChcIlwiKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb3V0cHV0LnB1c2goc3RyLnNsaWNlKGxhc3RMYXN0SW5kZXgpKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBvdXRwdXQubGVuZ3RoID4gbGltaXQgPyBvdXRwdXQuc2xpY2UoMCwgbGltaXQpIDogb3V0cHV0O1xuXHQgIH07XG5cdFxuXHQgIHJldHVybiBzZWxmO1xuXHR9KSgpO1xuXG5cbi8qKiovIH0sXG4vKiAxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIE9uZVZlcnNpb25Db25zdHJhaW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHR2YXIgTVlfVkVSU0lPTiA9ICc3Jztcblx0T25lVmVyc2lvbkNvbnN0cmFpbnQoJ2V2LXN0b3JlJywgTVlfVkVSU0lPTik7XG5cdFxuXHR2YXIgaGFzaEtleSA9ICdfX0VWX1NUT1JFX0tFWUAnICsgTVlfVkVSU0lPTjtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gRXZTdG9yZTtcblx0XG5cdGZ1bmN0aW9uIEV2U3RvcmUoZWxlbSkge1xuXHQgICAgdmFyIGhhc2ggPSBlbGVtW2hhc2hLZXldO1xuXHRcblx0ICAgIGlmICghaGFzaCkge1xuXHQgICAgICAgIGhhc2ggPSBlbGVtW2hhc2hLZXldID0ge307XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIGhhc2g7XG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsndXNlIHN0cmljdCc7XG5cdFxuXHQvKmdsb2JhbCB3aW5kb3csIGdsb2JhbCovXG5cdFxuXHR2YXIgcm9vdCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID9cblx0ICAgIHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID9cblx0ICAgIGdsb2JhbCA6IHt9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBJbmRpdmlkdWFsO1xuXHRcblx0ZnVuY3Rpb24gSW5kaXZpZHVhbChrZXksIHZhbHVlKSB7XG5cdCAgICBpZiAoa2V5IGluIHJvb3QpIHtcblx0ICAgICAgICByZXR1cm4gcm9vdFtrZXldO1xuXHQgICAgfVxuXHRcblx0ICAgIHJvb3Rba2V5XSA9IHZhbHVlO1xuXHRcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0fVxuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogMTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBJbmRpdmlkdWFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IE9uZVZlcnNpb247XG5cdFxuXHRmdW5jdGlvbiBPbmVWZXJzaW9uKG1vZHVsZU5hbWUsIHZlcnNpb24sIGRlZmF1bHRWYWx1ZSkge1xuXHQgICAgdmFyIGtleSA9ICdfX0lORElWSURVQUxfT05FX1ZFUlNJT05fJyArIG1vZHVsZU5hbWU7XG5cdCAgICB2YXIgZW5mb3JjZUtleSA9IGtleSArICdfRU5GT1JDRV9TSU5HTEVUT04nO1xuXHRcblx0ICAgIHZhciB2ZXJzaW9uVmFsdWUgPSBJbmRpdmlkdWFsKGVuZm9yY2VLZXksIHZlcnNpb24pO1xuXHRcblx0ICAgIGlmICh2ZXJzaW9uVmFsdWUgIT09IHZlcnNpb24pIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NhbiBvbmx5IGhhdmUgb25lIGNvcHkgb2YgJyArXG5cdCAgICAgICAgICAgIG1vZHVsZU5hbWUgKyAnLlxcbicgK1xuXHQgICAgICAgICAgICAnWW91IGFscmVhZHkgaGF2ZSB2ZXJzaW9uICcgKyB2ZXJzaW9uVmFsdWUgK1xuXHQgICAgICAgICAgICAnIGluc3RhbGxlZC5cXG4nICtcblx0ICAgICAgICAgICAgJ1RoaXMgbWVhbnMgeW91IGNhbm5vdCBpbnN0YWxsIHZlcnNpb24gJyArIHZlcnNpb24pO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBJbmRpdmlkdWFsKGtleSwgZGVmYXVsdFZhbHVlKTtcblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIEV2U3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gRXZIb29rO1xuXHRcblx0ZnVuY3Rpb24gRXZIb29rKHZhbHVlKSB7XG5cdCAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRXZIb29rKSkge1xuXHQgICAgICAgIHJldHVybiBuZXcgRXZIb29rKHZhbHVlKTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG5cdH1cblx0XG5cdEV2SG9vay5wcm90b3R5cGUuaG9vayA9IGZ1bmN0aW9uIChub2RlLCBwcm9wZXJ0eU5hbWUpIHtcblx0ICAgIHZhciBlcyA9IEV2U3RvcmUobm9kZSk7XG5cdCAgICB2YXIgcHJvcE5hbWUgPSBwcm9wZXJ0eU5hbWUuc3Vic3RyKDMpO1xuXHRcblx0ICAgIGVzW3Byb3BOYW1lXSA9IHRoaXMudmFsdWU7XG5cdH07XG5cdFxuXHRFdkhvb2sucHJvdG90eXBlLnVuaG9vayA9IGZ1bmN0aW9uKG5vZGUsIHByb3BlcnR5TmFtZSkge1xuXHQgICAgdmFyIGVzID0gRXZTdG9yZShub2RlKTtcblx0ICAgIHZhciBwcm9wTmFtZSA9IHByb3BlcnR5TmFtZS5zdWJzdHIoMyk7XG5cdFxuXHQgICAgZXNbcHJvcE5hbWVdID0gdW5kZWZpbmVkO1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiAxNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBTb2Z0U2V0SG9vaztcblx0XG5cdGZ1bmN0aW9uIFNvZnRTZXRIb29rKHZhbHVlKSB7XG5cdCAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU29mdFNldEhvb2spKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBTb2Z0U2V0SG9vayh2YWx1ZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuXHR9XG5cdFxuXHRTb2Z0U2V0SG9vay5wcm90b3R5cGUuaG9vayA9IGZ1bmN0aW9uIChub2RlLCBwcm9wZXJ0eU5hbWUpIHtcblx0ICAgIGlmIChub2RlW3Byb3BlcnR5TmFtZV0gIT09IHRoaXMudmFsdWUpIHtcblx0ICAgICAgICBub2RlW3Byb3BlcnR5TmFtZV0gPSB0aGlzLnZhbHVlO1xuXHQgICAgfVxuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiAxNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0dmFyIFZOb2RlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdHZhciBWVGV4dCA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXHR2YXIgaXNWTm9kZSA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciBpc1ZUZXh0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0dmFyIGlzV2lkZ2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0dmFyIGlzSG9vayA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdHZhciBpc1ZUaHVuayA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHR2YXIgcGFyc2VUYWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0dmFyIHNvZnRTZXRIb29rID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciBldkhvb2sgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaDtcblx0XG5cdGZ1bmN0aW9uIGgodGFnTmFtZSwgcHJvcGVydGllcywgY2hpbGRyZW4pIHtcblx0ICAgIHZhciBjaGlsZE5vZGVzID0gW107XG5cdCAgICB2YXIgdGFnLCBwcm9wcywga2V5LCBuYW1lc3BhY2U7XG5cdFxuXHQgICAgaWYgKCFjaGlsZHJlbiAmJiBpc0NoaWxkcmVuKHByb3BlcnRpZXMpKSB7XG5cdCAgICAgICAgY2hpbGRyZW4gPSBwcm9wZXJ0aWVzO1xuXHQgICAgICAgIHByb3BzID0ge307XG5cdCAgICB9XG5cdFxuXHQgICAgcHJvcHMgPSBwcm9wcyB8fCBwcm9wZXJ0aWVzIHx8IHt9O1xuXHQgICAgdGFnID0gcGFyc2VUYWcodGFnTmFtZSwgcHJvcHMpO1xuXHRcblx0ICAgIC8vIHN1cHBvcnQga2V5c1xuXHQgICAgaWYgKHByb3BzLmhhc093blByb3BlcnR5KCdrZXknKSkge1xuXHQgICAgICAgIGtleSA9IHByb3BzLmtleTtcblx0ICAgICAgICBwcm9wcy5rZXkgPSB1bmRlZmluZWQ7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gc3VwcG9ydCBuYW1lc3BhY2Vcblx0ICAgIGlmIChwcm9wcy5oYXNPd25Qcm9wZXJ0eSgnbmFtZXNwYWNlJykpIHtcblx0ICAgICAgICBuYW1lc3BhY2UgPSBwcm9wcy5uYW1lc3BhY2U7XG5cdCAgICAgICAgcHJvcHMubmFtZXNwYWNlID0gdW5kZWZpbmVkO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIGZpeCBjdXJzb3IgYnVnXG5cdCAgICBpZiAodGFnID09PSAnSU5QVVQnICYmXG5cdCAgICAgICAgIW5hbWVzcGFjZSAmJlxuXHQgICAgICAgIHByb3BzLmhhc093blByb3BlcnR5KCd2YWx1ZScpICYmXG5cdCAgICAgICAgcHJvcHMudmFsdWUgIT09IHVuZGVmaW5lZCAmJlxuXHQgICAgICAgICFpc0hvb2socHJvcHMudmFsdWUpXG5cdCAgICApIHtcblx0ICAgICAgICBwcm9wcy52YWx1ZSA9IHNvZnRTZXRIb29rKHByb3BzLnZhbHVlKTtcblx0ICAgIH1cblx0XG5cdCAgICB0cmFuc2Zvcm1Qcm9wZXJ0aWVzKHByb3BzKTtcblx0XG5cdCAgICBpZiAoY2hpbGRyZW4gIT09IHVuZGVmaW5lZCAmJiBjaGlsZHJlbiAhPT0gbnVsbCkge1xuXHQgICAgICAgIGFkZENoaWxkKGNoaWxkcmVuLCBjaGlsZE5vZGVzLCB0YWcsIHByb3BzKTtcblx0ICAgIH1cblx0XG5cdFxuXHQgICAgcmV0dXJuIG5ldyBWTm9kZSh0YWcsIHByb3BzLCBjaGlsZE5vZGVzLCBrZXksIG5hbWVzcGFjZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZENoaWxkKGMsIGNoaWxkTm9kZXMsIHRhZywgcHJvcHMpIHtcblx0ICAgIGlmICh0eXBlb2YgYyA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICBjaGlsZE5vZGVzLnB1c2gobmV3IFZUZXh0KGMpKTtcblx0ICAgIH0gZWxzZSBpZiAodHlwZW9mIGMgPT09ICdudW1iZXInKSB7XG5cdCAgICAgICAgY2hpbGROb2Rlcy5wdXNoKG5ldyBWVGV4dChTdHJpbmcoYykpKTtcblx0ICAgIH0gZWxzZSBpZiAoaXNDaGlsZChjKSkge1xuXHQgICAgICAgIGNoaWxkTm9kZXMucHVzaChjKTtcblx0ICAgIH0gZWxzZSBpZiAoaXNBcnJheShjKSkge1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBhZGRDaGlsZChjW2ldLCBjaGlsZE5vZGVzLCB0YWcsIHByb3BzKTtcblx0ICAgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKGMgPT09IG51bGwgfHwgYyA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aHJvdyBVbmV4cGVjdGVkVmlydHVhbEVsZW1lbnQoe1xuXHQgICAgICAgICAgICBmb3JlaWduT2JqZWN0OiBjLFxuXHQgICAgICAgICAgICBwYXJlbnRWbm9kZToge1xuXHQgICAgICAgICAgICAgICAgdGFnTmFtZTogdGFnLFxuXHQgICAgICAgICAgICAgICAgcHJvcGVydGllczogcHJvcHNcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB0cmFuc2Zvcm1Qcm9wZXJ0aWVzKHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBwcm9wcykge1xuXHQgICAgICAgIGlmIChwcm9wcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcblx0ICAgICAgICAgICAgdmFyIHZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuXHRcblx0ICAgICAgICAgICAgaWYgKGlzSG9vayh2YWx1ZSkpIHtcblx0ICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICBpZiAocHJvcE5hbWUuc3Vic3RyKDAsIDMpID09PSAnZXYtJykge1xuXHQgICAgICAgICAgICAgICAgLy8gYWRkIGV2LWZvbyBzdXBwb3J0XG5cdCAgICAgICAgICAgICAgICBwcm9wc1twcm9wTmFtZV0gPSBldkhvb2sodmFsdWUpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc0NoaWxkKHgpIHtcblx0ICAgIHJldHVybiBpc1ZOb2RlKHgpIHx8IGlzVlRleHQoeCkgfHwgaXNXaWRnZXQoeCkgfHwgaXNWVGh1bmsoeCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzQ2hpbGRyZW4oeCkge1xuXHQgICAgcmV0dXJuIHR5cGVvZiB4ID09PSAnc3RyaW5nJyB8fCBpc0FycmF5KHgpIHx8IGlzQ2hpbGQoeCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIFVuZXhwZWN0ZWRWaXJ0dWFsRWxlbWVudChkYXRhKSB7XG5cdCAgICB2YXIgZXJyID0gbmV3IEVycm9yKCk7XG5cdFxuXHQgICAgZXJyLnR5cGUgPSAndmlydHVhbC1oeXBlcnNjcmlwdC51bmV4cGVjdGVkLnZpcnR1YWwtZWxlbWVudCc7XG5cdCAgICBlcnIubWVzc2FnZSA9ICdVbmV4cGVjdGVkIHZpcnR1YWwgY2hpbGQgcGFzc2VkIHRvIGgoKS5cXG4nICtcblx0ICAgICAgICAnRXhwZWN0ZWQgYSBWTm9kZSAvIFZ0aHVuayAvIFZXaWRnZXQgLyBzdHJpbmcgYnV0OlxcbicgK1xuXHQgICAgICAgICdnb3Q6XFxuJyArXG5cdCAgICAgICAgZXJyb3JTdHJpbmcoZGF0YS5mb3JlaWduT2JqZWN0KSArXG5cdCAgICAgICAgJy5cXG4nICtcblx0ICAgICAgICAnVGhlIHBhcmVudCB2bm9kZSBpczpcXG4nICtcblx0ICAgICAgICBlcnJvclN0cmluZyhkYXRhLnBhcmVudFZub2RlKVxuXHQgICAgICAgICdcXG4nICtcblx0ICAgICAgICAnU3VnZ2VzdGVkIGZpeDogY2hhbmdlIHlvdXIgYGgoLi4uLCBbIC4uLiBdKWAgY2FsbHNpdGUuJztcblx0ICAgIGVyci5mb3JlaWduT2JqZWN0ID0gZGF0YS5mb3JlaWduT2JqZWN0O1xuXHQgICAgZXJyLnBhcmVudFZub2RlID0gZGF0YS5wYXJlbnRWbm9kZTtcblx0XG5cdCAgICByZXR1cm4gZXJyO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBlcnJvclN0cmluZyhvYmopIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgJyAgICAnKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICByZXR1cm4gU3RyaW5nKG9iaik7XG5cdCAgICB9XG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBzcGxpdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0dmFyIGNsYXNzSWRTcGxpdCA9IC8oW1xcLiNdP1thLXpBLVowLTlcXHUwMDdGLVxcdUZGRkZfOi1dKykvO1xuXHR2YXIgbm90Q2xhc3NJZCA9IC9eXFwufCMvO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBwYXJzZVRhZztcblx0XG5cdGZ1bmN0aW9uIHBhcnNlVGFnKHRhZywgcHJvcHMpIHtcblx0ICAgIGlmICghdGFnKSB7XG5cdCAgICAgICAgcmV0dXJuICdESVYnO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBub0lkID0gIShwcm9wcy5oYXNPd25Qcm9wZXJ0eSgnaWQnKSk7XG5cdFxuXHQgICAgdmFyIHRhZ1BhcnRzID0gc3BsaXQodGFnLCBjbGFzc0lkU3BsaXQpO1xuXHQgICAgdmFyIHRhZ05hbWUgPSBudWxsO1xuXHRcblx0ICAgIGlmIChub3RDbGFzc0lkLnRlc3QodGFnUGFydHNbMV0pKSB7XG5cdCAgICAgICAgdGFnTmFtZSA9ICdESVYnO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBjbGFzc2VzLCBwYXJ0LCB0eXBlLCBpO1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCB0YWdQYXJ0cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIHBhcnQgPSB0YWdQYXJ0c1tpXTtcblx0XG5cdCAgICAgICAgaWYgKCFwYXJ0KSB7XG5cdCAgICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdHlwZSA9IHBhcnQuY2hhckF0KDApO1xuXHRcblx0ICAgICAgICBpZiAoIXRhZ05hbWUpIHtcblx0ICAgICAgICAgICAgdGFnTmFtZSA9IHBhcnQ7XG5cdCAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnLicpIHtcblx0ICAgICAgICAgICAgY2xhc3NlcyA9IGNsYXNzZXMgfHwgW107XG5cdCAgICAgICAgICAgIGNsYXNzZXMucHVzaChwYXJ0LnN1YnN0cmluZygxLCBwYXJ0Lmxlbmd0aCkpO1xuXHQgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJyMnICYmIG5vSWQpIHtcblx0ICAgICAgICAgICAgcHJvcHMuaWQgPSBwYXJ0LnN1YnN0cmluZygxLCBwYXJ0Lmxlbmd0aCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChjbGFzc2VzKSB7XG5cdCAgICAgICAgaWYgKHByb3BzLmNsYXNzTmFtZSkge1xuXHQgICAgICAgICAgICBjbGFzc2VzLnB1c2gocHJvcHMuY2xhc3NOYW1lKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHByb3BzLmNsYXNzTmFtZSA9IGNsYXNzZXMuam9pbignICcpO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBwcm9wcy5uYW1lc3BhY2UgPyB0YWdOYW1lIDogdGFnTmFtZS50b1VwcGVyQ2FzZSgpO1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgdmVyc2lvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMilcblx0dmFyIGlzVk5vZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpXG5cdHZhciBpc1dpZGdldCA9IF9fd2VicGFja19yZXF1aXJlX18oMSlcblx0dmFyIGlzVGh1bmsgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpXG5cdHZhciBpc1ZIb29rID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBWaXJ0dWFsTm9kZVxuXHRcblx0dmFyIG5vUHJvcGVydGllcyA9IHt9XG5cdHZhciBub0NoaWxkcmVuID0gW11cblx0XG5cdGZ1bmN0aW9uIFZpcnR1YWxOb2RlKHRhZ05hbWUsIHByb3BlcnRpZXMsIGNoaWxkcmVuLCBrZXksIG5hbWVzcGFjZSkge1xuXHQgICAgdGhpcy50YWdOYW1lID0gdGFnTmFtZVxuXHQgICAgdGhpcy5wcm9wZXJ0aWVzID0gcHJvcGVydGllcyB8fCBub1Byb3BlcnRpZXNcblx0ICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbiB8fCBub0NoaWxkcmVuXG5cdCAgICB0aGlzLmtleSA9IGtleSAhPSBudWxsID8gU3RyaW5nKGtleSkgOiB1bmRlZmluZWRcblx0ICAgIHRoaXMubmFtZXNwYWNlID0gKHR5cGVvZiBuYW1lc3BhY2UgPT09IFwic3RyaW5nXCIpID8gbmFtZXNwYWNlIDogbnVsbFxuXHRcblx0ICAgIHZhciBjb3VudCA9IChjaGlsZHJlbiAmJiBjaGlsZHJlbi5sZW5ndGgpIHx8IDBcblx0ICAgIHZhciBkZXNjZW5kYW50cyA9IDBcblx0ICAgIHZhciBoYXNXaWRnZXRzID0gZmFsc2Vcblx0ICAgIHZhciBoYXNUaHVua3MgPSBmYWxzZVxuXHQgICAgdmFyIGRlc2NlbmRhbnRIb29rcyA9IGZhbHNlXG5cdCAgICB2YXIgaG9va3Ncblx0XG5cdCAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBwcm9wZXJ0aWVzKSB7XG5cdCAgICAgICAgaWYgKHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG5cdCAgICAgICAgICAgIHZhciBwcm9wZXJ0eSA9IHByb3BlcnRpZXNbcHJvcE5hbWVdXG5cdCAgICAgICAgICAgIGlmIChpc1ZIb29rKHByb3BlcnR5KSAmJiBwcm9wZXJ0eS51bmhvb2spIHtcblx0ICAgICAgICAgICAgICAgIGlmICghaG9va3MpIHtcblx0ICAgICAgICAgICAgICAgICAgICBob29rcyA9IHt9XG5cdCAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgaG9va3NbcHJvcE5hbWVdID0gcHJvcGVydHlcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcblx0ICAgICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXVxuXHQgICAgICAgIGlmIChpc1ZOb2RlKGNoaWxkKSkge1xuXHQgICAgICAgICAgICBkZXNjZW5kYW50cyArPSBjaGlsZC5jb3VudCB8fCAwXG5cdFxuXHQgICAgICAgICAgICBpZiAoIWhhc1dpZGdldHMgJiYgY2hpbGQuaGFzV2lkZ2V0cykge1xuXHQgICAgICAgICAgICAgICAgaGFzV2lkZ2V0cyA9IHRydWVcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgaWYgKCFoYXNUaHVua3MgJiYgY2hpbGQuaGFzVGh1bmtzKSB7XG5cdCAgICAgICAgICAgICAgICBoYXNUaHVua3MgPSB0cnVlXG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIGlmICghZGVzY2VuZGFudEhvb2tzICYmIChjaGlsZC5ob29rcyB8fCBjaGlsZC5kZXNjZW5kYW50SG9va3MpKSB7XG5cdCAgICAgICAgICAgICAgICBkZXNjZW5kYW50SG9va3MgPSB0cnVlXG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgaWYgKCFoYXNXaWRnZXRzICYmIGlzV2lkZ2V0KGNoaWxkKSkge1xuXHQgICAgICAgICAgICBpZiAodHlwZW9mIGNoaWxkLmRlc3Ryb3kgPT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgICAgICAgICAgaGFzV2lkZ2V0cyA9IHRydWVcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBpZiAoIWhhc1RodW5rcyAmJiBpc1RodW5rKGNoaWxkKSkge1xuXHQgICAgICAgICAgICBoYXNUaHVua3MgPSB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmNvdW50ID0gY291bnQgKyBkZXNjZW5kYW50c1xuXHQgICAgdGhpcy5oYXNXaWRnZXRzID0gaGFzV2lkZ2V0c1xuXHQgICAgdGhpcy5oYXNUaHVua3MgPSBoYXNUaHVua3Ncblx0ICAgIHRoaXMuaG9va3MgPSBob29rc1xuXHQgICAgdGhpcy5kZXNjZW5kYW50SG9va3MgPSBkZXNjZW5kYW50SG9va3Ncblx0fVxuXHRcblx0VmlydHVhbE5vZGUucHJvdG90eXBlLnZlcnNpb24gPSB2ZXJzaW9uXG5cdFZpcnR1YWxOb2RlLnByb3RvdHlwZS50eXBlID0gXCJWaXJ0dWFsTm9kZVwiXG5cblxuLyoqKi8gfSxcbi8qIDE5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgdmVyc2lvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMilcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gVmlydHVhbFRleHRcblx0XG5cdGZ1bmN0aW9uIFZpcnR1YWxUZXh0KHRleHQpIHtcblx0ICAgIHRoaXMudGV4dCA9IFN0cmluZyh0ZXh0KVxuXHR9XG5cdFxuXHRWaXJ0dWFsVGV4dC5wcm90b3R5cGUudmVyc2lvbiA9IHZlcnNpb25cblx0VmlydHVhbFRleHQucHJvdG90eXBlLnR5cGUgPSBcIlZpcnR1YWxUZXh0XCJcblxuXG4vKioqLyB9LFxuLyogMjAgKi8sXG4vKiAyMSAqLyxcbi8qIDIyICovLFxuLyogMjMgKi8sXG4vKiAyNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge3ZhciB0b3BMZXZlbCA9IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDpcblx0ICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDoge31cblx0dmFyIG1pbkRvYyA9IF9fd2VicGFja19yZXF1aXJlX18oNjMpO1xuXHRcblx0aWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIG1vZHVsZS5leHBvcnRzID0gZG9jdW1lbnQ7XG5cdH0gZWxzZSB7XG5cdCAgICB2YXIgZG9jY3kgPSB0b3BMZXZlbFsnX19HTE9CQUxfRE9DVU1FTlRfQ0FDSEVANCddO1xuXHRcblx0ICAgIGlmICghZG9jY3kpIHtcblx0ICAgICAgICBkb2NjeSA9IHRvcExldmVsWydfX0dMT0JBTF9ET0NVTUVOVF9DQUNIRUA0J10gPSBtaW5Eb2M7XG5cdCAgICB9XG5cdFxuXHQgICAgbW9kdWxlLmV4cG9ydHMgPSBkb2NjeTtcblx0fVxuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogMjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc09iamVjdCh4KSB7XG5cdFx0cmV0dXJuIHR5cGVvZiB4ID09PSBcIm9iamVjdFwiICYmIHggIT09IG51bGw7XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDI2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KVxuXHR2YXIgaXNIb29rID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBhcHBseVByb3BlcnRpZXNcblx0XG5cdGZ1bmN0aW9uIGFwcGx5UHJvcGVydGllcyhub2RlLCBwcm9wcywgcHJldmlvdXMpIHtcblx0ICAgIGZvciAodmFyIHByb3BOYW1lIGluIHByb3BzKSB7XG5cdCAgICAgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXVxuXHRcblx0ICAgICAgICBpZiAocHJvcFZhbHVlID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgICAgcmVtb3ZlUHJvcGVydHkobm9kZSwgcHJvcE5hbWUsIHByb3BWYWx1ZSwgcHJldmlvdXMpO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoaXNIb29rKHByb3BWYWx1ZSkpIHtcblx0ICAgICAgICAgICAgcmVtb3ZlUHJvcGVydHkobm9kZSwgcHJvcE5hbWUsIHByb3BWYWx1ZSwgcHJldmlvdXMpXG5cdCAgICAgICAgICAgIGlmIChwcm9wVmFsdWUuaG9vaykge1xuXHQgICAgICAgICAgICAgICAgcHJvcFZhbHVlLmhvb2sobm9kZSxcblx0ICAgICAgICAgICAgICAgICAgICBwcm9wTmFtZSxcblx0ICAgICAgICAgICAgICAgICAgICBwcmV2aW91cyA/IHByZXZpb3VzW3Byb3BOYW1lXSA6IHVuZGVmaW5lZClcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGlmIChpc09iamVjdChwcm9wVmFsdWUpKSB7XG5cdCAgICAgICAgICAgICAgICBwYXRjaE9iamVjdChub2RlLCBwcm9wcywgcHJldmlvdXMsIHByb3BOYW1lLCBwcm9wVmFsdWUpO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgbm9kZVtwcm9wTmFtZV0gPSBwcm9wVmFsdWVcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlUHJvcGVydHkobm9kZSwgcHJvcE5hbWUsIHByb3BWYWx1ZSwgcHJldmlvdXMpIHtcblx0ICAgIGlmIChwcmV2aW91cykge1xuXHQgICAgICAgIHZhciBwcmV2aW91c1ZhbHVlID0gcHJldmlvdXNbcHJvcE5hbWVdXG5cdFxuXHQgICAgICAgIGlmICghaXNIb29rKHByZXZpb3VzVmFsdWUpKSB7XG5cdCAgICAgICAgICAgIGlmIChwcm9wTmFtZSA9PT0gXCJhdHRyaWJ1dGVzXCIpIHtcblx0ICAgICAgICAgICAgICAgIGZvciAodmFyIGF0dHJOYW1lIGluIHByZXZpb3VzVmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShhdHRyTmFtZSlcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSBlbHNlIGlmIChwcm9wTmFtZSA9PT0gXCJzdHlsZVwiKSB7XG5cdCAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIHByZXZpb3VzVmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBub2RlLnN0eWxlW2ldID0gXCJcIlxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwcmV2aW91c1ZhbHVlID09PSBcInN0cmluZ1wiKSB7XG5cdCAgICAgICAgICAgICAgICBub2RlW3Byb3BOYW1lXSA9IFwiXCJcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIG5vZGVbcHJvcE5hbWVdID0gbnVsbFxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIGlmIChwcmV2aW91c1ZhbHVlLnVuaG9vaykge1xuXHQgICAgICAgICAgICBwcmV2aW91c1ZhbHVlLnVuaG9vayhub2RlLCBwcm9wTmFtZSwgcHJvcFZhbHVlKVxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcGF0Y2hPYmplY3Qobm9kZSwgcHJvcHMsIHByZXZpb3VzLCBwcm9wTmFtZSwgcHJvcFZhbHVlKSB7XG5cdCAgICB2YXIgcHJldmlvdXNWYWx1ZSA9IHByZXZpb3VzID8gcHJldmlvdXNbcHJvcE5hbWVdIDogdW5kZWZpbmVkXG5cdFxuXHQgICAgLy8gU2V0IGF0dHJpYnV0ZXNcblx0ICAgIGlmIChwcm9wTmFtZSA9PT0gXCJhdHRyaWJ1dGVzXCIpIHtcblx0ICAgICAgICBmb3IgKHZhciBhdHRyTmFtZSBpbiBwcm9wVmFsdWUpIHtcblx0ICAgICAgICAgICAgdmFyIGF0dHJWYWx1ZSA9IHByb3BWYWx1ZVthdHRyTmFtZV1cblx0XG5cdCAgICAgICAgICAgIGlmIChhdHRyVmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoYXR0ck5hbWUpXG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShhdHRyTmFtZSwgYXR0clZhbHVlKVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm5cblx0ICAgIH1cblx0XG5cdCAgICBpZihwcmV2aW91c1ZhbHVlICYmIGlzT2JqZWN0KHByZXZpb3VzVmFsdWUpICYmXG5cdCAgICAgICAgZ2V0UHJvdG90eXBlKHByZXZpb3VzVmFsdWUpICE9PSBnZXRQcm90b3R5cGUocHJvcFZhbHVlKSkge1xuXHQgICAgICAgIG5vZGVbcHJvcE5hbWVdID0gcHJvcFZhbHVlXG5cdCAgICAgICAgcmV0dXJuXG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCFpc09iamVjdChub2RlW3Byb3BOYW1lXSkpIHtcblx0ICAgICAgICBub2RlW3Byb3BOYW1lXSA9IHt9XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHJlcGxhY2VyID0gcHJvcE5hbWUgPT09IFwic3R5bGVcIiA/IFwiXCIgOiB1bmRlZmluZWRcblx0XG5cdCAgICBmb3IgKHZhciBrIGluIHByb3BWYWx1ZSkge1xuXHQgICAgICAgIHZhciB2YWx1ZSA9IHByb3BWYWx1ZVtrXVxuXHQgICAgICAgIG5vZGVbcHJvcE5hbWVdW2tdID0gKHZhbHVlID09PSB1bmRlZmluZWQpID8gcmVwbGFjZXIgOiB2YWx1ZVxuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRQcm90b3R5cGUodmFsdWUpIHtcblx0ICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YpIHtcblx0ICAgICAgICByZXR1cm4gT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKVxuXHQgICAgfSBlbHNlIGlmICh2YWx1ZS5fX3Byb3RvX18pIHtcblx0ICAgICAgICByZXR1cm4gdmFsdWUuX19wcm90b19fXG5cdCAgICB9IGVsc2UgaWYgKHZhbHVlLmNvbnN0cnVjdG9yKSB7XG5cdCAgICAgICAgcmV0dXJuIHZhbHVlLmNvbnN0cnVjdG9yLnByb3RvdHlwZVxuXHQgICAgfVxuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDI3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KVxuXHRcblx0dmFyIGFwcGx5UHJvcGVydGllcyA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpXG5cdFxuXHR2YXIgaXNWTm9kZSA9IF9fd2VicGFja19yZXF1aXJlX18oMylcblx0dmFyIGlzVlRleHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpXG5cdHZhciBpc1dpZGdldCA9IF9fd2VicGFja19yZXF1aXJlX18oMSlcblx0dmFyIGhhbmRsZVRodW5rID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOClcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gY3JlYXRlRWxlbWVudFxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlRWxlbWVudCh2bm9kZSwgb3B0cykge1xuXHQgICAgdmFyIGRvYyA9IG9wdHMgPyBvcHRzLmRvY3VtZW50IHx8IGRvY3VtZW50IDogZG9jdW1lbnRcblx0ICAgIHZhciB3YXJuID0gb3B0cyA/IG9wdHMud2FybiA6IG51bGxcblx0XG5cdCAgICB2bm9kZSA9IGhhbmRsZVRodW5rKHZub2RlKS5hXG5cdFxuXHQgICAgaWYgKGlzV2lkZ2V0KHZub2RlKSkge1xuXHQgICAgICAgIHJldHVybiB2bm9kZS5pbml0KClcblx0ICAgIH0gZWxzZSBpZiAoaXNWVGV4dCh2bm9kZSkpIHtcblx0ICAgICAgICByZXR1cm4gZG9jLmNyZWF0ZVRleHROb2RlKHZub2RlLnRleHQpXG5cdCAgICB9IGVsc2UgaWYgKCFpc1ZOb2RlKHZub2RlKSkge1xuXHQgICAgICAgIGlmICh3YXJuKSB7XG5cdCAgICAgICAgICAgIHdhcm4oXCJJdGVtIGlzIG5vdCBhIHZhbGlkIHZpcnR1YWwgZG9tIG5vZGVcIiwgdm5vZGUpXG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBudWxsXG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIG5vZGUgPSAodm5vZGUubmFtZXNwYWNlID09PSBudWxsKSA/XG5cdCAgICAgICAgZG9jLmNyZWF0ZUVsZW1lbnQodm5vZGUudGFnTmFtZSkgOlxuXHQgICAgICAgIGRvYy5jcmVhdGVFbGVtZW50TlModm5vZGUubmFtZXNwYWNlLCB2bm9kZS50YWdOYW1lKVxuXHRcblx0ICAgIHZhciBwcm9wcyA9IHZub2RlLnByb3BlcnRpZXNcblx0ICAgIGFwcGx5UHJvcGVydGllcyhub2RlLCBwcm9wcylcblx0XG5cdCAgICB2YXIgY2hpbGRyZW4gPSB2bm9kZS5jaGlsZHJlblxuXHRcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICB2YXIgY2hpbGROb2RlID0gY3JlYXRlRWxlbWVudChjaGlsZHJlbltpXSwgb3B0cylcblx0ICAgICAgICBpZiAoY2hpbGROb2RlKSB7XG5cdCAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoY2hpbGROb2RlKVxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gbm9kZVxuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDI4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNWTm9kZSA9IF9fd2VicGFja19yZXF1aXJlX18oMylcblx0dmFyIGlzVlRleHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpXG5cdHZhciBpc1dpZGdldCA9IF9fd2VicGFja19yZXF1aXJlX18oMSlcblx0dmFyIGlzVGh1bmsgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGhhbmRsZVRodW5rXG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVUaHVuayhhLCBiKSB7XG5cdCAgICB2YXIgcmVuZGVyZWRBID0gYVxuXHQgICAgdmFyIHJlbmRlcmVkQiA9IGJcblx0XG5cdCAgICBpZiAoaXNUaHVuayhiKSkge1xuXHQgICAgICAgIHJlbmRlcmVkQiA9IHJlbmRlclRodW5rKGIsIGEpXG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGlzVGh1bmsoYSkpIHtcblx0ICAgICAgICByZW5kZXJlZEEgPSByZW5kZXJUaHVuayhhLCBudWxsKVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiB7XG5cdCAgICAgICAgYTogcmVuZGVyZWRBLFxuXHQgICAgICAgIGI6IHJlbmRlcmVkQlxuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiByZW5kZXJUaHVuayh0aHVuaywgcHJldmlvdXMpIHtcblx0ICAgIHZhciByZW5kZXJlZFRodW5rID0gdGh1bmsudm5vZGVcblx0XG5cdCAgICBpZiAoIXJlbmRlcmVkVGh1bmspIHtcblx0ICAgICAgICByZW5kZXJlZFRodW5rID0gdGh1bmsudm5vZGUgPSB0aHVuay5yZW5kZXIocHJldmlvdXMpXG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCEoaXNWTm9kZShyZW5kZXJlZFRodW5rKSB8fFxuXHQgICAgICAgICAgICBpc1ZUZXh0KHJlbmRlcmVkVGh1bmspIHx8XG5cdCAgICAgICAgICAgIGlzV2lkZ2V0KHJlbmRlcmVkVGh1bmspKSkge1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRodW5rIGRpZCBub3QgcmV0dXJuIGEgdmFsaWQgbm9kZVwiKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gcmVuZGVyZWRUaHVua1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDI5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgdmVyc2lvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMilcblx0XG5cdFZpcnR1YWxQYXRjaC5OT05FID0gMFxuXHRWaXJ0dWFsUGF0Y2guVlRFWFQgPSAxXG5cdFZpcnR1YWxQYXRjaC5WTk9ERSA9IDJcblx0VmlydHVhbFBhdGNoLldJREdFVCA9IDNcblx0VmlydHVhbFBhdGNoLlBST1BTID0gNFxuXHRWaXJ0dWFsUGF0Y2guT1JERVIgPSA1XG5cdFZpcnR1YWxQYXRjaC5JTlNFUlQgPSA2XG5cdFZpcnR1YWxQYXRjaC5SRU1PVkUgPSA3XG5cdFZpcnR1YWxQYXRjaC5USFVOSyA9IDhcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gVmlydHVhbFBhdGNoXG5cdFxuXHRmdW5jdGlvbiBWaXJ0dWFsUGF0Y2godHlwZSwgdk5vZGUsIHBhdGNoKSB7XG5cdCAgICB0aGlzLnR5cGUgPSBOdW1iZXIodHlwZSlcblx0ICAgIHRoaXMudk5vZGUgPSB2Tm9kZVxuXHQgICAgdGhpcy5wYXRjaCA9IHBhdGNoXG5cdH1cblx0XG5cdFZpcnR1YWxQYXRjaC5wcm90b3R5cGUudmVyc2lvbiA9IHZlcnNpb25cblx0VmlydHVhbFBhdGNoLnByb3RvdHlwZS50eXBlID0gXCJWaXJ0dWFsUGF0Y2hcIlxuXG5cbi8qKiovIH0sXG4vKiAzMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cdFxuXHR2YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cdHZhciBxdWV1ZSA9IFtdO1xuXHR2YXIgZHJhaW5pbmcgPSBmYWxzZTtcblx0dmFyIGN1cnJlbnRRdWV1ZTtcblx0dmFyIHF1ZXVlSW5kZXggPSAtMTtcblx0XG5cdGZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgIH1cblx0ICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBkcmFpblF1ZXVlKCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG5cdCAgICBpZiAoZHJhaW5pbmcpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcblx0ICAgIGRyYWluaW5nID0gdHJ1ZTtcblx0XG5cdCAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgd2hpbGUobGVuKSB7XG5cdCAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG5cdCAgICAgICAgcXVldWUgPSBbXTtcblx0ICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuXHQgICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcblx0ICAgIH1cblx0ICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG5cdCAgICBkcmFpbmluZyA9IGZhbHNlO1xuXHQgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHR9XG5cdFxuXHRwcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuXHQgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuXHQgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcblx0ICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG5cdCAgICAgICAgc2V0VGltZW91dChkcmFpblF1ZXVlLCAwKTtcblx0ICAgIH1cblx0fTtcblx0XG5cdC8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcblx0ZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG5cdCAgICB0aGlzLmZ1biA9IGZ1bjtcblx0ICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcblx0fVxuXHRJdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcblx0fTtcblx0cHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcblx0cHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcblx0cHJvY2Vzcy5lbnYgPSB7fTtcblx0cHJvY2Vzcy5hcmd2ID0gW107XG5cdHByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xuXHRwcm9jZXNzLnZlcnNpb25zID0ge307XG5cdFxuXHRmdW5jdGlvbiBub29wKCkge31cblx0XG5cdHByb2Nlc3Mub24gPSBub29wO1xuXHRwcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5vbmNlID0gbm9vcDtcblx0cHJvY2Vzcy5vZmYgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xuXHRwcm9jZXNzLmVtaXQgPSBub29wO1xuXHRcblx0cHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcblx0fTtcblx0XG5cdC8vIFRPRE8oc2h0eWxtYW4pXG5cdHByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5cdHByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xuXHR9O1xuXHRwcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuXG5cbi8qKiovIH0sXG4vKiAzMSAqLyxcbi8qIDMyICovLFxuLyogMzMgKi8sXG4vKiAzNCAqLyxcbi8qIDM1ICovLFxuLyogMzYgKi8sXG4vKiAzNyAqLyxcbi8qIDM4ICovLFxuLyogMzkgKi8sXG4vKiA0MCAqLyxcbi8qIDQxICovLFxuLyogNDIgKi8sXG4vKiA0MyAqLyxcbi8qIDQ0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgcmFmID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSlcblx0dmFyIFR5cGVkRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KVxuXHRcblx0dmFyIEludmFsaWRVcGRhdGVJblJlbmRlciA9IFR5cGVkRXJyb3Ioe1xuXHQgICAgdHlwZTogXCJtYWluLWxvb3AuaW52YWxpZC51cGRhdGUuaW4tcmVuZGVyXCIsXG5cdCAgICBtZXNzYWdlOiBcIm1haW4tbG9vcDogVW5leHBlY3RlZCB1cGRhdGUgb2NjdXJyZWQgaW4gbG9vcC5cXG5cIiArXG5cdCAgICAgICAgXCJXZSBhcmUgY3VycmVudGx5IHJlbmRlcmluZyBhIHZpZXcsIFwiICtcblx0ICAgICAgICAgICAgXCJ5b3UgY2FuJ3QgY2hhbmdlIHN0YXRlIHJpZ2h0IG5vdy5cXG5cIiArXG5cdCAgICAgICAgXCJUaGUgZGlmZiBpczoge3N0cmluZ0RpZmZ9LlxcblwiICtcblx0ICAgICAgICBcIlNVR0dFU1RFRCBGSVg6IGZpbmQgdGhlIHN0YXRlIG11dGF0aW9uIGluIHlvdXIgdmlldyBcIiArXG5cdCAgICAgICAgICAgIFwib3IgcmVuZGVyaW5nIGZ1bmN0aW9uIGFuZCByZW1vdmUgaXQuXFxuXCIgK1xuXHQgICAgICAgIFwiVGhlIHZpZXcgc2hvdWxkIG5vdCBoYXZlIGFueSBzaWRlIGVmZmVjdHMuXFxuXCIsXG5cdCAgICBkaWZmOiBudWxsLFxuXHQgICAgc3RyaW5nRGlmZjogbnVsbFxuXHR9KVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBtYWluXG5cdFxuXHRmdW5jdGlvbiBtYWluKGluaXRpYWxTdGF0ZSwgdmlldywgb3B0cykge1xuXHQgICAgb3B0cyA9IG9wdHMgfHwge31cblx0XG5cdCAgICB2YXIgY3VycmVudFN0YXRlID0gaW5pdGlhbFN0YXRlXG5cdCAgICB2YXIgY3JlYXRlID0gb3B0cy5jcmVhdGVcblx0ICAgIHZhciBkaWZmID0gb3B0cy5kaWZmXG5cdCAgICB2YXIgcGF0Y2ggPSBvcHRzLnBhdGNoXG5cdCAgICB2YXIgcmVkcmF3U2NoZWR1bGVkID0gZmFsc2Vcblx0XG5cdCAgICB2YXIgdHJlZSA9IG9wdHMuaW5pdGlhbFRyZWUgfHwgdmlldyhjdXJyZW50U3RhdGUpXG5cdCAgICB2YXIgdGFyZ2V0ID0gb3B0cy50YXJnZXQgfHwgY3JlYXRlKHRyZWUsIG9wdHMpXG5cdCAgICB2YXIgaW5SZW5kZXJpbmdUcmFuc2FjdGlvbiA9IGZhbHNlXG5cdFxuXHQgICAgY3VycmVudFN0YXRlID0gbnVsbFxuXHRcblx0ICAgIHJldHVybiB7XG5cdCAgICAgICAgdGFyZ2V0OiB0YXJnZXQsXG5cdCAgICAgICAgdXBkYXRlOiB1cGRhdGVcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiB1cGRhdGUoc3RhdGUpIHtcblx0ICAgICAgICBpZiAoaW5SZW5kZXJpbmdUcmFuc2FjdGlvbikge1xuXHQgICAgICAgICAgICB0aHJvdyBJbnZhbGlkVXBkYXRlSW5SZW5kZXIoe1xuXHQgICAgICAgICAgICAgICAgZGlmZjogc3RhdGUuX2RpZmYsXG5cdCAgICAgICAgICAgICAgICBzdHJpbmdEaWZmOiBKU09OLnN0cmluZ2lmeShzdGF0ZS5fZGlmZilcblx0ICAgICAgICAgICAgfSlcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IG51bGwgJiYgIXJlZHJhd1NjaGVkdWxlZCkge1xuXHQgICAgICAgICAgICByZWRyYXdTY2hlZHVsZWQgPSB0cnVlXG5cdCAgICAgICAgICAgIHJhZihyZWRyYXcpXG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBjdXJyZW50U3RhdGUgPSBzdGF0ZVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIHJlZHJhdygpIHtcblx0ICAgICAgICByZWRyYXdTY2hlZHVsZWQgPSBmYWxzZTtcblx0ICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSBudWxsKSB7XG5cdCAgICAgICAgICAgIHJldHVyblxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaW5SZW5kZXJpbmdUcmFuc2FjdGlvbiA9IHRydWVcblx0ICAgICAgICB2YXIgbmV3VHJlZSA9IHZpZXcoY3VycmVudFN0YXRlKVxuXHRcblx0ICAgICAgICBpZiAob3B0cy5jcmVhdGVPbmx5KSB7XG5cdCAgICAgICAgICAgIGluUmVuZGVyaW5nVHJhbnNhY3Rpb24gPSBmYWxzZVxuXHQgICAgICAgICAgICBjcmVhdGUobmV3VHJlZSwgb3B0cylcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB2YXIgcGF0Y2hlcyA9IGRpZmYodHJlZSwgbmV3VHJlZSwgb3B0cylcblx0ICAgICAgICAgICAgaW5SZW5kZXJpbmdUcmFuc2FjdGlvbiA9IGZhbHNlXG5cdCAgICAgICAgICAgIHRhcmdldCA9IHBhdGNoKHRhcmdldCwgcGF0Y2hlcywgb3B0cylcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHRyZWUgPSBuZXdUcmVlXG5cdCAgICAgICAgY3VycmVudFN0YXRlID0gbnVsbFxuXHQgICAgfVxuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDQ1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgaWYgKHR5cGVvZiBvYmogPT09ICdzdHJpbmcnKSByZXR1cm4gY2FtZWxDYXNlKG9iaik7XG5cdCAgICByZXR1cm4gd2FsayhvYmopO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gd2FsayAob2JqKSB7XG5cdCAgICBpZiAoIW9iaiB8fCB0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JykgcmV0dXJuIG9iajtcblx0ICAgIGlmIChpc0RhdGUob2JqKSB8fCBpc1JlZ2V4KG9iaikpIHJldHVybiBvYmo7XG5cdCAgICBpZiAoaXNBcnJheShvYmopKSByZXR1cm4gbWFwKG9iaiwgd2Fsayk7XG5cdCAgICByZXR1cm4gcmVkdWNlKG9iamVjdEtleXMob2JqKSwgZnVuY3Rpb24gKGFjYywga2V5KSB7XG5cdCAgICAgICAgdmFyIGNhbWVsID0gY2FtZWxDYXNlKGtleSk7XG5cdCAgICAgICAgYWNjW2NhbWVsXSA9IHdhbGsob2JqW2tleV0pO1xuXHQgICAgICAgIHJldHVybiBhY2M7XG5cdCAgICB9LCB7fSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNhbWVsQ2FzZShzdHIpIHtcblx0ICAgIHJldHVybiBzdHIucmVwbGFjZSgvW18uLV0oXFx3fCQpL2csIGZ1bmN0aW9uIChfLHgpIHtcblx0ICAgICAgICByZXR1cm4geC50b1VwcGVyQ2FzZSgpO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdHZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAob2JqKSB7XG5cdCAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEFycmF5XSc7XG5cdH07XG5cdFxuXHR2YXIgaXNEYXRlID0gZnVuY3Rpb24gKG9iaikge1xuXHQgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBEYXRlXSc7XG5cdH07XG5cdFxuXHR2YXIgaXNSZWdleCA9IGZ1bmN0aW9uIChvYmopIHtcblx0ICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7XG5cdH07XG5cdFxuXHR2YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblx0dmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiAob2JqKSB7XG5cdCAgICB2YXIga2V5cyA9IFtdO1xuXHQgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuXHQgICAgICAgIGlmIChoYXMuY2FsbChvYmosIGtleSkpIGtleXMucHVzaChrZXkpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGtleXM7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBtYXAgKHhzLCBmKSB7XG5cdCAgICBpZiAoeHMubWFwKSByZXR1cm4geHMubWFwKGYpO1xuXHQgICAgdmFyIHJlcyA9IFtdO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIHJlcy5wdXNoKGYoeHNbaV0sIGkpKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlZHVjZSAoeHMsIGYsIGFjYykge1xuXHQgICAgaWYgKHhzLnJlZHVjZSkgcmV0dXJuIHhzLnJlZHVjZShmLCBhY2MpO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGFjYyA9IGYoYWNjLCB4c1tpXSwgaSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gYWNjO1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDQ2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHR2YXIgbmFyZ3MgPSAvXFx7KFswLTlhLXpBLVpdKylcXH0vZ1xuXHR2YXIgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2Vcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gdGVtcGxhdGVcblx0XG5cdGZ1bmN0aW9uIHRlbXBsYXRlKHN0cmluZykge1xuXHQgICAgdmFyIGFyZ3Ncblx0XG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMiAmJiB0eXBlb2YgYXJndW1lbnRzWzFdID09PSBcIm9iamVjdFwiKSB7XG5cdCAgICAgICAgYXJncyA9IGFyZ3VtZW50c1sxXVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpXG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCFhcmdzIHx8ICFhcmdzLmhhc093blByb3BlcnR5KSB7XG5cdCAgICAgICAgYXJncyA9IHt9XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKG5hcmdzLCBmdW5jdGlvbiByZXBsYWNlQXJnKG1hdGNoLCBpLCBpbmRleCkge1xuXHQgICAgICAgIHZhciByZXN1bHRcblx0XG5cdCAgICAgICAgaWYgKHN0cmluZ1tpbmRleCAtIDFdID09PSBcIntcIiAmJlxuXHQgICAgICAgICAgICBzdHJpbmdbaW5kZXggKyBtYXRjaC5sZW5ndGhdID09PSBcIn1cIikge1xuXHQgICAgICAgICAgICByZXR1cm4gaVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHJlc3VsdCA9IGFyZ3MuaGFzT3duUHJvcGVydHkoaSkgPyBhcmdzW2ldIDogbnVsbFxuXHQgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBudWxsIHx8IHJlc3VsdCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gXCJcIlxuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gcmVzdWx0XG5cdCAgICAgICAgfVxuXHQgICAgfSlcblx0fVxuXG5cbi8qKiovIH0sXG4vKiA0NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBleHRlbmRcblx0XG5cdGZ1bmN0aW9uIGV4dGVuZCh0YXJnZXQpIHtcblx0ICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXVxuXHRcblx0ICAgICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG5cdCAgICAgICAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHQgICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiB0YXJnZXRcblx0fVxuXG5cbi8qKiovIH0sXG4vKiA0OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGNhbWVsaXplID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSlcblx0dmFyIHRlbXBsYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nilcblx0dmFyIGV4dGVuZCA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFR5cGVkRXJyb3Jcblx0XG5cdGZ1bmN0aW9uIFR5cGVkRXJyb3IoYXJncykge1xuXHQgICAgaWYgKCFhcmdzKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYXJncyBpcyByZXF1aXJlZFwiKTtcblx0ICAgIH1cblx0ICAgIGlmICghYXJncy50eXBlKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYXJncy50eXBlIGlzIHJlcXVpcmVkXCIpO1xuXHQgICAgfVxuXHQgICAgaWYgKCFhcmdzLm1lc3NhZ2UpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJhcmdzLm1lc3NhZ2UgaXMgcmVxdWlyZWRcIik7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIG1lc3NhZ2UgPSBhcmdzLm1lc3NhZ2Vcblx0XG5cdCAgICBpZiAoYXJncy50eXBlICYmICFhcmdzLm5hbWUpIHtcblx0ICAgICAgICB2YXIgZXJyb3JOYW1lID0gY2FtZWxpemUoYXJncy50eXBlKSArIFwiRXJyb3JcIlxuXHQgICAgICAgIGFyZ3MubmFtZSA9IGVycm9yTmFtZVswXS50b1VwcGVyQ2FzZSgpICsgZXJyb3JOYW1lLnN1YnN0cigxKVxuXHQgICAgfVxuXHRcblx0ICAgIGV4dGVuZChjcmVhdGVFcnJvciwgYXJncyk7XG5cdCAgICBjcmVhdGVFcnJvci5fbmFtZSA9IGFyZ3MubmFtZTtcblx0XG5cdCAgICByZXR1cm4gY3JlYXRlRXJyb3I7XG5cdFxuXHQgICAgZnVuY3Rpb24gY3JlYXRlRXJyb3Iob3B0cykge1xuXHQgICAgICAgIHZhciByZXN1bHQgPSBuZXcgRXJyb3IoKVxuXHRcblx0ICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocmVzdWx0LCBcInR5cGVcIiwge1xuXHQgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnR5cGUsXG5cdCAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICAgICAgICB9KVxuXHRcblx0ICAgICAgICB2YXIgb3B0aW9ucyA9IGV4dGVuZCh7fSwgYXJncywgb3B0cylcblx0XG5cdCAgICAgICAgZXh0ZW5kKHJlc3VsdCwgb3B0aW9ucylcblx0ICAgICAgICByZXN1bHQubWVzc2FnZSA9IHRlbXBsYXRlKG1lc3NhZ2UsIG9wdGlvbnMpXG5cdFxuXHQgICAgICAgIHJldHVybiByZXN1bHRcblx0ICAgIH1cblx0fVxuXHRcblxuXG4vKioqLyB9LFxuLyogNDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBub3cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgICwgZ2xvYmFsID0gdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgPyB7fSA6IHdpbmRvd1xuXHQgICwgdmVuZG9ycyA9IFsnbW96JywgJ3dlYmtpdCddXG5cdCAgLCBzdWZmaXggPSAnQW5pbWF0aW9uRnJhbWUnXG5cdCAgLCByYWYgPSBnbG9iYWxbJ3JlcXVlc3QnICsgc3VmZml4XVxuXHQgICwgY2FmID0gZ2xvYmFsWydjYW5jZWwnICsgc3VmZml4XSB8fCBnbG9iYWxbJ2NhbmNlbFJlcXVlc3QnICsgc3VmZml4XVxuXHQgICwgaXNOYXRpdmUgPSB0cnVlXG5cdFxuXHRmb3IodmFyIGkgPSAwOyBpIDwgdmVuZG9ycy5sZW5ndGggJiYgIXJhZjsgaSsrKSB7XG5cdCAgcmFmID0gZ2xvYmFsW3ZlbmRvcnNbaV0gKyAnUmVxdWVzdCcgKyBzdWZmaXhdXG5cdCAgY2FmID0gZ2xvYmFsW3ZlbmRvcnNbaV0gKyAnQ2FuY2VsJyArIHN1ZmZpeF1cblx0ICAgICAgfHwgZ2xvYmFsW3ZlbmRvcnNbaV0gKyAnQ2FuY2VsUmVxdWVzdCcgKyBzdWZmaXhdXG5cdH1cblx0XG5cdC8vIFNvbWUgdmVyc2lvbnMgb2YgRkYgaGF2ZSByQUYgYnV0IG5vdCBjQUZcblx0aWYoIXJhZiB8fCAhY2FmKSB7XG5cdCAgaXNOYXRpdmUgPSBmYWxzZVxuXHRcblx0ICB2YXIgbGFzdCA9IDBcblx0ICAgICwgaWQgPSAwXG5cdCAgICAsIHF1ZXVlID0gW11cblx0ICAgICwgZnJhbWVEdXJhdGlvbiA9IDEwMDAgLyA2MFxuXHRcblx0ICByYWYgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuXHQgICAgaWYocXVldWUubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgIHZhciBfbm93ID0gbm93KClcblx0ICAgICAgICAsIG5leHQgPSBNYXRoLm1heCgwLCBmcmFtZUR1cmF0aW9uIC0gKF9ub3cgLSBsYXN0KSlcblx0ICAgICAgbGFzdCA9IG5leHQgKyBfbm93XG5cdCAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIGNwID0gcXVldWUuc2xpY2UoMClcblx0ICAgICAgICAvLyBDbGVhciBxdWV1ZSBoZXJlIHRvIHByZXZlbnRcblx0ICAgICAgICAvLyBjYWxsYmFja3MgZnJvbSBhcHBlbmRpbmcgbGlzdGVuZXJzXG5cdCAgICAgICAgLy8gdG8gdGhlIGN1cnJlbnQgZnJhbWUncyBxdWV1ZVxuXHQgICAgICAgIHF1ZXVlLmxlbmd0aCA9IDBcblx0ICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgY3AubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgIGlmKCFjcFtpXS5jYW5jZWxsZWQpIHtcblx0ICAgICAgICAgICAgdHJ5e1xuXHQgICAgICAgICAgICAgIGNwW2ldLmNhbGxiYWNrKGxhc3QpXG5cdCAgICAgICAgICAgIH0gY2F0Y2goZSkge1xuXHQgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IHRocm93IGUgfSwgMClcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSwgTWF0aC5yb3VuZChuZXh0KSlcblx0ICAgIH1cblx0ICAgIHF1ZXVlLnB1c2goe1xuXHQgICAgICBoYW5kbGU6ICsraWQsXG5cdCAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcblx0ICAgICAgY2FuY2VsbGVkOiBmYWxzZVxuXHQgICAgfSlcblx0ICAgIHJldHVybiBpZFxuXHQgIH1cblx0XG5cdCAgY2FmID0gZnVuY3Rpb24oaGFuZGxlKSB7XG5cdCAgICBmb3IodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgaWYocXVldWVbaV0uaGFuZGxlID09PSBoYW5kbGUpIHtcblx0ICAgICAgICBxdWV1ZVtpXS5jYW5jZWxsZWQgPSB0cnVlXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZm4pIHtcblx0ICAvLyBXcmFwIGluIGEgbmV3IGZ1bmN0aW9uIHRvIHByZXZlbnRcblx0ICAvLyBgY2FuY2VsYCBwb3RlbnRpYWxseSBiZWluZyBhc3NpZ25lZFxuXHQgIC8vIHRvIHRoZSBuYXRpdmUgckFGIGZ1bmN0aW9uXG5cdCAgaWYoIWlzTmF0aXZlKSB7XG5cdCAgICByZXR1cm4gcmFmLmNhbGwoZ2xvYmFsLCBmbilcblx0ICB9XG5cdCAgcmV0dXJuIHJhZi5jYWxsKGdsb2JhbCwgZnVuY3Rpb24oKSB7XG5cdCAgICB0cnl7XG5cdCAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcblx0ICAgIH0gY2F0Y2goZSkge1xuXHQgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyB0aHJvdyBlIH0sIDApXG5cdCAgICB9XG5cdCAgfSlcblx0fVxuXHRtb2R1bGUuZXhwb3J0cy5jYW5jZWwgPSBmdW5jdGlvbigpIHtcblx0ICBjYWYuYXBwbHkoZ2xvYmFsLCBhcmd1bWVudHMpXG5cdH1cblxuXG4vKioqLyB9LFxuLyogNTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7Ly8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjYuM1xuXHQoZnVuY3Rpb24oKSB7XG5cdCAgdmFyIGdldE5hbm9TZWNvbmRzLCBocnRpbWUsIGxvYWRUaW1lO1xuXHRcblx0ICBpZiAoKHR5cGVvZiBwZXJmb3JtYW5jZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwZXJmb3JtYW5jZSAhPT0gbnVsbCkgJiYgcGVyZm9ybWFuY2Uubm93KSB7XG5cdCAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gcGVyZm9ybWFuY2Uubm93KCk7XG5cdCAgICB9O1xuXHQgIH0gZWxzZSBpZiAoKHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmIHByb2Nlc3MgIT09IG51bGwpICYmIHByb2Nlc3MuaHJ0aW1lKSB7XG5cdCAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gKGdldE5hbm9TZWNvbmRzKCkgLSBsb2FkVGltZSkgLyAxZTY7XG5cdCAgICB9O1xuXHQgICAgaHJ0aW1lID0gcHJvY2Vzcy5ocnRpbWU7XG5cdCAgICBnZXROYW5vU2Vjb25kcyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgaHI7XG5cdCAgICAgIGhyID0gaHJ0aW1lKCk7XG5cdCAgICAgIHJldHVybiBoclswXSAqIDFlOSArIGhyWzFdO1xuXHQgICAgfTtcblx0ICAgIGxvYWRUaW1lID0gZ2V0TmFub1NlY29uZHMoKTtcblx0ICB9IGVsc2UgaWYgKERhdGUubm93KSB7XG5cdCAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gRGF0ZS5ub3coKSAtIGxvYWRUaW1lO1xuXHQgICAgfTtcblx0ICAgIGxvYWRUaW1lID0gRGF0ZS5ub3coKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gbG9hZFRpbWU7XG5cdCAgICB9O1xuXHQgICAgbG9hZFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0ICB9XG5cdFxuXHR9KS5jYWxsKHRoaXMpO1xuXHRcblx0Lypcblx0Ly9AIHNvdXJjZU1hcHBpbmdVUkw9cGVyZm9ybWFuY2Utbm93Lm1hcFxuXHQqL1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMzApKSlcblxuLyoqKi8gfSxcbi8qIDUxICovLFxuLyogNTIgKi8sXG4vKiA1MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGNyZWF0ZUVsZW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVFbGVtZW50XG5cblxuLyoqKi8gfSxcbi8qIDU0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZGlmZiA9IF9fd2VicGFja19yZXF1aXJlX18oNjEpXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGRpZmZcblxuXG4vKioqLyB9LFxuLyogNTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBwYXRjaCA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHBhdGNoXG5cblxuLyoqKi8gfSxcbi8qIDU2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvLyBNYXBzIGEgdmlydHVhbCBET00gdHJlZSBvbnRvIGEgcmVhbCBET00gdHJlZSBpbiBhbiBlZmZpY2llbnQgbWFubmVyLlxuXHQvLyBXZSBkb24ndCB3YW50IHRvIHJlYWQgYWxsIG9mIHRoZSBET00gbm9kZXMgaW4gdGhlIHRyZWUgc28gd2UgdXNlXG5cdC8vIHRoZSBpbi1vcmRlciB0cmVlIGluZGV4aW5nIHRvIGVsaW1pbmF0ZSByZWN1cnNpb24gZG93biBjZXJ0YWluIGJyYW5jaGVzLlxuXHQvLyBXZSBvbmx5IHJlY3Vyc2UgaW50byBhIERPTSBub2RlIGlmIHdlIGtub3cgdGhhdCBpdCBjb250YWlucyBhIGNoaWxkIG9mXG5cdC8vIGludGVyZXN0LlxuXHRcblx0dmFyIG5vQ2hpbGQgPSB7fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBkb21JbmRleFxuXHRcblx0ZnVuY3Rpb24gZG9tSW5kZXgocm9vdE5vZGUsIHRyZWUsIGluZGljZXMsIG5vZGVzKSB7XG5cdCAgICBpZiAoIWluZGljZXMgfHwgaW5kaWNlcy5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICByZXR1cm4ge31cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgaW5kaWNlcy5zb3J0KGFzY2VuZGluZylcblx0ICAgICAgICByZXR1cm4gcmVjdXJzZShyb290Tm9kZSwgdHJlZSwgaW5kaWNlcywgbm9kZXMsIDApXG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlY3Vyc2Uocm9vdE5vZGUsIHRyZWUsIGluZGljZXMsIG5vZGVzLCByb290SW5kZXgpIHtcblx0ICAgIG5vZGVzID0gbm9kZXMgfHwge31cblx0XG5cdFxuXHQgICAgaWYgKHJvb3ROb2RlKSB7XG5cdCAgICAgICAgaWYgKGluZGV4SW5SYW5nZShpbmRpY2VzLCByb290SW5kZXgsIHJvb3RJbmRleCkpIHtcblx0ICAgICAgICAgICAgbm9kZXNbcm9vdEluZGV4XSA9IHJvb3ROb2RlXG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgdkNoaWxkcmVuID0gdHJlZS5jaGlsZHJlblxuXHRcblx0ICAgICAgICBpZiAodkNoaWxkcmVuKSB7XG5cdFxuXHQgICAgICAgICAgICB2YXIgY2hpbGROb2RlcyA9IHJvb3ROb2RlLmNoaWxkTm9kZXNcblx0XG5cdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJlZS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgcm9vdEluZGV4ICs9IDFcblx0XG5cdCAgICAgICAgICAgICAgICB2YXIgdkNoaWxkID0gdkNoaWxkcmVuW2ldIHx8IG5vQ2hpbGRcblx0ICAgICAgICAgICAgICAgIHZhciBuZXh0SW5kZXggPSByb290SW5kZXggKyAodkNoaWxkLmNvdW50IHx8IDApXG5cdFxuXHQgICAgICAgICAgICAgICAgLy8gc2tpcCByZWN1cnNpb24gZG93biB0aGUgdHJlZSBpZiB0aGVyZSBhcmUgbm8gbm9kZXMgZG93biBoZXJlXG5cdCAgICAgICAgICAgICAgICBpZiAoaW5kZXhJblJhbmdlKGluZGljZXMsIHJvb3RJbmRleCwgbmV4dEluZGV4KSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJlY3Vyc2UoY2hpbGROb2Rlc1tpXSwgdkNoaWxkLCBpbmRpY2VzLCBub2Rlcywgcm9vdEluZGV4KVxuXHQgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICAgIHJvb3RJbmRleCA9IG5leHRJbmRleFxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBub2Rlc1xuXHR9XG5cdFxuXHQvLyBCaW5hcnkgc2VhcmNoIGZvciBhbiBpbmRleCBpbiB0aGUgaW50ZXJ2YWwgW2xlZnQsIHJpZ2h0XVxuXHRmdW5jdGlvbiBpbmRleEluUmFuZ2UoaW5kaWNlcywgbGVmdCwgcmlnaHQpIHtcblx0ICAgIGlmIChpbmRpY2VzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgIHJldHVybiBmYWxzZVxuXHQgICAgfVxuXHRcblx0ICAgIHZhciBtaW5JbmRleCA9IDBcblx0ICAgIHZhciBtYXhJbmRleCA9IGluZGljZXMubGVuZ3RoIC0gMVxuXHQgICAgdmFyIGN1cnJlbnRJbmRleFxuXHQgICAgdmFyIGN1cnJlbnRJdGVtXG5cdFxuXHQgICAgd2hpbGUgKG1pbkluZGV4IDw9IG1heEluZGV4KSB7XG5cdCAgICAgICAgY3VycmVudEluZGV4ID0gKChtYXhJbmRleCArIG1pbkluZGV4KSAvIDIpID4+IDBcblx0ICAgICAgICBjdXJyZW50SXRlbSA9IGluZGljZXNbY3VycmVudEluZGV4XVxuXHRcblx0ICAgICAgICBpZiAobWluSW5kZXggPT09IG1heEluZGV4KSB7XG5cdCAgICAgICAgICAgIHJldHVybiBjdXJyZW50SXRlbSA+PSBsZWZ0ICYmIGN1cnJlbnRJdGVtIDw9IHJpZ2h0XG5cdCAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50SXRlbSA8IGxlZnQpIHtcblx0ICAgICAgICAgICAgbWluSW5kZXggPSBjdXJyZW50SW5kZXggKyAxXG5cdCAgICAgICAgfSBlbHNlICBpZiAoY3VycmVudEl0ZW0gPiByaWdodCkge1xuXHQgICAgICAgICAgICBtYXhJbmRleCA9IGN1cnJlbnRJbmRleCAtIDFcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFzY2VuZGluZyhhLCBiKSB7XG5cdCAgICByZXR1cm4gYSA+IGIgPyAxIDogLTFcblx0fVxuXG5cbi8qKiovIH0sXG4vKiA1NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGFwcGx5UHJvcGVydGllcyA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpXG5cdFxuXHR2YXIgaXNXaWRnZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpXG5cdHZhciBWUGF0Y2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KVxuXHRcblx0dmFyIHVwZGF0ZVdpZGdldCA9IF9fd2VicGFja19yZXF1aXJlX18oNTkpXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGFwcGx5UGF0Y2hcblx0XG5cdGZ1bmN0aW9uIGFwcGx5UGF0Y2godnBhdGNoLCBkb21Ob2RlLCByZW5kZXJPcHRpb25zKSB7XG5cdCAgICB2YXIgdHlwZSA9IHZwYXRjaC50eXBlXG5cdCAgICB2YXIgdk5vZGUgPSB2cGF0Y2gudk5vZGVcblx0ICAgIHZhciBwYXRjaCA9IHZwYXRjaC5wYXRjaFxuXHRcblx0ICAgIHN3aXRjaCAodHlwZSkge1xuXHQgICAgICAgIGNhc2UgVlBhdGNoLlJFTU9WRTpcblx0ICAgICAgICAgICAgcmV0dXJuIHJlbW92ZU5vZGUoZG9tTm9kZSwgdk5vZGUpXG5cdCAgICAgICAgY2FzZSBWUGF0Y2guSU5TRVJUOlxuXHQgICAgICAgICAgICByZXR1cm4gaW5zZXJ0Tm9kZShkb21Ob2RlLCBwYXRjaCwgcmVuZGVyT3B0aW9ucylcblx0ICAgICAgICBjYXNlIFZQYXRjaC5WVEVYVDpcblx0ICAgICAgICAgICAgcmV0dXJuIHN0cmluZ1BhdGNoKGRvbU5vZGUsIHZOb2RlLCBwYXRjaCwgcmVuZGVyT3B0aW9ucylcblx0ICAgICAgICBjYXNlIFZQYXRjaC5XSURHRVQ6XG5cdCAgICAgICAgICAgIHJldHVybiB3aWRnZXRQYXRjaChkb21Ob2RlLCB2Tm9kZSwgcGF0Y2gsIHJlbmRlck9wdGlvbnMpXG5cdCAgICAgICAgY2FzZSBWUGF0Y2guVk5PREU6XG5cdCAgICAgICAgICAgIHJldHVybiB2Tm9kZVBhdGNoKGRvbU5vZGUsIHZOb2RlLCBwYXRjaCwgcmVuZGVyT3B0aW9ucylcblx0ICAgICAgICBjYXNlIFZQYXRjaC5PUkRFUjpcblx0ICAgICAgICAgICAgcmVvcmRlckNoaWxkcmVuKGRvbU5vZGUsIHBhdGNoKVxuXHQgICAgICAgICAgICByZXR1cm4gZG9tTm9kZVxuXHQgICAgICAgIGNhc2UgVlBhdGNoLlBST1BTOlxuXHQgICAgICAgICAgICBhcHBseVByb3BlcnRpZXMoZG9tTm9kZSwgcGF0Y2gsIHZOb2RlLnByb3BlcnRpZXMpXG5cdCAgICAgICAgICAgIHJldHVybiBkb21Ob2RlXG5cdCAgICAgICAgY2FzZSBWUGF0Y2guVEhVTks6XG5cdCAgICAgICAgICAgIHJldHVybiByZXBsYWNlUm9vdChkb21Ob2RlLFxuXHQgICAgICAgICAgICAgICAgcmVuZGVyT3B0aW9ucy5wYXRjaChkb21Ob2RlLCBwYXRjaCwgcmVuZGVyT3B0aW9ucykpXG5cdCAgICAgICAgZGVmYXVsdDpcblx0ICAgICAgICAgICAgcmV0dXJuIGRvbU5vZGVcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlTm9kZShkb21Ob2RlLCB2Tm9kZSkge1xuXHQgICAgdmFyIHBhcmVudE5vZGUgPSBkb21Ob2RlLnBhcmVudE5vZGVcblx0XG5cdCAgICBpZiAocGFyZW50Tm9kZSkge1xuXHQgICAgICAgIHBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZG9tTm9kZSlcblx0ICAgIH1cblx0XG5cdCAgICBkZXN0cm95V2lkZ2V0KGRvbU5vZGUsIHZOb2RlKTtcblx0XG5cdCAgICByZXR1cm4gbnVsbFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbnNlcnROb2RlKHBhcmVudE5vZGUsIHZOb2RlLCByZW5kZXJPcHRpb25zKSB7XG5cdCAgICB2YXIgbmV3Tm9kZSA9IHJlbmRlck9wdGlvbnMucmVuZGVyKHZOb2RlLCByZW5kZXJPcHRpb25zKVxuXHRcblx0ICAgIGlmIChwYXJlbnROb2RlKSB7XG5cdCAgICAgICAgcGFyZW50Tm9kZS5hcHBlbmRDaGlsZChuZXdOb2RlKVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBwYXJlbnROb2RlXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHN0cmluZ1BhdGNoKGRvbU5vZGUsIGxlZnRWTm9kZSwgdlRleHQsIHJlbmRlck9wdGlvbnMpIHtcblx0ICAgIHZhciBuZXdOb2RlXG5cdFxuXHQgICAgaWYgKGRvbU5vZGUubm9kZVR5cGUgPT09IDMpIHtcblx0ICAgICAgICBkb21Ob2RlLnJlcGxhY2VEYXRhKDAsIGRvbU5vZGUubGVuZ3RoLCB2VGV4dC50ZXh0KVxuXHQgICAgICAgIG5ld05vZGUgPSBkb21Ob2RlXG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHZhciBwYXJlbnROb2RlID0gZG9tTm9kZS5wYXJlbnROb2RlXG5cdCAgICAgICAgbmV3Tm9kZSA9IHJlbmRlck9wdGlvbnMucmVuZGVyKHZUZXh0LCByZW5kZXJPcHRpb25zKVxuXHRcblx0ICAgICAgICBpZiAocGFyZW50Tm9kZSAmJiBuZXdOb2RlICE9PSBkb21Ob2RlKSB7XG5cdCAgICAgICAgICAgIHBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld05vZGUsIGRvbU5vZGUpXG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBuZXdOb2RlXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdpZGdldFBhdGNoKGRvbU5vZGUsIGxlZnRWTm9kZSwgd2lkZ2V0LCByZW5kZXJPcHRpb25zKSB7XG5cdCAgICB2YXIgdXBkYXRpbmcgPSB1cGRhdGVXaWRnZXQobGVmdFZOb2RlLCB3aWRnZXQpXG5cdCAgICB2YXIgbmV3Tm9kZVxuXHRcblx0ICAgIGlmICh1cGRhdGluZykge1xuXHQgICAgICAgIG5ld05vZGUgPSB3aWRnZXQudXBkYXRlKGxlZnRWTm9kZSwgZG9tTm9kZSkgfHwgZG9tTm9kZVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBuZXdOb2RlID0gcmVuZGVyT3B0aW9ucy5yZW5kZXIod2lkZ2V0LCByZW5kZXJPcHRpb25zKVxuXHQgICAgfVxuXHRcblx0ICAgIHZhciBwYXJlbnROb2RlID0gZG9tTm9kZS5wYXJlbnROb2RlXG5cdFxuXHQgICAgaWYgKHBhcmVudE5vZGUgJiYgbmV3Tm9kZSAhPT0gZG9tTm9kZSkge1xuXHQgICAgICAgIHBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld05vZGUsIGRvbU5vZGUpXG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCF1cGRhdGluZykge1xuXHQgICAgICAgIGRlc3Ryb3lXaWRnZXQoZG9tTm9kZSwgbGVmdFZOb2RlKVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBuZXdOb2RlXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHZOb2RlUGF0Y2goZG9tTm9kZSwgbGVmdFZOb2RlLCB2Tm9kZSwgcmVuZGVyT3B0aW9ucykge1xuXHQgICAgdmFyIHBhcmVudE5vZGUgPSBkb21Ob2RlLnBhcmVudE5vZGVcblx0ICAgIHZhciBuZXdOb2RlID0gcmVuZGVyT3B0aW9ucy5yZW5kZXIodk5vZGUsIHJlbmRlck9wdGlvbnMpXG5cdFxuXHQgICAgaWYgKHBhcmVudE5vZGUgJiYgbmV3Tm9kZSAhPT0gZG9tTm9kZSkge1xuXHQgICAgICAgIHBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld05vZGUsIGRvbU5vZGUpXG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIG5ld05vZGVcblx0fVxuXHRcblx0ZnVuY3Rpb24gZGVzdHJveVdpZGdldChkb21Ob2RlLCB3KSB7XG5cdCAgICBpZiAodHlwZW9mIHcuZGVzdHJveSA9PT0gXCJmdW5jdGlvblwiICYmIGlzV2lkZ2V0KHcpKSB7XG5cdCAgICAgICAgdy5kZXN0cm95KGRvbU5vZGUpXG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlb3JkZXJDaGlsZHJlbihkb21Ob2RlLCBtb3Zlcykge1xuXHQgICAgdmFyIGNoaWxkTm9kZXMgPSBkb21Ob2RlLmNoaWxkTm9kZXNcblx0ICAgIHZhciBrZXlNYXAgPSB7fVxuXHQgICAgdmFyIG5vZGVcblx0ICAgIHZhciByZW1vdmVcblx0ICAgIHZhciBpbnNlcnRcblx0XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vdmVzLnJlbW92ZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICByZW1vdmUgPSBtb3Zlcy5yZW1vdmVzW2ldXG5cdCAgICAgICAgbm9kZSA9IGNoaWxkTm9kZXNbcmVtb3ZlLmZyb21dXG5cdCAgICAgICAgaWYgKHJlbW92ZS5rZXkpIHtcblx0ICAgICAgICAgICAga2V5TWFwW3JlbW92ZS5rZXldID0gbm9kZVxuXHQgICAgICAgIH1cblx0ICAgICAgICBkb21Ob2RlLnJlbW92ZUNoaWxkKG5vZGUpXG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGxlbmd0aCA9IGNoaWxkTm9kZXMubGVuZ3RoXG5cdCAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1vdmVzLmluc2VydHMubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICBpbnNlcnQgPSBtb3Zlcy5pbnNlcnRzW2pdXG5cdCAgICAgICAgbm9kZSA9IGtleU1hcFtpbnNlcnQua2V5XVxuXHQgICAgICAgIC8vIHRoaXMgaXMgdGhlIHdlaXJkZXN0IGJ1ZyBpJ3ZlIGV2ZXIgc2VlbiBpbiB3ZWJraXRcblx0ICAgICAgICBkb21Ob2RlLmluc2VydEJlZm9yZShub2RlLCBpbnNlcnQudG8gPj0gbGVuZ3RoKysgPyBudWxsIDogY2hpbGROb2Rlc1tpbnNlcnQudG9dKVxuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiByZXBsYWNlUm9vdChvbGRSb290LCBuZXdSb290KSB7XG5cdCAgICBpZiAob2xkUm9vdCAmJiBuZXdSb290ICYmIG9sZFJvb3QgIT09IG5ld1Jvb3QgJiYgb2xkUm9vdC5wYXJlbnROb2RlKSB7XG5cdCAgICAgICAgb2xkUm9vdC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChuZXdSb290LCBvbGRSb290KVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBuZXdSb290O1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDU4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KVxuXHR2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oOClcblx0XG5cdHZhciByZW5kZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KVxuXHR2YXIgZG9tSW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU2KVxuXHR2YXIgcGF0Y2hPcCA9IF9fd2VicGFja19yZXF1aXJlX18oNTcpXG5cdG1vZHVsZS5leHBvcnRzID0gcGF0Y2hcblx0XG5cdGZ1bmN0aW9uIHBhdGNoKHJvb3ROb2RlLCBwYXRjaGVzLCByZW5kZXJPcHRpb25zKSB7XG5cdCAgICByZW5kZXJPcHRpb25zID0gcmVuZGVyT3B0aW9ucyB8fCB7fVxuXHQgICAgcmVuZGVyT3B0aW9ucy5wYXRjaCA9IHJlbmRlck9wdGlvbnMucGF0Y2ggJiYgcmVuZGVyT3B0aW9ucy5wYXRjaCAhPT0gcGF0Y2hcblx0ICAgICAgICA/IHJlbmRlck9wdGlvbnMucGF0Y2hcblx0ICAgICAgICA6IHBhdGNoUmVjdXJzaXZlXG5cdCAgICByZW5kZXJPcHRpb25zLnJlbmRlciA9IHJlbmRlck9wdGlvbnMucmVuZGVyIHx8IHJlbmRlclxuXHRcblx0ICAgIHJldHVybiByZW5kZXJPcHRpb25zLnBhdGNoKHJvb3ROb2RlLCBwYXRjaGVzLCByZW5kZXJPcHRpb25zKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBwYXRjaFJlY3Vyc2l2ZShyb290Tm9kZSwgcGF0Y2hlcywgcmVuZGVyT3B0aW9ucykge1xuXHQgICAgdmFyIGluZGljZXMgPSBwYXRjaEluZGljZXMocGF0Y2hlcylcblx0XG5cdCAgICBpZiAoaW5kaWNlcy5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICByZXR1cm4gcm9vdE5vZGVcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaW5kZXggPSBkb21JbmRleChyb290Tm9kZSwgcGF0Y2hlcy5hLCBpbmRpY2VzKVxuXHQgICAgdmFyIG93bmVyRG9jdW1lbnQgPSByb290Tm9kZS5vd25lckRvY3VtZW50XG5cdFxuXHQgICAgaWYgKCFyZW5kZXJPcHRpb25zLmRvY3VtZW50ICYmIG93bmVyRG9jdW1lbnQgIT09IGRvY3VtZW50KSB7XG5cdCAgICAgICAgcmVuZGVyT3B0aW9ucy5kb2N1bWVudCA9IG93bmVyRG9jdW1lbnRcblx0ICAgIH1cblx0XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluZGljZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICB2YXIgbm9kZUluZGV4ID0gaW5kaWNlc1tpXVxuXHQgICAgICAgIHJvb3ROb2RlID0gYXBwbHlQYXRjaChyb290Tm9kZSxcblx0ICAgICAgICAgICAgaW5kZXhbbm9kZUluZGV4XSxcblx0ICAgICAgICAgICAgcGF0Y2hlc1tub2RlSW5kZXhdLFxuXHQgICAgICAgICAgICByZW5kZXJPcHRpb25zKVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiByb290Tm9kZVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhcHBseVBhdGNoKHJvb3ROb2RlLCBkb21Ob2RlLCBwYXRjaExpc3QsIHJlbmRlck9wdGlvbnMpIHtcblx0ICAgIGlmICghZG9tTm9kZSkge1xuXHQgICAgICAgIHJldHVybiByb290Tm9kZVxuXHQgICAgfVxuXHRcblx0ICAgIHZhciBuZXdOb2RlXG5cdFxuXHQgICAgaWYgKGlzQXJyYXkocGF0Y2hMaXN0KSkge1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0Y2hMaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIG5ld05vZGUgPSBwYXRjaE9wKHBhdGNoTGlzdFtpXSwgZG9tTm9kZSwgcmVuZGVyT3B0aW9ucylcblx0XG5cdCAgICAgICAgICAgIGlmIChkb21Ob2RlID09PSByb290Tm9kZSkge1xuXHQgICAgICAgICAgICAgICAgcm9vdE5vZGUgPSBuZXdOb2RlXG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIG5ld05vZGUgPSBwYXRjaE9wKHBhdGNoTGlzdCwgZG9tTm9kZSwgcmVuZGVyT3B0aW9ucylcblx0XG5cdCAgICAgICAgaWYgKGRvbU5vZGUgPT09IHJvb3ROb2RlKSB7XG5cdCAgICAgICAgICAgIHJvb3ROb2RlID0gbmV3Tm9kZVxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gcm9vdE5vZGVcblx0fVxuXHRcblx0ZnVuY3Rpb24gcGF0Y2hJbmRpY2VzKHBhdGNoZXMpIHtcblx0ICAgIHZhciBpbmRpY2VzID0gW11cblx0XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gcGF0Y2hlcykge1xuXHQgICAgICAgIGlmIChrZXkgIT09IFwiYVwiKSB7XG5cdCAgICAgICAgICAgIGluZGljZXMucHVzaChOdW1iZXIoa2V5KSlcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIGluZGljZXNcblx0fVxuXG5cbi8qKiovIH0sXG4vKiA1OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzV2lkZ2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB1cGRhdGVXaWRnZXRcblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZVdpZGdldChhLCBiKSB7XG5cdCAgICBpZiAoaXNXaWRnZXQoYSkgJiYgaXNXaWRnZXQoYikpIHtcblx0ICAgICAgICBpZiAoXCJuYW1lXCIgaW4gYSAmJiBcIm5hbWVcIiBpbiBiKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBhLmlkID09PSBiLmlkXG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGEuaW5pdCA9PT0gYi5pbml0XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBmYWxzZVxuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDYwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KVxuXHR2YXIgaXNIb29rID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBkaWZmUHJvcHNcblx0XG5cdGZ1bmN0aW9uIGRpZmZQcm9wcyhhLCBiKSB7XG5cdCAgICB2YXIgZGlmZlxuXHRcblx0ICAgIGZvciAodmFyIGFLZXkgaW4gYSkge1xuXHQgICAgICAgIGlmICghKGFLZXkgaW4gYikpIHtcblx0ICAgICAgICAgICAgZGlmZiA9IGRpZmYgfHwge31cblx0ICAgICAgICAgICAgZGlmZlthS2V5XSA9IHVuZGVmaW5lZFxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIGFWYWx1ZSA9IGFbYUtleV1cblx0ICAgICAgICB2YXIgYlZhbHVlID0gYlthS2V5XVxuXHRcblx0ICAgICAgICBpZiAoYVZhbHVlID09PSBiVmFsdWUpIHtcblx0ICAgICAgICAgICAgY29udGludWVcblx0ICAgICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KGFWYWx1ZSkgJiYgaXNPYmplY3QoYlZhbHVlKSkge1xuXHQgICAgICAgICAgICBpZiAoZ2V0UHJvdG90eXBlKGJWYWx1ZSkgIT09IGdldFByb3RvdHlwZShhVmFsdWUpKSB7XG5cdCAgICAgICAgICAgICAgICBkaWZmID0gZGlmZiB8fCB7fVxuXHQgICAgICAgICAgICAgICAgZGlmZlthS2V5XSA9IGJWYWx1ZVxuXHQgICAgICAgICAgICB9IGVsc2UgaWYgKGlzSG9vayhiVmFsdWUpKSB7XG5cdCAgICAgICAgICAgICAgICAgZGlmZiA9IGRpZmYgfHwge31cblx0ICAgICAgICAgICAgICAgICBkaWZmW2FLZXldID0gYlZhbHVlXG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgb2JqZWN0RGlmZiA9IGRpZmZQcm9wcyhhVmFsdWUsIGJWYWx1ZSlcblx0ICAgICAgICAgICAgICAgIGlmIChvYmplY3REaWZmKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZGlmZiA9IGRpZmYgfHwge31cblx0ICAgICAgICAgICAgICAgICAgICBkaWZmW2FLZXldID0gb2JqZWN0RGlmZlxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgZGlmZiA9IGRpZmYgfHwge31cblx0ICAgICAgICAgICAgZGlmZlthS2V5XSA9IGJWYWx1ZVxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmb3IgKHZhciBiS2V5IGluIGIpIHtcblx0ICAgICAgICBpZiAoIShiS2V5IGluIGEpKSB7XG5cdCAgICAgICAgICAgIGRpZmYgPSBkaWZmIHx8IHt9XG5cdCAgICAgICAgICAgIGRpZmZbYktleV0gPSBiW2JLZXldXG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBkaWZmXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldFByb3RvdHlwZSh2YWx1ZSkge1xuXHQgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YpIHtcblx0ICAgIHJldHVybiBPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsdWUpXG5cdCAgfSBlbHNlIGlmICh2YWx1ZS5fX3Byb3RvX18pIHtcblx0ICAgIHJldHVybiB2YWx1ZS5fX3Byb3RvX19cblx0ICB9IGVsc2UgaWYgKHZhbHVlLmNvbnN0cnVjdG9yKSB7XG5cdCAgICByZXR1cm4gdmFsdWUuY29uc3RydWN0b3IucHJvdG90eXBlXG5cdCAgfVxuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDYxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oOClcblx0XG5cdHZhciBWUGF0Y2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KVxuXHR2YXIgaXNWTm9kZSA9IF9fd2VicGFja19yZXF1aXJlX18oMylcblx0dmFyIGlzVlRleHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpXG5cdHZhciBpc1dpZGdldCA9IF9fd2VicGFja19yZXF1aXJlX18oMSlcblx0dmFyIGlzVGh1bmsgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpXG5cdHZhciBoYW5kbGVUaHVuayA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpXG5cdFxuXHR2YXIgZGlmZlByb3BzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MClcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZGlmZlxuXHRcblx0ZnVuY3Rpb24gZGlmZihhLCBiKSB7XG5cdCAgICB2YXIgcGF0Y2ggPSB7IGE6IGEgfVxuXHQgICAgd2FsayhhLCBiLCBwYXRjaCwgMClcblx0ICAgIHJldHVybiBwYXRjaFxuXHR9XG5cdFxuXHRmdW5jdGlvbiB3YWxrKGEsIGIsIHBhdGNoLCBpbmRleCkge1xuXHQgICAgaWYgKGEgPT09IGIpIHtcblx0ICAgICAgICByZXR1cm5cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgYXBwbHkgPSBwYXRjaFtpbmRleF1cblx0ICAgIHZhciBhcHBseUNsZWFyID0gZmFsc2Vcblx0XG5cdCAgICBpZiAoaXNUaHVuayhhKSB8fCBpc1RodW5rKGIpKSB7XG5cdCAgICAgICAgdGh1bmtzKGEsIGIsIHBhdGNoLCBpbmRleClcblx0ICAgIH0gZWxzZSBpZiAoYiA9PSBudWxsKSB7XG5cdFxuXHQgICAgICAgIC8vIElmIGEgaXMgYSB3aWRnZXQgd2Ugd2lsbCBhZGQgYSByZW1vdmUgcGF0Y2ggZm9yIGl0XG5cdCAgICAgICAgLy8gT3RoZXJ3aXNlIGFueSBjaGlsZCB3aWRnZXRzL2hvb2tzIG11c3QgYmUgZGVzdHJveWVkLlxuXHQgICAgICAgIC8vIFRoaXMgcHJldmVudHMgYWRkaW5nIHR3byByZW1vdmUgcGF0Y2hlcyBmb3IgYSB3aWRnZXQuXG5cdCAgICAgICAgaWYgKCFpc1dpZGdldChhKSkge1xuXHQgICAgICAgICAgICBjbGVhclN0YXRlKGEsIHBhdGNoLCBpbmRleClcblx0ICAgICAgICAgICAgYXBwbHkgPSBwYXRjaFtpbmRleF1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGFwcGx5ID0gYXBwZW5kUGF0Y2goYXBwbHksIG5ldyBWUGF0Y2goVlBhdGNoLlJFTU9WRSwgYSwgYikpXG5cdCAgICB9IGVsc2UgaWYgKGlzVk5vZGUoYikpIHtcblx0ICAgICAgICBpZiAoaXNWTm9kZShhKSkge1xuXHQgICAgICAgICAgICBpZiAoYS50YWdOYW1lID09PSBiLnRhZ05hbWUgJiZcblx0ICAgICAgICAgICAgICAgIGEubmFtZXNwYWNlID09PSBiLm5hbWVzcGFjZSAmJlxuXHQgICAgICAgICAgICAgICAgYS5rZXkgPT09IGIua2V5KSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgcHJvcHNQYXRjaCA9IGRpZmZQcm9wcyhhLnByb3BlcnRpZXMsIGIucHJvcGVydGllcylcblx0ICAgICAgICAgICAgICAgIGlmIChwcm9wc1BhdGNoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgYXBwbHkgPSBhcHBlbmRQYXRjaChhcHBseSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFZQYXRjaChWUGF0Y2guUFJPUFMsIGEsIHByb3BzUGF0Y2gpKVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgYXBwbHkgPSBkaWZmQ2hpbGRyZW4oYSwgYiwgcGF0Y2gsIGFwcGx5LCBpbmRleClcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIGFwcGx5ID0gYXBwZW5kUGF0Y2goYXBwbHksIG5ldyBWUGF0Y2goVlBhdGNoLlZOT0RFLCBhLCBiKSlcblx0ICAgICAgICAgICAgICAgIGFwcGx5Q2xlYXIgPSB0cnVlXG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBhcHBseSA9IGFwcGVuZFBhdGNoKGFwcGx5LCBuZXcgVlBhdGNoKFZQYXRjaC5WTk9ERSwgYSwgYikpXG5cdCAgICAgICAgICAgIGFwcGx5Q2xlYXIgPSB0cnVlXG5cdCAgICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChpc1ZUZXh0KGIpKSB7XG5cdCAgICAgICAgaWYgKCFpc1ZUZXh0KGEpKSB7XG5cdCAgICAgICAgICAgIGFwcGx5ID0gYXBwZW5kUGF0Y2goYXBwbHksIG5ldyBWUGF0Y2goVlBhdGNoLlZURVhULCBhLCBiKSlcblx0ICAgICAgICAgICAgYXBwbHlDbGVhciA9IHRydWVcblx0ICAgICAgICB9IGVsc2UgaWYgKGEudGV4dCAhPT0gYi50ZXh0KSB7XG5cdCAgICAgICAgICAgIGFwcGx5ID0gYXBwZW5kUGF0Y2goYXBwbHksIG5ldyBWUGF0Y2goVlBhdGNoLlZURVhULCBhLCBiKSlcblx0ICAgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKGlzV2lkZ2V0KGIpKSB7XG5cdCAgICAgICAgaWYgKCFpc1dpZGdldChhKSkge1xuXHQgICAgICAgICAgICBhcHBseUNsZWFyID0gdHJ1ZVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgYXBwbHkgPSBhcHBlbmRQYXRjaChhcHBseSwgbmV3IFZQYXRjaChWUGF0Y2guV0lER0VULCBhLCBiKSlcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoYXBwbHkpIHtcblx0ICAgICAgICBwYXRjaFtpbmRleF0gPSBhcHBseVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChhcHBseUNsZWFyKSB7XG5cdCAgICAgICAgY2xlYXJTdGF0ZShhLCBwYXRjaCwgaW5kZXgpXG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRpZmZDaGlsZHJlbihhLCBiLCBwYXRjaCwgYXBwbHksIGluZGV4KSB7XG5cdCAgICB2YXIgYUNoaWxkcmVuID0gYS5jaGlsZHJlblxuXHQgICAgdmFyIG9yZGVyZWRTZXQgPSByZW9yZGVyKGFDaGlsZHJlbiwgYi5jaGlsZHJlbilcblx0ICAgIHZhciBiQ2hpbGRyZW4gPSBvcmRlcmVkU2V0LmNoaWxkcmVuXG5cdFxuXHQgICAgdmFyIGFMZW4gPSBhQ2hpbGRyZW4ubGVuZ3RoXG5cdCAgICB2YXIgYkxlbiA9IGJDaGlsZHJlbi5sZW5ndGhcblx0ICAgIHZhciBsZW4gPSBhTGVuID4gYkxlbiA/IGFMZW4gOiBiTGVuXG5cdFxuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgIHZhciBsZWZ0Tm9kZSA9IGFDaGlsZHJlbltpXVxuXHQgICAgICAgIHZhciByaWdodE5vZGUgPSBiQ2hpbGRyZW5baV1cblx0ICAgICAgICBpbmRleCArPSAxXG5cdFxuXHQgICAgICAgIGlmICghbGVmdE5vZGUpIHtcblx0ICAgICAgICAgICAgaWYgKHJpZ2h0Tm9kZSkge1xuXHQgICAgICAgICAgICAgICAgLy8gRXhjZXNzIG5vZGVzIGluIGIgbmVlZCB0byBiZSBhZGRlZFxuXHQgICAgICAgICAgICAgICAgYXBwbHkgPSBhcHBlbmRQYXRjaChhcHBseSxcblx0ICAgICAgICAgICAgICAgICAgICBuZXcgVlBhdGNoKFZQYXRjaC5JTlNFUlQsIG51bGwsIHJpZ2h0Tm9kZSkpXG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB3YWxrKGxlZnROb2RlLCByaWdodE5vZGUsIHBhdGNoLCBpbmRleClcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChpc1ZOb2RlKGxlZnROb2RlKSAmJiBsZWZ0Tm9kZS5jb3VudCkge1xuXHQgICAgICAgICAgICBpbmRleCArPSBsZWZ0Tm9kZS5jb3VudFxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAob3JkZXJlZFNldC5tb3Zlcykge1xuXHQgICAgICAgIC8vIFJlb3JkZXIgbm9kZXMgbGFzdFxuXHQgICAgICAgIGFwcGx5ID0gYXBwZW5kUGF0Y2goYXBwbHksIG5ldyBWUGF0Y2goXG5cdCAgICAgICAgICAgIFZQYXRjaC5PUkRFUixcblx0ICAgICAgICAgICAgYSxcblx0ICAgICAgICAgICAgb3JkZXJlZFNldC5tb3Zlc1xuXHQgICAgICAgICkpXG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIGFwcGx5XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNsZWFyU3RhdGUodk5vZGUsIHBhdGNoLCBpbmRleCkge1xuXHQgICAgLy8gVE9ETzogTWFrZSB0aGlzIGEgc2luZ2xlIHdhbGssIG5vdCB0d29cblx0ICAgIHVuaG9vayh2Tm9kZSwgcGF0Y2gsIGluZGV4KVxuXHQgICAgZGVzdHJveVdpZGdldHModk5vZGUsIHBhdGNoLCBpbmRleClcblx0fVxuXHRcblx0Ly8gUGF0Y2ggcmVjb3JkcyBmb3IgYWxsIGRlc3Ryb3llZCB3aWRnZXRzIG11c3QgYmUgYWRkZWQgYmVjYXVzZSB3ZSBuZWVkXG5cdC8vIGEgRE9NIG5vZGUgcmVmZXJlbmNlIGZvciB0aGUgZGVzdHJveSBmdW5jdGlvblxuXHRmdW5jdGlvbiBkZXN0cm95V2lkZ2V0cyh2Tm9kZSwgcGF0Y2gsIGluZGV4KSB7XG5cdCAgICBpZiAoaXNXaWRnZXQodk5vZGUpKSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiB2Tm9kZS5kZXN0cm95ID09PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgICAgICAgcGF0Y2hbaW5kZXhdID0gYXBwZW5kUGF0Y2goXG5cdCAgICAgICAgICAgICAgICBwYXRjaFtpbmRleF0sXG5cdCAgICAgICAgICAgICAgICBuZXcgVlBhdGNoKFZQYXRjaC5SRU1PVkUsIHZOb2RlLCBudWxsKVxuXHQgICAgICAgICAgICApXG5cdCAgICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChpc1ZOb2RlKHZOb2RlKSAmJiAodk5vZGUuaGFzV2lkZ2V0cyB8fCB2Tm9kZS5oYXNUaHVua3MpKSB7XG5cdCAgICAgICAgdmFyIGNoaWxkcmVuID0gdk5vZGUuY2hpbGRyZW5cblx0ICAgICAgICB2YXIgbGVuID0gY2hpbGRyZW4ubGVuZ3RoXG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXVxuXHQgICAgICAgICAgICBpbmRleCArPSAxXG5cdFxuXHQgICAgICAgICAgICBkZXN0cm95V2lkZ2V0cyhjaGlsZCwgcGF0Y2gsIGluZGV4KVxuXHRcblx0ICAgICAgICAgICAgaWYgKGlzVk5vZGUoY2hpbGQpICYmIGNoaWxkLmNvdW50KSB7XG5cdCAgICAgICAgICAgICAgICBpbmRleCArPSBjaGlsZC5jb3VudFxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChpc1RodW5rKHZOb2RlKSkge1xuXHQgICAgICAgIHRodW5rcyh2Tm9kZSwgbnVsbCwgcGF0Y2gsIGluZGV4KVxuXHQgICAgfVxuXHR9XG5cdFxuXHQvLyBDcmVhdGUgYSBzdWItcGF0Y2ggZm9yIHRodW5rc1xuXHRmdW5jdGlvbiB0aHVua3MoYSwgYiwgcGF0Y2gsIGluZGV4KSB7XG5cdCAgICB2YXIgbm9kZXMgPSBoYW5kbGVUaHVuayhhLCBiKVxuXHQgICAgdmFyIHRodW5rUGF0Y2ggPSBkaWZmKG5vZGVzLmEsIG5vZGVzLmIpXG5cdCAgICBpZiAoaGFzUGF0Y2hlcyh0aHVua1BhdGNoKSkge1xuXHQgICAgICAgIHBhdGNoW2luZGV4XSA9IG5ldyBWUGF0Y2goVlBhdGNoLlRIVU5LLCBudWxsLCB0aHVua1BhdGNoKVxuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYXNQYXRjaGVzKHBhdGNoKSB7XG5cdCAgICBmb3IgKHZhciBpbmRleCBpbiBwYXRjaCkge1xuXHQgICAgICAgIGlmIChpbmRleCAhPT0gXCJhXCIpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRydWVcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIGZhbHNlXG5cdH1cblx0XG5cdC8vIEV4ZWN1dGUgaG9va3Mgd2hlbiB0d28gbm9kZXMgYXJlIGlkZW50aWNhbFxuXHRmdW5jdGlvbiB1bmhvb2sodk5vZGUsIHBhdGNoLCBpbmRleCkge1xuXHQgICAgaWYgKGlzVk5vZGUodk5vZGUpKSB7XG5cdCAgICAgICAgaWYgKHZOb2RlLmhvb2tzKSB7XG5cdCAgICAgICAgICAgIHBhdGNoW2luZGV4XSA9IGFwcGVuZFBhdGNoKFxuXHQgICAgICAgICAgICAgICAgcGF0Y2hbaW5kZXhdLFxuXHQgICAgICAgICAgICAgICAgbmV3IFZQYXRjaChcblx0ICAgICAgICAgICAgICAgICAgICBWUGF0Y2guUFJPUFMsXG5cdCAgICAgICAgICAgICAgICAgICAgdk5vZGUsXG5cdCAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkS2V5cyh2Tm9kZS5ob29rcylcblx0ICAgICAgICAgICAgICAgIClcblx0ICAgICAgICAgICAgKVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHZOb2RlLmRlc2NlbmRhbnRIb29rcyB8fCB2Tm9kZS5oYXNUaHVua3MpIHtcblx0ICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gdk5vZGUuY2hpbGRyZW5cblx0ICAgICAgICAgICAgdmFyIGxlbiA9IGNoaWxkcmVuLmxlbmd0aFxuXHQgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXVxuXHQgICAgICAgICAgICAgICAgaW5kZXggKz0gMVxuXHRcblx0ICAgICAgICAgICAgICAgIHVuaG9vayhjaGlsZCwgcGF0Y2gsIGluZGV4KVxuXHRcblx0ICAgICAgICAgICAgICAgIGlmIChpc1ZOb2RlKGNoaWxkKSAmJiBjaGlsZC5jb3VudCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGluZGV4ICs9IGNoaWxkLmNvdW50XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKGlzVGh1bmsodk5vZGUpKSB7XG5cdCAgICAgICAgdGh1bmtzKHZOb2RlLCBudWxsLCBwYXRjaCwgaW5kZXgpXG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVuZGVmaW5lZEtleXMob2JqKSB7XG5cdCAgICB2YXIgcmVzdWx0ID0ge31cblx0XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG5cdCAgICAgICAgcmVzdWx0W2tleV0gPSB1bmRlZmluZWRcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gcmVzdWx0XG5cdH1cblx0XG5cdC8vIExpc3QgZGlmZiwgbmFpdmUgbGVmdCB0byByaWdodCByZW9yZGVyaW5nXG5cdGZ1bmN0aW9uIHJlb3JkZXIoYUNoaWxkcmVuLCBiQ2hpbGRyZW4pIHtcblx0ICAgIC8vIE8oTSkgdGltZSwgTyhNKSBtZW1vcnlcblx0ICAgIHZhciBiQ2hpbGRJbmRleCA9IGtleUluZGV4KGJDaGlsZHJlbilcblx0ICAgIHZhciBiS2V5cyA9IGJDaGlsZEluZGV4LmtleXNcblx0ICAgIHZhciBiRnJlZSA9IGJDaGlsZEluZGV4LmZyZWVcblx0XG5cdCAgICBpZiAoYkZyZWUubGVuZ3RoID09PSBiQ2hpbGRyZW4ubGVuZ3RoKSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgY2hpbGRyZW46IGJDaGlsZHJlbixcblx0ICAgICAgICAgICAgbW92ZXM6IG51bGxcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gTyhOKSB0aW1lLCBPKE4pIG1lbW9yeVxuXHQgICAgdmFyIGFDaGlsZEluZGV4ID0ga2V5SW5kZXgoYUNoaWxkcmVuKVxuXHQgICAgdmFyIGFLZXlzID0gYUNoaWxkSW5kZXgua2V5c1xuXHQgICAgdmFyIGFGcmVlID0gYUNoaWxkSW5kZXguZnJlZVxuXHRcblx0ICAgIGlmIChhRnJlZS5sZW5ndGggPT09IGFDaGlsZHJlbi5sZW5ndGgpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICBjaGlsZHJlbjogYkNoaWxkcmVuLFxuXHQgICAgICAgICAgICBtb3ZlczogbnVsbFxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyBPKE1BWChOLCBNKSkgbWVtb3J5XG5cdCAgICB2YXIgbmV3Q2hpbGRyZW4gPSBbXVxuXHRcblx0ICAgIHZhciBmcmVlSW5kZXggPSAwXG5cdCAgICB2YXIgZnJlZUNvdW50ID0gYkZyZWUubGVuZ3RoXG5cdCAgICB2YXIgZGVsZXRlZEl0ZW1zID0gMFxuXHRcblx0ICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBhIGFuZCBtYXRjaCBhIG5vZGUgaW4gYlxuXHQgICAgLy8gTyhOKSB0aW1lLFxuXHQgICAgZm9yICh2YXIgaSA9IDAgOyBpIDwgYUNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgdmFyIGFJdGVtID0gYUNoaWxkcmVuW2ldXG5cdCAgICAgICAgdmFyIGl0ZW1JbmRleFxuXHRcblx0ICAgICAgICBpZiAoYUl0ZW0ua2V5KSB7XG5cdCAgICAgICAgICAgIGlmIChiS2V5cy5oYXNPd25Qcm9wZXJ0eShhSXRlbS5rZXkpKSB7XG5cdCAgICAgICAgICAgICAgICAvLyBNYXRjaCB1cCB0aGUgb2xkIGtleXNcblx0ICAgICAgICAgICAgICAgIGl0ZW1JbmRleCA9IGJLZXlzW2FJdGVtLmtleV1cblx0ICAgICAgICAgICAgICAgIG5ld0NoaWxkcmVuLnB1c2goYkNoaWxkcmVuW2l0ZW1JbmRleF0pXG5cdFxuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIG9sZCBrZXllZCBpdGVtc1xuXHQgICAgICAgICAgICAgICAgaXRlbUluZGV4ID0gaSAtIGRlbGV0ZWRJdGVtcysrXG5cdCAgICAgICAgICAgICAgICBuZXdDaGlsZHJlbi5wdXNoKG51bGwpXG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAvLyBNYXRjaCB0aGUgaXRlbSBpbiBhIHdpdGggdGhlIG5leHQgZnJlZSBpdGVtIGluIGJcblx0ICAgICAgICAgICAgaWYgKGZyZWVJbmRleCA8IGZyZWVDb3VudCkge1xuXHQgICAgICAgICAgICAgICAgaXRlbUluZGV4ID0gYkZyZWVbZnJlZUluZGV4KytdXG5cdCAgICAgICAgICAgICAgICBuZXdDaGlsZHJlbi5wdXNoKGJDaGlsZHJlbltpdGVtSW5kZXhdKVxuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgLy8gVGhlcmUgYXJlIG5vIGZyZWUgaXRlbXMgaW4gYiB0byBtYXRjaCB3aXRoXG5cdCAgICAgICAgICAgICAgICAvLyB0aGUgZnJlZSBpdGVtcyBpbiBhLCBzbyB0aGUgZXh0cmEgZnJlZSBub2Rlc1xuXHQgICAgICAgICAgICAgICAgLy8gYXJlIGRlbGV0ZWQuXG5cdCAgICAgICAgICAgICAgICBpdGVtSW5kZXggPSBpIC0gZGVsZXRlZEl0ZW1zKytcblx0ICAgICAgICAgICAgICAgIG5ld0NoaWxkcmVuLnB1c2gobnVsbClcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbGFzdEZyZWVJbmRleCA9IGZyZWVJbmRleCA+PSBiRnJlZS5sZW5ndGggP1xuXHQgICAgICAgIGJDaGlsZHJlbi5sZW5ndGggOlxuXHQgICAgICAgIGJGcmVlW2ZyZWVJbmRleF1cblx0XG5cdCAgICAvLyBJdGVyYXRlIHRocm91Z2ggYiBhbmQgYXBwZW5kIGFueSBuZXcga2V5c1xuXHQgICAgLy8gTyhNKSB0aW1lXG5cdCAgICBmb3IgKHZhciBqID0gMDsgaiA8IGJDaGlsZHJlbi5sZW5ndGg7IGorKykge1xuXHQgICAgICAgIHZhciBuZXdJdGVtID0gYkNoaWxkcmVuW2pdXG5cdFxuXHQgICAgICAgIGlmIChuZXdJdGVtLmtleSkge1xuXHQgICAgICAgICAgICBpZiAoIWFLZXlzLmhhc093blByb3BlcnR5KG5ld0l0ZW0ua2V5KSkge1xuXHQgICAgICAgICAgICAgICAgLy8gQWRkIGFueSBuZXcga2V5ZWQgaXRlbXNcblx0ICAgICAgICAgICAgICAgIC8vIFdlIGFyZSBhZGRpbmcgbmV3IGl0ZW1zIHRvIHRoZSBlbmQgYW5kIHRoZW4gc29ydGluZyB0aGVtXG5cdCAgICAgICAgICAgICAgICAvLyBpbiBwbGFjZS4gSW4gZnV0dXJlIHdlIHNob3VsZCBpbnNlcnQgbmV3IGl0ZW1zIGluIHBsYWNlLlxuXHQgICAgICAgICAgICAgICAgbmV3Q2hpbGRyZW4ucHVzaChuZXdJdGVtKVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIGlmIChqID49IGxhc3RGcmVlSW5kZXgpIHtcblx0ICAgICAgICAgICAgLy8gQWRkIGFueSBsZWZ0b3ZlciBub24ta2V5ZWQgaXRlbXNcblx0ICAgICAgICAgICAgbmV3Q2hpbGRyZW4ucHVzaChuZXdJdGVtKVxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgc2ltdWxhdGUgPSBuZXdDaGlsZHJlbi5zbGljZSgpXG5cdCAgICB2YXIgc2ltdWxhdGVJbmRleCA9IDBcblx0ICAgIHZhciByZW1vdmVzID0gW11cblx0ICAgIHZhciBpbnNlcnRzID0gW11cblx0ICAgIHZhciBzaW11bGF0ZUl0ZW1cblx0XG5cdCAgICBmb3IgKHZhciBrID0gMDsgayA8IGJDaGlsZHJlbi5sZW5ndGg7KSB7XG5cdCAgICAgICAgdmFyIHdhbnRlZEl0ZW0gPSBiQ2hpbGRyZW5ba11cblx0ICAgICAgICBzaW11bGF0ZUl0ZW0gPSBzaW11bGF0ZVtzaW11bGF0ZUluZGV4XVxuXHRcblx0ICAgICAgICAvLyByZW1vdmUgaXRlbXNcblx0ICAgICAgICB3aGlsZSAoc2ltdWxhdGVJdGVtID09PSBudWxsICYmIHNpbXVsYXRlLmxlbmd0aCkge1xuXHQgICAgICAgICAgICByZW1vdmVzLnB1c2gocmVtb3ZlKHNpbXVsYXRlLCBzaW11bGF0ZUluZGV4LCBudWxsKSlcblx0ICAgICAgICAgICAgc2ltdWxhdGVJdGVtID0gc2ltdWxhdGVbc2ltdWxhdGVJbmRleF1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmICghc2ltdWxhdGVJdGVtIHx8IHNpbXVsYXRlSXRlbS5rZXkgIT09IHdhbnRlZEl0ZW0ua2V5KSB7XG5cdCAgICAgICAgICAgIC8vIGlmIHdlIG5lZWQgYSBrZXkgaW4gdGhpcyBwb3NpdGlvbi4uLlxuXHQgICAgICAgICAgICBpZiAod2FudGVkSXRlbS5rZXkpIHtcblx0ICAgICAgICAgICAgICAgIGlmIChzaW11bGF0ZUl0ZW0gJiYgc2ltdWxhdGVJdGVtLmtleSkge1xuXHQgICAgICAgICAgICAgICAgICAgIC8vIGlmIGFuIGluc2VydCBkb2Vzbid0IHB1dCB0aGlzIGtleSBpbiBwbGFjZSwgaXQgbmVlZHMgdG8gbW92ZVxuXHQgICAgICAgICAgICAgICAgICAgIGlmIChiS2V5c1tzaW11bGF0ZUl0ZW0ua2V5XSAhPT0gayArIDEpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3Zlcy5wdXNoKHJlbW92ZShzaW11bGF0ZSwgc2ltdWxhdGVJbmRleCwgc2ltdWxhdGVJdGVtLmtleSkpXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHNpbXVsYXRlSXRlbSA9IHNpbXVsYXRlW3NpbXVsYXRlSW5kZXhdXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSByZW1vdmUgZGlkbid0IHB1dCB0aGUgd2FudGVkIGl0ZW0gaW4gcGxhY2UsIHdlIG5lZWQgdG8gaW5zZXJ0IGl0XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2ltdWxhdGVJdGVtIHx8IHNpbXVsYXRlSXRlbS5rZXkgIT09IHdhbnRlZEl0ZW0ua2V5KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnRzLnB1c2goe2tleTogd2FudGVkSXRlbS5rZXksIHRvOiBrfSlcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdGVtcyBhcmUgbWF0Y2hpbmcsIHNvIHNraXAgYWhlYWRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW11bGF0ZUluZGV4Kytcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0cy5wdXNoKHtrZXk6IHdhbnRlZEl0ZW0ua2V5LCB0bzoga30pXG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaW5zZXJ0cy5wdXNoKHtrZXk6IHdhbnRlZEl0ZW0ua2V5LCB0bzoga30pXG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBrKytcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAvLyBhIGtleSBpbiBzaW11bGF0ZSBoYXMgbm8gbWF0Y2hpbmcgd2FudGVkIGtleSwgcmVtb3ZlIGl0XG5cdCAgICAgICAgICAgIGVsc2UgaWYgKHNpbXVsYXRlSXRlbSAmJiBzaW11bGF0ZUl0ZW0ua2V5KSB7XG5cdCAgICAgICAgICAgICAgICByZW1vdmVzLnB1c2gocmVtb3ZlKHNpbXVsYXRlLCBzaW11bGF0ZUluZGV4LCBzaW11bGF0ZUl0ZW0ua2V5KSlcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgc2ltdWxhdGVJbmRleCsrXG5cdCAgICAgICAgICAgIGsrK1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyByZW1vdmUgYWxsIHRoZSByZW1haW5pbmcgbm9kZXMgZnJvbSBzaW11bGF0ZVxuXHQgICAgd2hpbGUoc2ltdWxhdGVJbmRleCA8IHNpbXVsYXRlLmxlbmd0aCkge1xuXHQgICAgICAgIHNpbXVsYXRlSXRlbSA9IHNpbXVsYXRlW3NpbXVsYXRlSW5kZXhdXG5cdCAgICAgICAgcmVtb3Zlcy5wdXNoKHJlbW92ZShzaW11bGF0ZSwgc2ltdWxhdGVJbmRleCwgc2ltdWxhdGVJdGVtICYmIHNpbXVsYXRlSXRlbS5rZXkpKVxuXHQgICAgfVxuXHRcblx0ICAgIC8vIElmIHRoZSBvbmx5IG1vdmVzIHdlIGhhdmUgYXJlIGRlbGV0ZXMgdGhlbiB3ZSBjYW4ganVzdFxuXHQgICAgLy8gbGV0IHRoZSBkZWxldGUgcGF0Y2ggcmVtb3ZlIHRoZXNlIGl0ZW1zLlxuXHQgICAgaWYgKHJlbW92ZXMubGVuZ3RoID09PSBkZWxldGVkSXRlbXMgJiYgIWluc2VydHMubGVuZ3RoKSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgY2hpbGRyZW46IG5ld0NoaWxkcmVuLFxuXHQgICAgICAgICAgICBtb3ZlczogbnVsbFxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICAgIGNoaWxkcmVuOiBuZXdDaGlsZHJlbixcblx0ICAgICAgICBtb3Zlczoge1xuXHQgICAgICAgICAgICByZW1vdmVzOiByZW1vdmVzLFxuXHQgICAgICAgICAgICBpbnNlcnRzOiBpbnNlcnRzXG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiByZW1vdmUoYXJyLCBpbmRleCwga2V5KSB7XG5cdCAgICBhcnIuc3BsaWNlKGluZGV4LCAxKVxuXHRcblx0ICAgIHJldHVybiB7XG5cdCAgICAgICAgZnJvbTogaW5kZXgsXG5cdCAgICAgICAga2V5OiBrZXlcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24ga2V5SW5kZXgoY2hpbGRyZW4pIHtcblx0ICAgIHZhciBrZXlzID0ge31cblx0ICAgIHZhciBmcmVlID0gW11cblx0ICAgIHZhciBsZW5ndGggPSBjaGlsZHJlbi5sZW5ndGhcblx0XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5baV1cblx0XG5cdCAgICAgICAgaWYgKGNoaWxkLmtleSkge1xuXHQgICAgICAgICAgICBrZXlzW2NoaWxkLmtleV0gPSBpXG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgZnJlZS5wdXNoKGkpXG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiB7XG5cdCAgICAgICAga2V5czoga2V5cywgICAgIC8vIEEgaGFzaCBvZiBrZXkgbmFtZSB0byBpbmRleFxuXHQgICAgICAgIGZyZWU6IGZyZWUgICAgICAvLyBBbiBhcnJheSBvZiB1bmtleWVkIGl0ZW0gaW5kaWNlc1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhcHBlbmRQYXRjaChhcHBseSwgcGF0Y2gpIHtcblx0ICAgIGlmIChhcHBseSkge1xuXHQgICAgICAgIGlmIChpc0FycmF5KGFwcGx5KSkge1xuXHQgICAgICAgICAgICBhcHBseS5wdXNoKHBhdGNoKVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGFwcGx5ID0gW2FwcGx5LCBwYXRjaF1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBhcHBseVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gcGF0Y2hcblx0ICAgIH1cblx0fVxuXG5cbi8qKiovIH0sXG4vKiA2MiAqLyxcbi8qIDYzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiAoaWdub3JlZCkgKi9cblxuLyoqKi8gfVxuLyoqKioqKi8gXSlcbn0pO1xuO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGNsaWVudFJ1bnRpbWUuanNcbiAqKi8iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHdlYnBhY2svYm9vdHN0cmFwIDI3ODBkZGY3ODYzMWE0ZTFmZmNmXG4gKiovIiwidmFyIG1haW5Mb29wID0gcmVxdWlyZSgnbWFpbi1sb29wJyk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIGg6IHJlcXVpcmUoJ3ZpcnR1YWwtZG9tL2gnKSxcblxuICAgIGxvb3A6IGZ1bmN0aW9uKHN0YXRlLCByZW5kZXIpIHtcbiAgICAgICAgdmFyIGxvb3AgPSBtYWluTG9vcChzdGF0ZSwgcmVuZGVyLCB7XG4gICAgICAgICAgICBjcmVhdGU6IHJlcXVpcmUoJ3ZpcnR1YWwtZG9tL2NyZWF0ZS1lbGVtZW50JyksXG4gICAgICAgICAgICBkaWZmOiByZXF1aXJlKCd2aXJ0dWFsLWRvbS9kaWZmJyksXG4gICAgICAgICAgICBwYXRjaDogcmVxdWlyZSgndmlydHVhbC1kb20vcGF0Y2gnKVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gbG9vcDtcbiAgICB9XG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9saWIvY2xpZW50LXJ1bnRpbWUuanNcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IGlzV2lkZ2V0XG5cbmZ1bmN0aW9uIGlzV2lkZ2V0KHcpIHtcbiAgICByZXR1cm4gdyAmJiB3LnR5cGUgPT09IFwiV2lkZ2V0XCJcbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3ZpcnR1YWwtZG9tL3Zub2RlL2lzLXdpZGdldC5qc1xuICoqIG1vZHVsZSBpZCA9IDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjJcIlxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdmlydHVhbC1kb20vdm5vZGUvdmVyc2lvbi5qc1xuICoqIG1vZHVsZSBpZCA9IDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIiwidmFyIHZlcnNpb24gPSByZXF1aXJlKFwiLi92ZXJzaW9uXCIpXG5cbm1vZHVsZS5leHBvcnRzID0gaXNWaXJ0dWFsTm9kZVxuXG5mdW5jdGlvbiBpc1ZpcnR1YWxOb2RlKHgpIHtcbiAgICByZXR1cm4geCAmJiB4LnR5cGUgPT09IFwiVmlydHVhbE5vZGVcIiAmJiB4LnZlcnNpb24gPT09IHZlcnNpb25cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3ZpcnR1YWwtZG9tL3Zub2RlL2lzLXZub2RlLmpzXG4gKiogbW9kdWxlIGlkID0gM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IGlzVGh1bmtcclxuXHJcbmZ1bmN0aW9uIGlzVGh1bmsodCkge1xyXG4gICAgcmV0dXJuIHQgJiYgdC50eXBlID09PSBcIlRodW5rXCJcclxufVxyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92aXJ0dWFsLWRvbS92bm9kZS9pcy10aHVuay5qc1xuICoqIG1vZHVsZSBpZCA9IDRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBpc0hvb2tcblxuZnVuY3Rpb24gaXNIb29rKGhvb2spIHtcbiAgICByZXR1cm4gaG9vayAmJlxuICAgICAgKHR5cGVvZiBob29rLmhvb2sgPT09IFwiZnVuY3Rpb25cIiAmJiAhaG9vay5oYXNPd25Qcm9wZXJ0eShcImhvb2tcIikgfHxcbiAgICAgICB0eXBlb2YgaG9vay51bmhvb2sgPT09IFwiZnVuY3Rpb25cIiAmJiAhaG9vay5oYXNPd25Qcm9wZXJ0eShcInVuaG9va1wiKSlcbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3ZpcnR1YWwtZG9tL3Zub2RlL2lzLXZob29rLmpzXG4gKiogbW9kdWxlIGlkID0gNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iLCJ2YXIgdmVyc2lvbiA9IHJlcXVpcmUoXCIuL3ZlcnNpb25cIilcblxubW9kdWxlLmV4cG9ydHMgPSBpc1ZpcnR1YWxUZXh0XG5cbmZ1bmN0aW9uIGlzVmlydHVhbFRleHQoeCkge1xuICAgIHJldHVybiB4ICYmIHgudHlwZSA9PT0gXCJWaXJ0dWFsVGV4dFwiICYmIHgudmVyc2lvbiA9PT0gdmVyc2lvblxufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdmlydHVhbC1kb20vdm5vZGUvaXMtdnRleHQuanNcbiAqKiBtb2R1bGUgaWQgPSA2XG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMVxuICoqLyIsInZhciBuYXRpdmVJc0FycmF5ID0gQXJyYXkuaXNBcnJheVxudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ1xuXG5tb2R1bGUuZXhwb3J0cyA9IG5hdGl2ZUlzQXJyYXkgfHwgaXNBcnJheVxuXG5mdW5jdGlvbiBpc0FycmF5KG9iaikge1xuICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09IFwiW29iamVjdCBBcnJheV1cIlxufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdmlydHVhbC1kb20vfi94LWlzLWFycmF5L2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iLCJ2YXIgaCA9IHJlcXVpcmUoXCIuL3ZpcnR1YWwtaHlwZXJzY3JpcHQvaW5kZXguanNcIilcblxubW9kdWxlLmV4cG9ydHMgPSBoXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92aXJ0dWFsLWRvbS9oLmpzXG4gKiogbW9kdWxlIGlkID0gOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iLCIvKiFcbiAqIENyb3NzLUJyb3dzZXIgU3BsaXQgMS4xLjFcbiAqIENvcHlyaWdodCAyMDA3LTIwMTIgU3RldmVuIExldml0aGFuIDxzdGV2ZW5sZXZpdGhhbi5jb20+XG4gKiBBdmFpbGFibGUgdW5kZXIgdGhlIE1JVCBMaWNlbnNlXG4gKiBFQ01BU2NyaXB0IGNvbXBsaWFudCwgdW5pZm9ybSBjcm9zcy1icm93c2VyIHNwbGl0IG1ldGhvZFxuICovXG5cbi8qKlxuICogU3BsaXRzIGEgc3RyaW5nIGludG8gYW4gYXJyYXkgb2Ygc3RyaW5ncyB1c2luZyBhIHJlZ2V4IG9yIHN0cmluZyBzZXBhcmF0b3IuIE1hdGNoZXMgb2YgdGhlXG4gKiBzZXBhcmF0b3IgYXJlIG5vdCBpbmNsdWRlZCBpbiB0aGUgcmVzdWx0IGFycmF5LiBIb3dldmVyLCBpZiBgc2VwYXJhdG9yYCBpcyBhIHJlZ2V4IHRoYXQgY29udGFpbnNcbiAqIGNhcHR1cmluZyBncm91cHMsIGJhY2tyZWZlcmVuY2VzIGFyZSBzcGxpY2VkIGludG8gdGhlIHJlc3VsdCBlYWNoIHRpbWUgYHNlcGFyYXRvcmAgaXMgbWF0Y2hlZC5cbiAqIEZpeGVzIGJyb3dzZXIgYnVncyBjb21wYXJlZCB0byB0aGUgbmF0aXZlIGBTdHJpbmcucHJvdG90eXBlLnNwbGl0YCBhbmQgY2FuIGJlIHVzZWQgcmVsaWFibHlcbiAqIGNyb3NzLWJyb3dzZXIuXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyIFN0cmluZyB0byBzcGxpdC5cbiAqIEBwYXJhbSB7UmVnRXhwfFN0cmluZ30gc2VwYXJhdG9yIFJlZ2V4IG9yIHN0cmluZyB0byB1c2UgZm9yIHNlcGFyYXRpbmcgdGhlIHN0cmluZy5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbbGltaXRdIE1heGltdW0gbnVtYmVyIG9mIGl0ZW1zIHRvIGluY2x1ZGUgaW4gdGhlIHJlc3VsdCBhcnJheS5cbiAqIEByZXR1cm5zIHtBcnJheX0gQXJyYXkgb2Ygc3Vic3RyaW5ncy5cbiAqIEBleGFtcGxlXG4gKlxuICogLy8gQmFzaWMgdXNlXG4gKiBzcGxpdCgnYSBiIGMgZCcsICcgJyk7XG4gKiAvLyAtPiBbJ2EnLCAnYicsICdjJywgJ2QnXVxuICpcbiAqIC8vIFdpdGggbGltaXRcbiAqIHNwbGl0KCdhIGIgYyBkJywgJyAnLCAyKTtcbiAqIC8vIC0+IFsnYScsICdiJ11cbiAqXG4gKiAvLyBCYWNrcmVmZXJlbmNlcyBpbiByZXN1bHQgYXJyYXlcbiAqIHNwbGl0KCcuLndvcmQxIHdvcmQyLi4nLCAvKFthLXpdKykoXFxkKykvaSk7XG4gKiAvLyAtPiBbJy4uJywgJ3dvcmQnLCAnMScsICcgJywgJ3dvcmQnLCAnMicsICcuLiddXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uIHNwbGl0KHVuZGVmKSB7XG5cbiAgdmFyIG5hdGl2ZVNwbGl0ID0gU3RyaW5nLnByb3RvdHlwZS5zcGxpdCxcbiAgICBjb21wbGlhbnRFeGVjTnBjZyA9IC8oKT8/Ly5leGVjKFwiXCIpWzFdID09PSB1bmRlZixcbiAgICAvLyBOUENHOiBub25wYXJ0aWNpcGF0aW5nIGNhcHR1cmluZyBncm91cFxuICAgIHNlbGY7XG5cbiAgc2VsZiA9IGZ1bmN0aW9uKHN0ciwgc2VwYXJhdG9yLCBsaW1pdCkge1xuICAgIC8vIElmIGBzZXBhcmF0b3JgIGlzIG5vdCBhIHJlZ2V4LCB1c2UgYG5hdGl2ZVNwbGl0YFxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoc2VwYXJhdG9yKSAhPT0gXCJbb2JqZWN0IFJlZ0V4cF1cIikge1xuICAgICAgcmV0dXJuIG5hdGl2ZVNwbGl0LmNhbGwoc3RyLCBzZXBhcmF0b3IsIGxpbWl0KTtcbiAgICB9XG4gICAgdmFyIG91dHB1dCA9IFtdLFxuICAgICAgZmxhZ3MgPSAoc2VwYXJhdG9yLmlnbm9yZUNhc2UgPyBcImlcIiA6IFwiXCIpICsgKHNlcGFyYXRvci5tdWx0aWxpbmUgPyBcIm1cIiA6IFwiXCIpICsgKHNlcGFyYXRvci5leHRlbmRlZCA/IFwieFwiIDogXCJcIikgKyAvLyBQcm9wb3NlZCBmb3IgRVM2XG4gICAgICAoc2VwYXJhdG9yLnN0aWNreSA/IFwieVwiIDogXCJcIiksXG4gICAgICAvLyBGaXJlZm94IDMrXG4gICAgICBsYXN0TGFzdEluZGV4ID0gMCxcbiAgICAgIC8vIE1ha2UgYGdsb2JhbGAgYW5kIGF2b2lkIGBsYXN0SW5kZXhgIGlzc3VlcyBieSB3b3JraW5nIHdpdGggYSBjb3B5XG4gICAgICBzZXBhcmF0b3IgPSBuZXcgUmVnRXhwKHNlcGFyYXRvci5zb3VyY2UsIGZsYWdzICsgXCJnXCIpLFxuICAgICAgc2VwYXJhdG9yMiwgbWF0Y2gsIGxhc3RJbmRleCwgbGFzdExlbmd0aDtcbiAgICBzdHIgKz0gXCJcIjsgLy8gVHlwZS1jb252ZXJ0XG4gICAgaWYgKCFjb21wbGlhbnRFeGVjTnBjZykge1xuICAgICAgLy8gRG9lc24ndCBuZWVkIGZsYWdzIGd5LCBidXQgdGhleSBkb24ndCBodXJ0XG4gICAgICBzZXBhcmF0b3IyID0gbmV3IFJlZ0V4cChcIl5cIiArIHNlcGFyYXRvci5zb3VyY2UgKyBcIiQoPyFcXFxccylcIiwgZmxhZ3MpO1xuICAgIH1cbiAgICAvKiBWYWx1ZXMgZm9yIGBsaW1pdGAsIHBlciB0aGUgc3BlYzpcbiAgICAgKiBJZiB1bmRlZmluZWQ6IDQyOTQ5NjcyOTUgLy8gTWF0aC5wb3coMiwgMzIpIC0gMVxuICAgICAqIElmIDAsIEluZmluaXR5LCBvciBOYU46IDBcbiAgICAgKiBJZiBwb3NpdGl2ZSBudW1iZXI6IGxpbWl0ID0gTWF0aC5mbG9vcihsaW1pdCk7IGlmIChsaW1pdCA+IDQyOTQ5NjcyOTUpIGxpbWl0IC09IDQyOTQ5NjcyOTY7XG4gICAgICogSWYgbmVnYXRpdmUgbnVtYmVyOiA0Mjk0OTY3Mjk2IC0gTWF0aC5mbG9vcihNYXRoLmFicyhsaW1pdCkpXG4gICAgICogSWYgb3RoZXI6IFR5cGUtY29udmVydCwgdGhlbiB1c2UgdGhlIGFib3ZlIHJ1bGVzXG4gICAgICovXG4gICAgbGltaXQgPSBsaW1pdCA9PT0gdW5kZWYgPyAtMSA+Pj4gMCA6IC8vIE1hdGgucG93KDIsIDMyKSAtIDFcbiAgICBsaW1pdCA+Pj4gMDsgLy8gVG9VaW50MzIobGltaXQpXG4gICAgd2hpbGUgKG1hdGNoID0gc2VwYXJhdG9yLmV4ZWMoc3RyKSkge1xuICAgICAgLy8gYHNlcGFyYXRvci5sYXN0SW5kZXhgIGlzIG5vdCByZWxpYWJsZSBjcm9zcy1icm93c2VyXG4gICAgICBsYXN0SW5kZXggPSBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aDtcbiAgICAgIGlmIChsYXN0SW5kZXggPiBsYXN0TGFzdEluZGV4KSB7XG4gICAgICAgIG91dHB1dC5wdXNoKHN0ci5zbGljZShsYXN0TGFzdEluZGV4LCBtYXRjaC5pbmRleCkpO1xuICAgICAgICAvLyBGaXggYnJvd3NlcnMgd2hvc2UgYGV4ZWNgIG1ldGhvZHMgZG9uJ3QgY29uc2lzdGVudGx5IHJldHVybiBgdW5kZWZpbmVkYCBmb3JcbiAgICAgICAgLy8gbm9ucGFydGljaXBhdGluZyBjYXB0dXJpbmcgZ3JvdXBzXG4gICAgICAgIGlmICghY29tcGxpYW50RXhlY05wY2cgJiYgbWF0Y2gubGVuZ3RoID4gMSkge1xuICAgICAgICAgIG1hdGNoWzBdLnJlcGxhY2Uoc2VwYXJhdG9yMiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGggLSAyOyBpKyspIHtcbiAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50c1tpXSA9PT0gdW5kZWYpIHtcbiAgICAgICAgICAgICAgICBtYXRjaFtpXSA9IHVuZGVmO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hdGNoLmxlbmd0aCA+IDEgJiYgbWF0Y2guaW5kZXggPCBzdHIubGVuZ3RoKSB7XG4gICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkob3V0cHV0LCBtYXRjaC5zbGljZSgxKSk7XG4gICAgICAgIH1cbiAgICAgICAgbGFzdExlbmd0aCA9IG1hdGNoWzBdLmxlbmd0aDtcbiAgICAgICAgbGFzdExhc3RJbmRleCA9IGxhc3RJbmRleDtcbiAgICAgICAgaWYgKG91dHB1dC5sZW5ndGggPj0gbGltaXQpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHNlcGFyYXRvci5sYXN0SW5kZXggPT09IG1hdGNoLmluZGV4KSB7XG4gICAgICAgIHNlcGFyYXRvci5sYXN0SW5kZXgrKzsgLy8gQXZvaWQgYW4gaW5maW5pdGUgbG9vcFxuICAgICAgfVxuICAgIH1cbiAgICBpZiAobGFzdExhc3RJbmRleCA9PT0gc3RyLmxlbmd0aCkge1xuICAgICAgaWYgKGxhc3RMZW5ndGggfHwgIXNlcGFyYXRvci50ZXN0KFwiXCIpKSB7XG4gICAgICAgIG91dHB1dC5wdXNoKFwiXCIpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBvdXRwdXQucHVzaChzdHIuc2xpY2UobGFzdExhc3RJbmRleCkpO1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0Lmxlbmd0aCA+IGxpbWl0ID8gb3V0cHV0LnNsaWNlKDAsIGxpbWl0KSA6IG91dHB1dDtcbiAgfTtcblxuICByZXR1cm4gc2VsZjtcbn0pKCk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92aXJ0dWFsLWRvbS9+L2Jyb3dzZXItc3BsaXQvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAxMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbnZhciBPbmVWZXJzaW9uQ29uc3RyYWludCA9IHJlcXVpcmUoJ2luZGl2aWR1YWwvb25lLXZlcnNpb24nKTtcblxudmFyIE1ZX1ZFUlNJT04gPSAnNyc7XG5PbmVWZXJzaW9uQ29uc3RyYWludCgnZXYtc3RvcmUnLCBNWV9WRVJTSU9OKTtcblxudmFyIGhhc2hLZXkgPSAnX19FVl9TVE9SRV9LRVlAJyArIE1ZX1ZFUlNJT047XG5cbm1vZHVsZS5leHBvcnRzID0gRXZTdG9yZTtcblxuZnVuY3Rpb24gRXZTdG9yZShlbGVtKSB7XG4gICAgdmFyIGhhc2ggPSBlbGVtW2hhc2hLZXldO1xuXG4gICAgaWYgKCFoYXNoKSB7XG4gICAgICAgIGhhc2ggPSBlbGVtW2hhc2hLZXldID0ge307XG4gICAgfVxuXG4gICAgcmV0dXJuIGhhc2g7XG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92aXJ0dWFsLWRvbS9+L2V2LXN0b3JlL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gMTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKmdsb2JhbCB3aW5kb3csIGdsb2JhbCovXG5cbnZhciByb290ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgP1xuICAgIHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID9cbiAgICBnbG9iYWwgOiB7fTtcblxubW9kdWxlLmV4cG9ydHMgPSBJbmRpdmlkdWFsO1xuXG5mdW5jdGlvbiBJbmRpdmlkdWFsKGtleSwgdmFsdWUpIHtcbiAgICBpZiAoa2V5IGluIHJvb3QpIHtcbiAgICAgICAgcmV0dXJuIHJvb3Rba2V5XTtcbiAgICB9XG5cbiAgICByb290W2tleV0gPSB2YWx1ZTtcblxuICAgIHJldHVybiB2YWx1ZTtcbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3ZpcnR1YWwtZG9tL34vZXYtc3RvcmUvfi9pbmRpdmlkdWFsL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gMTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgSW5kaXZpZHVhbCA9IHJlcXVpcmUoJy4vaW5kZXguanMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBPbmVWZXJzaW9uO1xuXG5mdW5jdGlvbiBPbmVWZXJzaW9uKG1vZHVsZU5hbWUsIHZlcnNpb24sIGRlZmF1bHRWYWx1ZSkge1xuICAgIHZhciBrZXkgPSAnX19JTkRJVklEVUFMX09ORV9WRVJTSU9OXycgKyBtb2R1bGVOYW1lO1xuICAgIHZhciBlbmZvcmNlS2V5ID0ga2V5ICsgJ19FTkZPUkNFX1NJTkdMRVRPTic7XG5cbiAgICB2YXIgdmVyc2lvblZhbHVlID0gSW5kaXZpZHVhbChlbmZvcmNlS2V5LCB2ZXJzaW9uKTtcblxuICAgIGlmICh2ZXJzaW9uVmFsdWUgIT09IHZlcnNpb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW4gb25seSBoYXZlIG9uZSBjb3B5IG9mICcgK1xuICAgICAgICAgICAgbW9kdWxlTmFtZSArICcuXFxuJyArXG4gICAgICAgICAgICAnWW91IGFscmVhZHkgaGF2ZSB2ZXJzaW9uICcgKyB2ZXJzaW9uVmFsdWUgK1xuICAgICAgICAgICAgJyBpbnN0YWxsZWQuXFxuJyArXG4gICAgICAgICAgICAnVGhpcyBtZWFucyB5b3UgY2Fubm90IGluc3RhbGwgdmVyc2lvbiAnICsgdmVyc2lvbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIEluZGl2aWR1YWwoa2V5LCBkZWZhdWx0VmFsdWUpO1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdmlydHVhbC1kb20vfi9ldi1zdG9yZS9+L2luZGl2aWR1YWwvb25lLXZlcnNpb24uanNcbiAqKiBtb2R1bGUgaWQgPSAxM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbnZhciBFdlN0b3JlID0gcmVxdWlyZSgnZXYtc3RvcmUnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBFdkhvb2s7XG5cbmZ1bmN0aW9uIEV2SG9vayh2YWx1ZSkge1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBFdkhvb2spKSB7XG4gICAgICAgIHJldHVybiBuZXcgRXZIb29rKHZhbHVlKTtcbiAgICB9XG5cbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG59XG5cbkV2SG9vay5wcm90b3R5cGUuaG9vayA9IGZ1bmN0aW9uIChub2RlLCBwcm9wZXJ0eU5hbWUpIHtcbiAgICB2YXIgZXMgPSBFdlN0b3JlKG5vZGUpO1xuICAgIHZhciBwcm9wTmFtZSA9IHByb3BlcnR5TmFtZS5zdWJzdHIoMyk7XG5cbiAgICBlc1twcm9wTmFtZV0gPSB0aGlzLnZhbHVlO1xufTtcblxuRXZIb29rLnByb3RvdHlwZS51bmhvb2sgPSBmdW5jdGlvbihub2RlLCBwcm9wZXJ0eU5hbWUpIHtcbiAgICB2YXIgZXMgPSBFdlN0b3JlKG5vZGUpO1xuICAgIHZhciBwcm9wTmFtZSA9IHByb3BlcnR5TmFtZS5zdWJzdHIoMyk7XG5cbiAgICBlc1twcm9wTmFtZV0gPSB1bmRlZmluZWQ7XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdmlydHVhbC1kb20vdmlydHVhbC1oeXBlcnNjcmlwdC9ob29rcy9ldi1ob29rLmpzXG4gKiogbW9kdWxlIGlkID0gMTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMCAxXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNvZnRTZXRIb29rO1xuXG5mdW5jdGlvbiBTb2Z0U2V0SG9vayh2YWx1ZSkge1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTb2Z0U2V0SG9vaykpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTb2Z0U2V0SG9vayh2YWx1ZSk7XG4gICAgfVxuXG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xufVxuXG5Tb2Z0U2V0SG9vay5wcm90b3R5cGUuaG9vayA9IGZ1bmN0aW9uIChub2RlLCBwcm9wZXJ0eU5hbWUpIHtcbiAgICBpZiAobm9kZVtwcm9wZXJ0eU5hbWVdICE9PSB0aGlzLnZhbHVlKSB7XG4gICAgICAgIG5vZGVbcHJvcGVydHlOYW1lXSA9IHRoaXMudmFsdWU7XG4gICAgfVxufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3ZpcnR1YWwtZG9tL3ZpcnR1YWwtaHlwZXJzY3JpcHQvaG9va3Mvc29mdC1zZXQtaG9vay5qc1xuICoqIG1vZHVsZSBpZCA9IDE1XG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxudmFyIGlzQXJyYXkgPSByZXF1aXJlKCd4LWlzLWFycmF5Jyk7XG5cbnZhciBWTm9kZSA9IHJlcXVpcmUoJy4uL3Zub2RlL3Zub2RlLmpzJyk7XG52YXIgVlRleHQgPSByZXF1aXJlKCcuLi92bm9kZS92dGV4dC5qcycpO1xudmFyIGlzVk5vZGUgPSByZXF1aXJlKCcuLi92bm9kZS9pcy12bm9kZScpO1xudmFyIGlzVlRleHQgPSByZXF1aXJlKCcuLi92bm9kZS9pcy12dGV4dCcpO1xudmFyIGlzV2lkZ2V0ID0gcmVxdWlyZSgnLi4vdm5vZGUvaXMtd2lkZ2V0Jyk7XG52YXIgaXNIb29rID0gcmVxdWlyZSgnLi4vdm5vZGUvaXMtdmhvb2snKTtcbnZhciBpc1ZUaHVuayA9IHJlcXVpcmUoJy4uL3Zub2RlL2lzLXRodW5rJyk7XG5cbnZhciBwYXJzZVRhZyA9IHJlcXVpcmUoJy4vcGFyc2UtdGFnLmpzJyk7XG52YXIgc29mdFNldEhvb2sgPSByZXF1aXJlKCcuL2hvb2tzL3NvZnQtc2V0LWhvb2suanMnKTtcbnZhciBldkhvb2sgPSByZXF1aXJlKCcuL2hvb2tzL2V2LWhvb2suanMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBoO1xuXG5mdW5jdGlvbiBoKHRhZ05hbWUsIHByb3BlcnRpZXMsIGNoaWxkcmVuKSB7XG4gICAgdmFyIGNoaWxkTm9kZXMgPSBbXTtcbiAgICB2YXIgdGFnLCBwcm9wcywga2V5LCBuYW1lc3BhY2U7XG5cbiAgICBpZiAoIWNoaWxkcmVuICYmIGlzQ2hpbGRyZW4ocHJvcGVydGllcykpIHtcbiAgICAgICAgY2hpbGRyZW4gPSBwcm9wZXJ0aWVzO1xuICAgICAgICBwcm9wcyA9IHt9O1xuICAgIH1cblxuICAgIHByb3BzID0gcHJvcHMgfHwgcHJvcGVydGllcyB8fCB7fTtcbiAgICB0YWcgPSBwYXJzZVRhZyh0YWdOYW1lLCBwcm9wcyk7XG5cbiAgICAvLyBzdXBwb3J0IGtleXNcbiAgICBpZiAocHJvcHMuaGFzT3duUHJvcGVydHkoJ2tleScpKSB7XG4gICAgICAgIGtleSA9IHByb3BzLmtleTtcbiAgICAgICAgcHJvcHMua2V5ID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIHN1cHBvcnQgbmFtZXNwYWNlXG4gICAgaWYgKHByb3BzLmhhc093blByb3BlcnR5KCduYW1lc3BhY2UnKSkge1xuICAgICAgICBuYW1lc3BhY2UgPSBwcm9wcy5uYW1lc3BhY2U7XG4gICAgICAgIHByb3BzLm5hbWVzcGFjZSA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBmaXggY3Vyc29yIGJ1Z1xuICAgIGlmICh0YWcgPT09ICdJTlBVVCcgJiZcbiAgICAgICAgIW5hbWVzcGFjZSAmJlxuICAgICAgICBwcm9wcy5oYXNPd25Qcm9wZXJ0eSgndmFsdWUnKSAmJlxuICAgICAgICBwcm9wcy52YWx1ZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICFpc0hvb2socHJvcHMudmFsdWUpXG4gICAgKSB7XG4gICAgICAgIHByb3BzLnZhbHVlID0gc29mdFNldEhvb2socHJvcHMudmFsdWUpO1xuICAgIH1cblxuICAgIHRyYW5zZm9ybVByb3BlcnRpZXMocHJvcHMpO1xuXG4gICAgaWYgKGNoaWxkcmVuICE9PSB1bmRlZmluZWQgJiYgY2hpbGRyZW4gIT09IG51bGwpIHtcbiAgICAgICAgYWRkQ2hpbGQoY2hpbGRyZW4sIGNoaWxkTm9kZXMsIHRhZywgcHJvcHMpO1xuICAgIH1cblxuXG4gICAgcmV0dXJuIG5ldyBWTm9kZSh0YWcsIHByb3BzLCBjaGlsZE5vZGVzLCBrZXksIG5hbWVzcGFjZSk7XG59XG5cbmZ1bmN0aW9uIGFkZENoaWxkKGMsIGNoaWxkTm9kZXMsIHRhZywgcHJvcHMpIHtcbiAgICBpZiAodHlwZW9mIGMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNoaWxkTm9kZXMucHVzaChuZXcgVlRleHQoYykpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGMgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGNoaWxkTm9kZXMucHVzaChuZXcgVlRleHQoU3RyaW5nKGMpKSk7XG4gICAgfSBlbHNlIGlmIChpc0NoaWxkKGMpKSB7XG4gICAgICAgIGNoaWxkTm9kZXMucHVzaChjKTtcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkoYykpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhZGRDaGlsZChjW2ldLCBjaGlsZE5vZGVzLCB0YWcsIHByb3BzKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYyA9PT0gbnVsbCB8fCBjID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IFVuZXhwZWN0ZWRWaXJ0dWFsRWxlbWVudCh7XG4gICAgICAgICAgICBmb3JlaWduT2JqZWN0OiBjLFxuICAgICAgICAgICAgcGFyZW50Vm5vZGU6IHtcbiAgICAgICAgICAgICAgICB0YWdOYW1lOiB0YWcsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczogcHJvcHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1Qcm9wZXJ0aWVzKHByb3BzKSB7XG4gICAgZm9yICh2YXIgcHJvcE5hbWUgaW4gcHJvcHMpIHtcbiAgICAgICAgaWYgKHByb3BzLmhhc093blByb3BlcnR5KHByb3BOYW1lKSkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuXG4gICAgICAgICAgICBpZiAoaXNIb29rKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocHJvcE5hbWUuc3Vic3RyKDAsIDMpID09PSAnZXYtJykge1xuICAgICAgICAgICAgICAgIC8vIGFkZCBldi1mb28gc3VwcG9ydFxuICAgICAgICAgICAgICAgIHByb3BzW3Byb3BOYW1lXSA9IGV2SG9vayh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGlzQ2hpbGQoeCkge1xuICAgIHJldHVybiBpc1ZOb2RlKHgpIHx8IGlzVlRleHQoeCkgfHwgaXNXaWRnZXQoeCkgfHwgaXNWVGh1bmsoeCk7XG59XG5cbmZ1bmN0aW9uIGlzQ2hpbGRyZW4oeCkge1xuICAgIHJldHVybiB0eXBlb2YgeCA9PT0gJ3N0cmluZycgfHwgaXNBcnJheSh4KSB8fCBpc0NoaWxkKHgpO1xufVxuXG5mdW5jdGlvbiBVbmV4cGVjdGVkVmlydHVhbEVsZW1lbnQoZGF0YSkge1xuICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoKTtcblxuICAgIGVyci50eXBlID0gJ3ZpcnR1YWwtaHlwZXJzY3JpcHQudW5leHBlY3RlZC52aXJ0dWFsLWVsZW1lbnQnO1xuICAgIGVyci5tZXNzYWdlID0gJ1VuZXhwZWN0ZWQgdmlydHVhbCBjaGlsZCBwYXNzZWQgdG8gaCgpLlxcbicgK1xuICAgICAgICAnRXhwZWN0ZWQgYSBWTm9kZSAvIFZ0aHVuayAvIFZXaWRnZXQgLyBzdHJpbmcgYnV0OlxcbicgK1xuICAgICAgICAnZ290OlxcbicgK1xuICAgICAgICBlcnJvclN0cmluZyhkYXRhLmZvcmVpZ25PYmplY3QpICtcbiAgICAgICAgJy5cXG4nICtcbiAgICAgICAgJ1RoZSBwYXJlbnQgdm5vZGUgaXM6XFxuJyArXG4gICAgICAgIGVycm9yU3RyaW5nKGRhdGEucGFyZW50Vm5vZGUpXG4gICAgICAgICdcXG4nICtcbiAgICAgICAgJ1N1Z2dlc3RlZCBmaXg6IGNoYW5nZSB5b3VyIGBoKC4uLiwgWyAuLi4gXSlgIGNhbGxzaXRlLic7XG4gICAgZXJyLmZvcmVpZ25PYmplY3QgPSBkYXRhLmZvcmVpZ25PYmplY3Q7XG4gICAgZXJyLnBhcmVudFZub2RlID0gZGF0YS5wYXJlbnRWbm9kZTtcblxuICAgIHJldHVybiBlcnI7XG59XG5cbmZ1bmN0aW9uIGVycm9yU3RyaW5nKG9iaikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShvYmosIG51bGwsICcgICAgJyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gU3RyaW5nKG9iaik7XG4gICAgfVxufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdmlydHVhbC1kb20vdmlydHVhbC1oeXBlcnNjcmlwdC9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDE2XG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMVxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxudmFyIHNwbGl0ID0gcmVxdWlyZSgnYnJvd3Nlci1zcGxpdCcpO1xuXG52YXIgY2xhc3NJZFNwbGl0ID0gLyhbXFwuI10/W2EtekEtWjAtOVxcdTAwN0YtXFx1RkZGRl86LV0rKS87XG52YXIgbm90Q2xhc3NJZCA9IC9eXFwufCMvO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHBhcnNlVGFnO1xuXG5mdW5jdGlvbiBwYXJzZVRhZyh0YWcsIHByb3BzKSB7XG4gICAgaWYgKCF0YWcpIHtcbiAgICAgICAgcmV0dXJuICdESVYnO1xuICAgIH1cblxuICAgIHZhciBub0lkID0gIShwcm9wcy5oYXNPd25Qcm9wZXJ0eSgnaWQnKSk7XG5cbiAgICB2YXIgdGFnUGFydHMgPSBzcGxpdCh0YWcsIGNsYXNzSWRTcGxpdCk7XG4gICAgdmFyIHRhZ05hbWUgPSBudWxsO1xuXG4gICAgaWYgKG5vdENsYXNzSWQudGVzdCh0YWdQYXJ0c1sxXSkpIHtcbiAgICAgICAgdGFnTmFtZSA9ICdESVYnO1xuICAgIH1cblxuICAgIHZhciBjbGFzc2VzLCBwYXJ0LCB0eXBlLCBpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IHRhZ1BhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHBhcnQgPSB0YWdQYXJ0c1tpXTtcblxuICAgICAgICBpZiAoIXBhcnQpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdHlwZSA9IHBhcnQuY2hhckF0KDApO1xuXG4gICAgICAgIGlmICghdGFnTmFtZSkge1xuICAgICAgICAgICAgdGFnTmFtZSA9IHBhcnQ7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJy4nKSB7XG4gICAgICAgICAgICBjbGFzc2VzID0gY2xhc3NlcyB8fCBbXTtcbiAgICAgICAgICAgIGNsYXNzZXMucHVzaChwYXJ0LnN1YnN0cmluZygxLCBwYXJ0Lmxlbmd0aCkpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICcjJyAmJiBub0lkKSB7XG4gICAgICAgICAgICBwcm9wcy5pZCA9IHBhcnQuc3Vic3RyaW5nKDEsIHBhcnQubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjbGFzc2VzKSB7XG4gICAgICAgIGlmIChwcm9wcy5jbGFzc05hbWUpIHtcbiAgICAgICAgICAgIGNsYXNzZXMucHVzaChwcm9wcy5jbGFzc05hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvcHMuY2xhc3NOYW1lID0gY2xhc3Nlcy5qb2luKCcgJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb3BzLm5hbWVzcGFjZSA/IHRhZ05hbWUgOiB0YWdOYW1lLnRvVXBwZXJDYXNlKCk7XG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92aXJ0dWFsLWRvbS92aXJ0dWFsLWh5cGVyc2NyaXB0L3BhcnNlLXRhZy5qc1xuICoqIG1vZHVsZSBpZCA9IDE3XG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMVxuICoqLyIsInZhciB2ZXJzaW9uID0gcmVxdWlyZShcIi4vdmVyc2lvblwiKVxudmFyIGlzVk5vZGUgPSByZXF1aXJlKFwiLi9pcy12bm9kZVwiKVxudmFyIGlzV2lkZ2V0ID0gcmVxdWlyZShcIi4vaXMtd2lkZ2V0XCIpXG52YXIgaXNUaHVuayA9IHJlcXVpcmUoXCIuL2lzLXRodW5rXCIpXG52YXIgaXNWSG9vayA9IHJlcXVpcmUoXCIuL2lzLXZob29rXCIpXG5cbm1vZHVsZS5leHBvcnRzID0gVmlydHVhbE5vZGVcblxudmFyIG5vUHJvcGVydGllcyA9IHt9XG52YXIgbm9DaGlsZHJlbiA9IFtdXG5cbmZ1bmN0aW9uIFZpcnR1YWxOb2RlKHRhZ05hbWUsIHByb3BlcnRpZXMsIGNoaWxkcmVuLCBrZXksIG5hbWVzcGFjZSkge1xuICAgIHRoaXMudGFnTmFtZSA9IHRhZ05hbWVcbiAgICB0aGlzLnByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzIHx8IG5vUHJvcGVydGllc1xuICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbiB8fCBub0NoaWxkcmVuXG4gICAgdGhpcy5rZXkgPSBrZXkgIT0gbnVsbCA/IFN0cmluZyhrZXkpIDogdW5kZWZpbmVkXG4gICAgdGhpcy5uYW1lc3BhY2UgPSAodHlwZW9mIG5hbWVzcGFjZSA9PT0gXCJzdHJpbmdcIikgPyBuYW1lc3BhY2UgOiBudWxsXG5cbiAgICB2YXIgY291bnQgPSAoY2hpbGRyZW4gJiYgY2hpbGRyZW4ubGVuZ3RoKSB8fCAwXG4gICAgdmFyIGRlc2NlbmRhbnRzID0gMFxuICAgIHZhciBoYXNXaWRnZXRzID0gZmFsc2VcbiAgICB2YXIgaGFzVGh1bmtzID0gZmFsc2VcbiAgICB2YXIgZGVzY2VuZGFudEhvb2tzID0gZmFsc2VcbiAgICB2YXIgaG9va3NcblxuICAgIGZvciAodmFyIHByb3BOYW1lIGluIHByb3BlcnRpZXMpIHtcbiAgICAgICAgaWYgKHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgICAgICB2YXIgcHJvcGVydHkgPSBwcm9wZXJ0aWVzW3Byb3BOYW1lXVxuICAgICAgICAgICAgaWYgKGlzVkhvb2socHJvcGVydHkpICYmIHByb3BlcnR5LnVuaG9vaykge1xuICAgICAgICAgICAgICAgIGlmICghaG9va3MpIHtcbiAgICAgICAgICAgICAgICAgICAgaG9va3MgPSB7fVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGhvb2tzW3Byb3BOYW1lXSA9IHByb3BlcnR5XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5baV1cbiAgICAgICAgaWYgKGlzVk5vZGUoY2hpbGQpKSB7XG4gICAgICAgICAgICBkZXNjZW5kYW50cyArPSBjaGlsZC5jb3VudCB8fCAwXG5cbiAgICAgICAgICAgIGlmICghaGFzV2lkZ2V0cyAmJiBjaGlsZC5oYXNXaWRnZXRzKSB7XG4gICAgICAgICAgICAgICAgaGFzV2lkZ2V0cyA9IHRydWVcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFoYXNUaHVua3MgJiYgY2hpbGQuaGFzVGh1bmtzKSB7XG4gICAgICAgICAgICAgICAgaGFzVGh1bmtzID0gdHJ1ZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWRlc2NlbmRhbnRIb29rcyAmJiAoY2hpbGQuaG9va3MgfHwgY2hpbGQuZGVzY2VuZGFudEhvb2tzKSkge1xuICAgICAgICAgICAgICAgIGRlc2NlbmRhbnRIb29rcyA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICghaGFzV2lkZ2V0cyAmJiBpc1dpZGdldChjaGlsZCkpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2hpbGQuZGVzdHJveSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgaGFzV2lkZ2V0cyA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICghaGFzVGh1bmtzICYmIGlzVGh1bmsoY2hpbGQpKSB7XG4gICAgICAgICAgICBoYXNUaHVua3MgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5jb3VudCA9IGNvdW50ICsgZGVzY2VuZGFudHNcbiAgICB0aGlzLmhhc1dpZGdldHMgPSBoYXNXaWRnZXRzXG4gICAgdGhpcy5oYXNUaHVua3MgPSBoYXNUaHVua3NcbiAgICB0aGlzLmhvb2tzID0gaG9va3NcbiAgICB0aGlzLmRlc2NlbmRhbnRIb29rcyA9IGRlc2NlbmRhbnRIb29rc1xufVxuXG5WaXJ0dWFsTm9kZS5wcm90b3R5cGUudmVyc2lvbiA9IHZlcnNpb25cblZpcnR1YWxOb2RlLnByb3RvdHlwZS50eXBlID0gXCJWaXJ0dWFsTm9kZVwiXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92aXJ0dWFsLWRvbS92bm9kZS92bm9kZS5qc1xuICoqIG1vZHVsZSBpZCA9IDE4XG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMVxuICoqLyIsInZhciB2ZXJzaW9uID0gcmVxdWlyZShcIi4vdmVyc2lvblwiKVxuXG5tb2R1bGUuZXhwb3J0cyA9IFZpcnR1YWxUZXh0XG5cbmZ1bmN0aW9uIFZpcnR1YWxUZXh0KHRleHQpIHtcbiAgICB0aGlzLnRleHQgPSBTdHJpbmcodGV4dClcbn1cblxuVmlydHVhbFRleHQucHJvdG90eXBlLnZlcnNpb24gPSB2ZXJzaW9uXG5WaXJ0dWFsVGV4dC5wcm90b3R5cGUudHlwZSA9IFwiVmlydHVhbFRleHRcIlxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdmlydHVhbC1kb20vdm5vZGUvdnRleHQuanNcbiAqKiBtb2R1bGUgaWQgPSAxOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwIDFcbiAqKi8iLCJ2YXIgdG9wTGV2ZWwgPSB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6XG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB7fVxudmFyIG1pbkRvYyA9IHJlcXVpcmUoJ21pbi1kb2N1bWVudCcpO1xuXG5pZiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZG9jdW1lbnQ7XG59IGVsc2Uge1xuICAgIHZhciBkb2NjeSA9IHRvcExldmVsWydfX0dMT0JBTF9ET0NVTUVOVF9DQUNIRUA0J107XG5cbiAgICBpZiAoIWRvY2N5KSB7XG4gICAgICAgIGRvY2N5ID0gdG9wTGV2ZWxbJ19fR0xPQkFMX0RPQ1VNRU5UX0NBQ0hFQDQnXSA9IG1pbkRvYztcbiAgICB9XG5cbiAgICBtb2R1bGUuZXhwb3J0cyA9IGRvY2N5O1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdmlydHVhbC1kb20vfi9nbG9iYWwvZG9jdW1lbnQuanNcbiAqKiBtb2R1bGUgaWQgPSAyNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNPYmplY3QoeCkge1xuXHRyZXR1cm4gdHlwZW9mIHggPT09IFwib2JqZWN0XCIgJiYgeCAhPT0gbnVsbDtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92aXJ0dWFsLWRvbS9+L2lzLW9iamVjdC9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDI1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaXNPYmplY3QgPSByZXF1aXJlKFwiaXMtb2JqZWN0XCIpXG52YXIgaXNIb29rID0gcmVxdWlyZShcIi4uL3Zub2RlL2lzLXZob29rLmpzXCIpXG5cbm1vZHVsZS5leHBvcnRzID0gYXBwbHlQcm9wZXJ0aWVzXG5cbmZ1bmN0aW9uIGFwcGx5UHJvcGVydGllcyhub2RlLCBwcm9wcywgcHJldmlvdXMpIHtcbiAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBwcm9wcykge1xuICAgICAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdXG5cbiAgICAgICAgaWYgKHByb3BWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZW1vdmVQcm9wZXJ0eShub2RlLCBwcm9wTmFtZSwgcHJvcFZhbHVlLCBwcmV2aW91cyk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNIb29rKHByb3BWYWx1ZSkpIHtcbiAgICAgICAgICAgIHJlbW92ZVByb3BlcnR5KG5vZGUsIHByb3BOYW1lLCBwcm9wVmFsdWUsIHByZXZpb3VzKVxuICAgICAgICAgICAgaWYgKHByb3BWYWx1ZS5ob29rKSB7XG4gICAgICAgICAgICAgICAgcHJvcFZhbHVlLmhvb2sobm9kZSxcbiAgICAgICAgICAgICAgICAgICAgcHJvcE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzID8gcHJldmlvdXNbcHJvcE5hbWVdIDogdW5kZWZpbmVkKVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGlzT2JqZWN0KHByb3BWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBwYXRjaE9iamVjdChub2RlLCBwcm9wcywgcHJldmlvdXMsIHByb3BOYW1lLCBwcm9wVmFsdWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBub2RlW3Byb3BOYW1lXSA9IHByb3BWYWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmVQcm9wZXJ0eShub2RlLCBwcm9wTmFtZSwgcHJvcFZhbHVlLCBwcmV2aW91cykge1xuICAgIGlmIChwcmV2aW91cykge1xuICAgICAgICB2YXIgcHJldmlvdXNWYWx1ZSA9IHByZXZpb3VzW3Byb3BOYW1lXVxuXG4gICAgICAgIGlmICghaXNIb29rKHByZXZpb3VzVmFsdWUpKSB7XG4gICAgICAgICAgICBpZiAocHJvcE5hbWUgPT09IFwiYXR0cmlidXRlc1wiKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYXR0ck5hbWUgaW4gcHJldmlvdXNWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShhdHRyTmFtZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHByb3BOYW1lID09PSBcInN0eWxlXCIpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIHByZXZpb3VzVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5zdHlsZVtpXSA9IFwiXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwcmV2aW91c1ZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgbm9kZVtwcm9wTmFtZV0gPSBcIlwiXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5vZGVbcHJvcE5hbWVdID0gbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHByZXZpb3VzVmFsdWUudW5ob29rKSB7XG4gICAgICAgICAgICBwcmV2aW91c1ZhbHVlLnVuaG9vayhub2RlLCBwcm9wTmFtZSwgcHJvcFZhbHVlKVxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBwYXRjaE9iamVjdChub2RlLCBwcm9wcywgcHJldmlvdXMsIHByb3BOYW1lLCBwcm9wVmFsdWUpIHtcbiAgICB2YXIgcHJldmlvdXNWYWx1ZSA9IHByZXZpb3VzID8gcHJldmlvdXNbcHJvcE5hbWVdIDogdW5kZWZpbmVkXG5cbiAgICAvLyBTZXQgYXR0cmlidXRlc1xuICAgIGlmIChwcm9wTmFtZSA9PT0gXCJhdHRyaWJ1dGVzXCIpIHtcbiAgICAgICAgZm9yICh2YXIgYXR0ck5hbWUgaW4gcHJvcFZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgYXR0clZhbHVlID0gcHJvcFZhbHVlW2F0dHJOYW1lXVxuXG4gICAgICAgICAgICBpZiAoYXR0clZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShhdHRyTmFtZSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoYXR0ck5hbWUsIGF0dHJWYWx1ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmKHByZXZpb3VzVmFsdWUgJiYgaXNPYmplY3QocHJldmlvdXNWYWx1ZSkgJiZcbiAgICAgICAgZ2V0UHJvdG90eXBlKHByZXZpb3VzVmFsdWUpICE9PSBnZXRQcm90b3R5cGUocHJvcFZhbHVlKSkge1xuICAgICAgICBub2RlW3Byb3BOYW1lXSA9IHByb3BWYWx1ZVxuICAgICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoIWlzT2JqZWN0KG5vZGVbcHJvcE5hbWVdKSkge1xuICAgICAgICBub2RlW3Byb3BOYW1lXSA9IHt9XG4gICAgfVxuXG4gICAgdmFyIHJlcGxhY2VyID0gcHJvcE5hbWUgPT09IFwic3R5bGVcIiA/IFwiXCIgOiB1bmRlZmluZWRcblxuICAgIGZvciAodmFyIGsgaW4gcHJvcFZhbHVlKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHByb3BWYWx1ZVtrXVxuICAgICAgICBub2RlW3Byb3BOYW1lXVtrXSA9ICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSA/IHJlcGxhY2VyIDogdmFsdWVcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldFByb3RvdHlwZSh2YWx1ZSkge1xuICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZih2YWx1ZSlcbiAgICB9IGVsc2UgaWYgKHZhbHVlLl9fcHJvdG9fXykge1xuICAgICAgICByZXR1cm4gdmFsdWUuX19wcm90b19fXG4gICAgfSBlbHNlIGlmICh2YWx1ZS5jb25zdHJ1Y3Rvcikge1xuICAgICAgICByZXR1cm4gdmFsdWUuY29uc3RydWN0b3IucHJvdG90eXBlXG4gICAgfVxufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdmlydHVhbC1kb20vdmRvbS9hcHBseS1wcm9wZXJ0aWVzLmpzXG4gKiogbW9kdWxlIGlkID0gMjZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBkb2N1bWVudCA9IHJlcXVpcmUoXCJnbG9iYWwvZG9jdW1lbnRcIilcblxudmFyIGFwcGx5UHJvcGVydGllcyA9IHJlcXVpcmUoXCIuL2FwcGx5LXByb3BlcnRpZXNcIilcblxudmFyIGlzVk5vZGUgPSByZXF1aXJlKFwiLi4vdm5vZGUvaXMtdm5vZGUuanNcIilcbnZhciBpc1ZUZXh0ID0gcmVxdWlyZShcIi4uL3Zub2RlL2lzLXZ0ZXh0LmpzXCIpXG52YXIgaXNXaWRnZXQgPSByZXF1aXJlKFwiLi4vdm5vZGUvaXMtd2lkZ2V0LmpzXCIpXG52YXIgaGFuZGxlVGh1bmsgPSByZXF1aXJlKFwiLi4vdm5vZGUvaGFuZGxlLXRodW5rLmpzXCIpXG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlRWxlbWVudFxuXG5mdW5jdGlvbiBjcmVhdGVFbGVtZW50KHZub2RlLCBvcHRzKSB7XG4gICAgdmFyIGRvYyA9IG9wdHMgPyBvcHRzLmRvY3VtZW50IHx8IGRvY3VtZW50IDogZG9jdW1lbnRcbiAgICB2YXIgd2FybiA9IG9wdHMgPyBvcHRzLndhcm4gOiBudWxsXG5cbiAgICB2bm9kZSA9IGhhbmRsZVRodW5rKHZub2RlKS5hXG5cbiAgICBpZiAoaXNXaWRnZXQodm5vZGUpKSB7XG4gICAgICAgIHJldHVybiB2bm9kZS5pbml0KClcbiAgICB9IGVsc2UgaWYgKGlzVlRleHQodm5vZGUpKSB7XG4gICAgICAgIHJldHVybiBkb2MuY3JlYXRlVGV4dE5vZGUodm5vZGUudGV4dClcbiAgICB9IGVsc2UgaWYgKCFpc1ZOb2RlKHZub2RlKSkge1xuICAgICAgICBpZiAod2Fybikge1xuICAgICAgICAgICAgd2FybihcIkl0ZW0gaXMgbm90IGEgdmFsaWQgdmlydHVhbCBkb20gbm9kZVwiLCB2bm9kZSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIHZhciBub2RlID0gKHZub2RlLm5hbWVzcGFjZSA9PT0gbnVsbCkgP1xuICAgICAgICBkb2MuY3JlYXRlRWxlbWVudCh2bm9kZS50YWdOYW1lKSA6XG4gICAgICAgIGRvYy5jcmVhdGVFbGVtZW50TlModm5vZGUubmFtZXNwYWNlLCB2bm9kZS50YWdOYW1lKVxuXG4gICAgdmFyIHByb3BzID0gdm5vZGUucHJvcGVydGllc1xuICAgIGFwcGx5UHJvcGVydGllcyhub2RlLCBwcm9wcylcblxuICAgIHZhciBjaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuXG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjaGlsZE5vZGUgPSBjcmVhdGVFbGVtZW50KGNoaWxkcmVuW2ldLCBvcHRzKVxuICAgICAgICBpZiAoY2hpbGROb2RlKSB7XG4gICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGNoaWxkTm9kZSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBub2RlXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92aXJ0dWFsLWRvbS92ZG9tL2NyZWF0ZS1lbGVtZW50LmpzXG4gKiogbW9kdWxlIGlkID0gMjdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc1ZOb2RlID0gcmVxdWlyZShcIi4vaXMtdm5vZGVcIilcbnZhciBpc1ZUZXh0ID0gcmVxdWlyZShcIi4vaXMtdnRleHRcIilcbnZhciBpc1dpZGdldCA9IHJlcXVpcmUoXCIuL2lzLXdpZGdldFwiKVxudmFyIGlzVGh1bmsgPSByZXF1aXJlKFwiLi9pcy10aHVua1wiKVxuXG5tb2R1bGUuZXhwb3J0cyA9IGhhbmRsZVRodW5rXG5cbmZ1bmN0aW9uIGhhbmRsZVRodW5rKGEsIGIpIHtcbiAgICB2YXIgcmVuZGVyZWRBID0gYVxuICAgIHZhciByZW5kZXJlZEIgPSBiXG5cbiAgICBpZiAoaXNUaHVuayhiKSkge1xuICAgICAgICByZW5kZXJlZEIgPSByZW5kZXJUaHVuayhiLCBhKVxuICAgIH1cblxuICAgIGlmIChpc1RodW5rKGEpKSB7XG4gICAgICAgIHJlbmRlcmVkQSA9IHJlbmRlclRodW5rKGEsIG51bGwpXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYTogcmVuZGVyZWRBLFxuICAgICAgICBiOiByZW5kZXJlZEJcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlbmRlclRodW5rKHRodW5rLCBwcmV2aW91cykge1xuICAgIHZhciByZW5kZXJlZFRodW5rID0gdGh1bmsudm5vZGVcblxuICAgIGlmICghcmVuZGVyZWRUaHVuaykge1xuICAgICAgICByZW5kZXJlZFRodW5rID0gdGh1bmsudm5vZGUgPSB0aHVuay5yZW5kZXIocHJldmlvdXMpXG4gICAgfVxuXG4gICAgaWYgKCEoaXNWTm9kZShyZW5kZXJlZFRodW5rKSB8fFxuICAgICAgICAgICAgaXNWVGV4dChyZW5kZXJlZFRodW5rKSB8fFxuICAgICAgICAgICAgaXNXaWRnZXQocmVuZGVyZWRUaHVuaykpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcInRodW5rIGRpZCBub3QgcmV0dXJuIGEgdmFsaWQgbm9kZVwiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVuZGVyZWRUaHVua1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdmlydHVhbC1kb20vdm5vZGUvaGFuZGxlLXRodW5rLmpzXG4gKiogbW9kdWxlIGlkID0gMjhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciB2ZXJzaW9uID0gcmVxdWlyZShcIi4vdmVyc2lvblwiKVxuXG5WaXJ0dWFsUGF0Y2guTk9ORSA9IDBcblZpcnR1YWxQYXRjaC5WVEVYVCA9IDFcblZpcnR1YWxQYXRjaC5WTk9ERSA9IDJcblZpcnR1YWxQYXRjaC5XSURHRVQgPSAzXG5WaXJ0dWFsUGF0Y2guUFJPUFMgPSA0XG5WaXJ0dWFsUGF0Y2guT1JERVIgPSA1XG5WaXJ0dWFsUGF0Y2guSU5TRVJUID0gNlxuVmlydHVhbFBhdGNoLlJFTU9WRSA9IDdcblZpcnR1YWxQYXRjaC5USFVOSyA9IDhcblxubW9kdWxlLmV4cG9ydHMgPSBWaXJ0dWFsUGF0Y2hcblxuZnVuY3Rpb24gVmlydHVhbFBhdGNoKHR5cGUsIHZOb2RlLCBwYXRjaCkge1xuICAgIHRoaXMudHlwZSA9IE51bWJlcih0eXBlKVxuICAgIHRoaXMudk5vZGUgPSB2Tm9kZVxuICAgIHRoaXMucGF0Y2ggPSBwYXRjaFxufVxuXG5WaXJ0dWFsUGF0Y2gucHJvdG90eXBlLnZlcnNpb24gPSB2ZXJzaW9uXG5WaXJ0dWFsUGF0Y2gucHJvdG90eXBlLnR5cGUgPSBcIlZpcnR1YWxQYXRjaFwiXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92aXJ0dWFsLWRvbS92bm9kZS92cGF0Y2guanNcbiAqKiBtb2R1bGUgaWQgPSAyOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgc2V0VGltZW91dChkcmFpblF1ZXVlLCAwKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbi8vIFRPRE8oc2h0eWxtYW4pXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4uLy5udm0vdmVyc2lvbnMvbm9kZS92MC4xMi4wL2xpYi9+L3dlYnBhY2svfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3Byb2Nlc3MvYnJvd3Nlci5qc1xuICoqIG1vZHVsZSBpZCA9IDMwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgcmFmID0gcmVxdWlyZShcInJhZlwiKVxudmFyIFR5cGVkRXJyb3IgPSByZXF1aXJlKFwiZXJyb3IvdHlwZWRcIilcblxudmFyIEludmFsaWRVcGRhdGVJblJlbmRlciA9IFR5cGVkRXJyb3Ioe1xuICAgIHR5cGU6IFwibWFpbi1sb29wLmludmFsaWQudXBkYXRlLmluLXJlbmRlclwiLFxuICAgIG1lc3NhZ2U6IFwibWFpbi1sb29wOiBVbmV4cGVjdGVkIHVwZGF0ZSBvY2N1cnJlZCBpbiBsb29wLlxcblwiICtcbiAgICAgICAgXCJXZSBhcmUgY3VycmVudGx5IHJlbmRlcmluZyBhIHZpZXcsIFwiICtcbiAgICAgICAgICAgIFwieW91IGNhbid0IGNoYW5nZSBzdGF0ZSByaWdodCBub3cuXFxuXCIgK1xuICAgICAgICBcIlRoZSBkaWZmIGlzOiB7c3RyaW5nRGlmZn0uXFxuXCIgK1xuICAgICAgICBcIlNVR0dFU1RFRCBGSVg6IGZpbmQgdGhlIHN0YXRlIG11dGF0aW9uIGluIHlvdXIgdmlldyBcIiArXG4gICAgICAgICAgICBcIm9yIHJlbmRlcmluZyBmdW5jdGlvbiBhbmQgcmVtb3ZlIGl0LlxcblwiICtcbiAgICAgICAgXCJUaGUgdmlldyBzaG91bGQgbm90IGhhdmUgYW55IHNpZGUgZWZmZWN0cy5cXG5cIixcbiAgICBkaWZmOiBudWxsLFxuICAgIHN0cmluZ0RpZmY6IG51bGxcbn0pXG5cbm1vZHVsZS5leHBvcnRzID0gbWFpblxuXG5mdW5jdGlvbiBtYWluKGluaXRpYWxTdGF0ZSwgdmlldywgb3B0cykge1xuICAgIG9wdHMgPSBvcHRzIHx8IHt9XG5cbiAgICB2YXIgY3VycmVudFN0YXRlID0gaW5pdGlhbFN0YXRlXG4gICAgdmFyIGNyZWF0ZSA9IG9wdHMuY3JlYXRlXG4gICAgdmFyIGRpZmYgPSBvcHRzLmRpZmZcbiAgICB2YXIgcGF0Y2ggPSBvcHRzLnBhdGNoXG4gICAgdmFyIHJlZHJhd1NjaGVkdWxlZCA9IGZhbHNlXG5cbiAgICB2YXIgdHJlZSA9IG9wdHMuaW5pdGlhbFRyZWUgfHwgdmlldyhjdXJyZW50U3RhdGUpXG4gICAgdmFyIHRhcmdldCA9IG9wdHMudGFyZ2V0IHx8IGNyZWF0ZSh0cmVlLCBvcHRzKVxuICAgIHZhciBpblJlbmRlcmluZ1RyYW5zYWN0aW9uID0gZmFsc2VcblxuICAgIGN1cnJlbnRTdGF0ZSA9IG51bGxcblxuICAgIHJldHVybiB7XG4gICAgICAgIHRhcmdldDogdGFyZ2V0LFxuICAgICAgICB1cGRhdGU6IHVwZGF0ZVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVwZGF0ZShzdGF0ZSkge1xuICAgICAgICBpZiAoaW5SZW5kZXJpbmdUcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgdGhyb3cgSW52YWxpZFVwZGF0ZUluUmVuZGVyKHtcbiAgICAgICAgICAgICAgICBkaWZmOiBzdGF0ZS5fZGlmZixcbiAgICAgICAgICAgICAgICBzdHJpbmdEaWZmOiBKU09OLnN0cmluZ2lmeShzdGF0ZS5fZGlmZilcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSBudWxsICYmICFyZWRyYXdTY2hlZHVsZWQpIHtcbiAgICAgICAgICAgIHJlZHJhd1NjaGVkdWxlZCA9IHRydWVcbiAgICAgICAgICAgIHJhZihyZWRyYXcpXG4gICAgICAgIH1cblxuICAgICAgICBjdXJyZW50U3RhdGUgPSBzdGF0ZVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlZHJhdygpIHtcbiAgICAgICAgcmVkcmF3U2NoZWR1bGVkID0gZmFsc2U7XG4gICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaW5SZW5kZXJpbmdUcmFuc2FjdGlvbiA9IHRydWVcbiAgICAgICAgdmFyIG5ld1RyZWUgPSB2aWV3KGN1cnJlbnRTdGF0ZSlcblxuICAgICAgICBpZiAob3B0cy5jcmVhdGVPbmx5KSB7XG4gICAgICAgICAgICBpblJlbmRlcmluZ1RyYW5zYWN0aW9uID0gZmFsc2VcbiAgICAgICAgICAgIGNyZWF0ZShuZXdUcmVlLCBvcHRzKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHBhdGNoZXMgPSBkaWZmKHRyZWUsIG5ld1RyZWUsIG9wdHMpXG4gICAgICAgICAgICBpblJlbmRlcmluZ1RyYW5zYWN0aW9uID0gZmFsc2VcbiAgICAgICAgICAgIHRhcmdldCA9IHBhdGNoKHRhcmdldCwgcGF0Y2hlcywgb3B0cylcbiAgICAgICAgfVxuXG4gICAgICAgIHRyZWUgPSBuZXdUcmVlXG4gICAgICAgIGN1cnJlbnRTdGF0ZSA9IG51bGxcbiAgICB9XG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9tYWluLWxvb3AvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA0NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ3N0cmluZycpIHJldHVybiBjYW1lbENhc2Uob2JqKTtcbiAgICByZXR1cm4gd2FsayhvYmopO1xufTtcblxuZnVuY3Rpb24gd2FsayAob2JqKSB7XG4gICAgaWYgKCFvYmogfHwgdHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHJldHVybiBvYmo7XG4gICAgaWYgKGlzRGF0ZShvYmopIHx8IGlzUmVnZXgob2JqKSkgcmV0dXJuIG9iajtcbiAgICBpZiAoaXNBcnJheShvYmopKSByZXR1cm4gbWFwKG9iaiwgd2Fsayk7XG4gICAgcmV0dXJuIHJlZHVjZShvYmplY3RLZXlzKG9iaiksIGZ1bmN0aW9uIChhY2MsIGtleSkge1xuICAgICAgICB2YXIgY2FtZWwgPSBjYW1lbENhc2Uoa2V5KTtcbiAgICAgICAgYWNjW2NhbWVsXSA9IHdhbGsob2JqW2tleV0pO1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9KTtcbn1cblxuZnVuY3Rpb24gY2FtZWxDYXNlKHN0cikge1xuICAgIHJldHVybiBzdHIucmVwbGFjZSgvW18uLV0oXFx3fCQpL2csIGZ1bmN0aW9uIChfLHgpIHtcbiAgICAgICAgcmV0dXJuIHgudG9VcHBlckNhc2UoKTtcbiAgICB9KTtcbn1cblxudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChvYmopIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuXG52YXIgaXNEYXRlID0gZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufTtcblxudmFyIGlzUmVnZXggPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBSZWdFeHBdJztcbn07XG5cbnZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiAob2JqKSB7XG4gICAgdmFyIGtleXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgIGlmIChoYXMuY2FsbChvYmosIGtleSkpIGtleXMucHVzaChrZXkpO1xuICAgIH1cbiAgICByZXR1cm4ga2V5cztcbn07XG5cbmZ1bmN0aW9uIG1hcCAoeHMsIGYpIHtcbiAgICBpZiAoeHMubWFwKSByZXR1cm4geHMubWFwKGYpO1xuICAgIHZhciByZXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHhzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJlcy5wdXNoKGYoeHNbaV0sIGkpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cblxuZnVuY3Rpb24gcmVkdWNlICh4cywgZiwgYWNjKSB7XG4gICAgaWYgKHhzLnJlZHVjZSkgcmV0dXJuIHhzLnJlZHVjZShmLCBhY2MpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYWNjID0gZihhY2MsIHhzW2ldLCBpKTtcbiAgICB9XG4gICAgcmV0dXJuIGFjYztcbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L21haW4tbG9vcC9+L2Vycm9yL34vY2FtZWxpemUvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA0NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIG5hcmdzID0gL1xceyhbMC05YS16QS1aXSspXFx9L2dcbnZhciBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRlbXBsYXRlXG5cbmZ1bmN0aW9uIHRlbXBsYXRlKHN0cmluZykge1xuICAgIHZhciBhcmdzXG5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMiAmJiB0eXBlb2YgYXJndW1lbnRzWzFdID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGFyZ3MgPSBhcmd1bWVudHNbMV1cbiAgICB9IGVsc2Uge1xuICAgICAgICBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpXG4gICAgfVxuXG4gICAgaWYgKCFhcmdzIHx8ICFhcmdzLmhhc093blByb3BlcnR5KSB7XG4gICAgICAgIGFyZ3MgPSB7fVxuICAgIH1cblxuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZShuYXJncywgZnVuY3Rpb24gcmVwbGFjZUFyZyhtYXRjaCwgaSwgaW5kZXgpIHtcbiAgICAgICAgdmFyIHJlc3VsdFxuXG4gICAgICAgIGlmIChzdHJpbmdbaW5kZXggLSAxXSA9PT0gXCJ7XCIgJiZcbiAgICAgICAgICAgIHN0cmluZ1tpbmRleCArIG1hdGNoLmxlbmd0aF0gPT09IFwifVwiKSB7XG4gICAgICAgICAgICByZXR1cm4gaVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0ID0gYXJncy5oYXNPd25Qcm9wZXJ0eShpKSA/IGFyZ3NbaV0gOiBudWxsXG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBudWxsIHx8IHJlc3VsdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiXCJcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICB9XG4gICAgfSlcbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L21haW4tbG9vcC9+L2Vycm9yL34vc3RyaW5nLXRlbXBsYXRlL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gNDZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gZXh0ZW5kXG5cbmZ1bmN0aW9uIGV4dGVuZCh0YXJnZXQpIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldXG5cbiAgICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldFxufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbWFpbi1sb29wL34vZXJyb3Ivfi94dGVuZC9tdXRhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gNDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBjYW1lbGl6ZSA9IHJlcXVpcmUoXCJjYW1lbGl6ZVwiKVxudmFyIHRlbXBsYXRlID0gcmVxdWlyZShcInN0cmluZy10ZW1wbGF0ZVwiKVxudmFyIGV4dGVuZCA9IHJlcXVpcmUoXCJ4dGVuZC9tdXRhYmxlXCIpXG5cbm1vZHVsZS5leHBvcnRzID0gVHlwZWRFcnJvclxuXG5mdW5jdGlvbiBUeXBlZEVycm9yKGFyZ3MpIHtcbiAgICBpZiAoIWFyZ3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYXJncyBpcyByZXF1aXJlZFwiKTtcbiAgICB9XG4gICAgaWYgKCFhcmdzLnR5cGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYXJncy50eXBlIGlzIHJlcXVpcmVkXCIpO1xuICAgIH1cbiAgICBpZiAoIWFyZ3MubWVzc2FnZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJhcmdzLm1lc3NhZ2UgaXMgcmVxdWlyZWRcIik7XG4gICAgfVxuXG4gICAgdmFyIG1lc3NhZ2UgPSBhcmdzLm1lc3NhZ2VcblxuICAgIGlmIChhcmdzLnR5cGUgJiYgIWFyZ3MubmFtZSkge1xuICAgICAgICB2YXIgZXJyb3JOYW1lID0gY2FtZWxpemUoYXJncy50eXBlKSArIFwiRXJyb3JcIlxuICAgICAgICBhcmdzLm5hbWUgPSBlcnJvck5hbWVbMF0udG9VcHBlckNhc2UoKSArIGVycm9yTmFtZS5zdWJzdHIoMSlcbiAgICB9XG5cbiAgICBleHRlbmQoY3JlYXRlRXJyb3IsIGFyZ3MpO1xuICAgIGNyZWF0ZUVycm9yLl9uYW1lID0gYXJncy5uYW1lO1xuXG4gICAgcmV0dXJuIGNyZWF0ZUVycm9yO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlRXJyb3Iob3B0cykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEVycm9yKClcblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocmVzdWx0LCBcInR5cGVcIiwge1xuICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC50eXBlLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH0pXG5cbiAgICAgICAgdmFyIG9wdGlvbnMgPSBleHRlbmQoe30sIGFyZ3MsIG9wdHMpXG5cbiAgICAgICAgZXh0ZW5kKHJlc3VsdCwgb3B0aW9ucylcbiAgICAgICAgcmVzdWx0Lm1lc3NhZ2UgPSB0ZW1wbGF0ZShtZXNzYWdlLCBvcHRpb25zKVxuXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICB9XG59XG5cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L21haW4tbG9vcC9+L2Vycm9yL3R5cGVkLmpzXG4gKiogbW9kdWxlIGlkID0gNDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBub3cgPSByZXF1aXJlKCdwZXJmb3JtYW5jZS1ub3cnKVxuICAsIGdsb2JhbCA9IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnID8ge30gOiB3aW5kb3dcbiAgLCB2ZW5kb3JzID0gWydtb3onLCAnd2Via2l0J11cbiAgLCBzdWZmaXggPSAnQW5pbWF0aW9uRnJhbWUnXG4gICwgcmFmID0gZ2xvYmFsWydyZXF1ZXN0JyArIHN1ZmZpeF1cbiAgLCBjYWYgPSBnbG9iYWxbJ2NhbmNlbCcgKyBzdWZmaXhdIHx8IGdsb2JhbFsnY2FuY2VsUmVxdWVzdCcgKyBzdWZmaXhdXG4gICwgaXNOYXRpdmUgPSB0cnVlXG5cbmZvcih2YXIgaSA9IDA7IGkgPCB2ZW5kb3JzLmxlbmd0aCAmJiAhcmFmOyBpKyspIHtcbiAgcmFmID0gZ2xvYmFsW3ZlbmRvcnNbaV0gKyAnUmVxdWVzdCcgKyBzdWZmaXhdXG4gIGNhZiA9IGdsb2JhbFt2ZW5kb3JzW2ldICsgJ0NhbmNlbCcgKyBzdWZmaXhdXG4gICAgICB8fCBnbG9iYWxbdmVuZG9yc1tpXSArICdDYW5jZWxSZXF1ZXN0JyArIHN1ZmZpeF1cbn1cblxuLy8gU29tZSB2ZXJzaW9ucyBvZiBGRiBoYXZlIHJBRiBidXQgbm90IGNBRlxuaWYoIXJhZiB8fCAhY2FmKSB7XG4gIGlzTmF0aXZlID0gZmFsc2VcblxuICB2YXIgbGFzdCA9IDBcbiAgICAsIGlkID0gMFxuICAgICwgcXVldWUgPSBbXVxuICAgICwgZnJhbWVEdXJhdGlvbiA9IDEwMDAgLyA2MFxuXG4gIHJhZiA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgaWYocXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgICB2YXIgX25vdyA9IG5vdygpXG4gICAgICAgICwgbmV4dCA9IE1hdGgubWF4KDAsIGZyYW1lRHVyYXRpb24gLSAoX25vdyAtIGxhc3QpKVxuICAgICAgbGFzdCA9IG5leHQgKyBfbm93XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY3AgPSBxdWV1ZS5zbGljZSgwKVxuICAgICAgICAvLyBDbGVhciBxdWV1ZSBoZXJlIHRvIHByZXZlbnRcbiAgICAgICAgLy8gY2FsbGJhY2tzIGZyb20gYXBwZW5kaW5nIGxpc3RlbmVyc1xuICAgICAgICAvLyB0byB0aGUgY3VycmVudCBmcmFtZSdzIHF1ZXVlXG4gICAgICAgIHF1ZXVlLmxlbmd0aCA9IDBcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGNwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYoIWNwW2ldLmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICBjcFtpXS5jYWxsYmFjayhsYXN0KVxuICAgICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IHRocm93IGUgfSwgMClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIE1hdGgucm91bmQobmV4dCkpXG4gICAgfVxuICAgIHF1ZXVlLnB1c2goe1xuICAgICAgaGFuZGxlOiArK2lkLFxuICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrLFxuICAgICAgY2FuY2VsbGVkOiBmYWxzZVxuICAgIH0pXG4gICAgcmV0dXJuIGlkXG4gIH1cblxuICBjYWYgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmKHF1ZXVlW2ldLmhhbmRsZSA9PT0gaGFuZGxlKSB7XG4gICAgICAgIHF1ZXVlW2ldLmNhbmNlbGxlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmbikge1xuICAvLyBXcmFwIGluIGEgbmV3IGZ1bmN0aW9uIHRvIHByZXZlbnRcbiAgLy8gYGNhbmNlbGAgcG90ZW50aWFsbHkgYmVpbmcgYXNzaWduZWRcbiAgLy8gdG8gdGhlIG5hdGl2ZSByQUYgZnVuY3Rpb25cbiAgaWYoIWlzTmF0aXZlKSB7XG4gICAgcmV0dXJuIHJhZi5jYWxsKGdsb2JhbCwgZm4pXG4gIH1cbiAgcmV0dXJuIHJhZi5jYWxsKGdsb2JhbCwgZnVuY3Rpb24oKSB7XG4gICAgdHJ5e1xuICAgICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAgIH0gY2F0Y2goZSkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgdGhyb3cgZSB9LCAwKVxuICAgIH1cbiAgfSlcbn1cbm1vZHVsZS5leHBvcnRzLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICBjYWYuYXBwbHkoZ2xvYmFsLCBhcmd1bWVudHMpXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9tYWluLWxvb3Avfi9yYWYvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA0OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjYuM1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgZ2V0TmFub1NlY29uZHMsIGhydGltZSwgbG9hZFRpbWU7XG5cbiAgaWYgKCh0eXBlb2YgcGVyZm9ybWFuY2UgIT09IFwidW5kZWZpbmVkXCIgJiYgcGVyZm9ybWFuY2UgIT09IG51bGwpICYmIHBlcmZvcm1hbmNlLm5vdykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgfTtcbiAgfSBlbHNlIGlmICgodHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgcHJvY2VzcyAhPT0gbnVsbCkgJiYgcHJvY2Vzcy5ocnRpbWUpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIChnZXROYW5vU2Vjb25kcygpIC0gbG9hZFRpbWUpIC8gMWU2O1xuICAgIH07XG4gICAgaHJ0aW1lID0gcHJvY2Vzcy5ocnRpbWU7XG4gICAgZ2V0TmFub1NlY29uZHMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBocjtcbiAgICAgIGhyID0gaHJ0aW1lKCk7XG4gICAgICByZXR1cm4gaHJbMF0gKiAxZTkgKyBoclsxXTtcbiAgICB9O1xuICAgIGxvYWRUaW1lID0gZ2V0TmFub1NlY29uZHMoKTtcbiAgfSBlbHNlIGlmIChEYXRlLm5vdykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gRGF0ZS5ub3coKSAtIGxvYWRUaW1lO1xuICAgIH07XG4gICAgbG9hZFRpbWUgPSBEYXRlLm5vdygpO1xuICB9IGVsc2Uge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBsb2FkVGltZTtcbiAgICB9O1xuICAgIGxvYWRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gIH1cblxufSkuY2FsbCh0aGlzKTtcblxuLypcbi8vQCBzb3VyY2VNYXBwaW5nVVJMPXBlcmZvcm1hbmNlLW5vdy5tYXBcbiovXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9tYWluLWxvb3Avfi9yYWYvfi9wZXJmb3JtYW5jZS1ub3cvbGliL3BlcmZvcm1hbmNlLW5vdy5qc1xuICoqIG1vZHVsZSBpZCA9IDUwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgY3JlYXRlRWxlbWVudCA9IHJlcXVpcmUoXCIuL3Zkb20vY3JlYXRlLWVsZW1lbnQuanNcIilcblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVFbGVtZW50XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92aXJ0dWFsLWRvbS9jcmVhdGUtZWxlbWVudC5qc1xuICoqIG1vZHVsZSBpZCA9IDUzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZGlmZiA9IHJlcXVpcmUoXCIuL3Z0cmVlL2RpZmYuanNcIilcblxubW9kdWxlLmV4cG9ydHMgPSBkaWZmXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92aXJ0dWFsLWRvbS9kaWZmLmpzXG4gKiogbW9kdWxlIGlkID0gNTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBwYXRjaCA9IHJlcXVpcmUoXCIuL3Zkb20vcGF0Y2guanNcIilcblxubW9kdWxlLmV4cG9ydHMgPSBwYXRjaFxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdmlydHVhbC1kb20vcGF0Y2guanNcbiAqKiBtb2R1bGUgaWQgPSA1NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gTWFwcyBhIHZpcnR1YWwgRE9NIHRyZWUgb250byBhIHJlYWwgRE9NIHRyZWUgaW4gYW4gZWZmaWNpZW50IG1hbm5lci5cbi8vIFdlIGRvbid0IHdhbnQgdG8gcmVhZCBhbGwgb2YgdGhlIERPTSBub2RlcyBpbiB0aGUgdHJlZSBzbyB3ZSB1c2Vcbi8vIHRoZSBpbi1vcmRlciB0cmVlIGluZGV4aW5nIHRvIGVsaW1pbmF0ZSByZWN1cnNpb24gZG93biBjZXJ0YWluIGJyYW5jaGVzLlxuLy8gV2Ugb25seSByZWN1cnNlIGludG8gYSBET00gbm9kZSBpZiB3ZSBrbm93IHRoYXQgaXQgY29udGFpbnMgYSBjaGlsZCBvZlxuLy8gaW50ZXJlc3QuXG5cbnZhciBub0NoaWxkID0ge31cblxubW9kdWxlLmV4cG9ydHMgPSBkb21JbmRleFxuXG5mdW5jdGlvbiBkb21JbmRleChyb290Tm9kZSwgdHJlZSwgaW5kaWNlcywgbm9kZXMpIHtcbiAgICBpZiAoIWluZGljZXMgfHwgaW5kaWNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHt9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaW5kaWNlcy5zb3J0KGFzY2VuZGluZylcbiAgICAgICAgcmV0dXJuIHJlY3Vyc2Uocm9vdE5vZGUsIHRyZWUsIGluZGljZXMsIG5vZGVzLCAwKVxuICAgIH1cbn1cblxuZnVuY3Rpb24gcmVjdXJzZShyb290Tm9kZSwgdHJlZSwgaW5kaWNlcywgbm9kZXMsIHJvb3RJbmRleCkge1xuICAgIG5vZGVzID0gbm9kZXMgfHwge31cblxuXG4gICAgaWYgKHJvb3ROb2RlKSB7XG4gICAgICAgIGlmIChpbmRleEluUmFuZ2UoaW5kaWNlcywgcm9vdEluZGV4LCByb290SW5kZXgpKSB7XG4gICAgICAgICAgICBub2Rlc1tyb290SW5kZXhdID0gcm9vdE5vZGVcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB2Q2hpbGRyZW4gPSB0cmVlLmNoaWxkcmVuXG5cbiAgICAgICAgaWYgKHZDaGlsZHJlbikge1xuXG4gICAgICAgICAgICB2YXIgY2hpbGROb2RlcyA9IHJvb3ROb2RlLmNoaWxkTm9kZXNcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmVlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcm9vdEluZGV4ICs9IDFcblxuICAgICAgICAgICAgICAgIHZhciB2Q2hpbGQgPSB2Q2hpbGRyZW5baV0gfHwgbm9DaGlsZFxuICAgICAgICAgICAgICAgIHZhciBuZXh0SW5kZXggPSByb290SW5kZXggKyAodkNoaWxkLmNvdW50IHx8IDApXG5cbiAgICAgICAgICAgICAgICAvLyBza2lwIHJlY3Vyc2lvbiBkb3duIHRoZSB0cmVlIGlmIHRoZXJlIGFyZSBubyBub2RlcyBkb3duIGhlcmVcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXhJblJhbmdlKGluZGljZXMsIHJvb3RJbmRleCwgbmV4dEluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICByZWN1cnNlKGNoaWxkTm9kZXNbaV0sIHZDaGlsZCwgaW5kaWNlcywgbm9kZXMsIHJvb3RJbmRleClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByb290SW5kZXggPSBuZXh0SW5kZXhcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBub2Rlc1xufVxuXG4vLyBCaW5hcnkgc2VhcmNoIGZvciBhbiBpbmRleCBpbiB0aGUgaW50ZXJ2YWwgW2xlZnQsIHJpZ2h0XVxuZnVuY3Rpb24gaW5kZXhJblJhbmdlKGluZGljZXMsIGxlZnQsIHJpZ2h0KSB7XG4gICAgaWYgKGluZGljZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIHZhciBtaW5JbmRleCA9IDBcbiAgICB2YXIgbWF4SW5kZXggPSBpbmRpY2VzLmxlbmd0aCAtIDFcbiAgICB2YXIgY3VycmVudEluZGV4XG4gICAgdmFyIGN1cnJlbnRJdGVtXG5cbiAgICB3aGlsZSAobWluSW5kZXggPD0gbWF4SW5kZXgpIHtcbiAgICAgICAgY3VycmVudEluZGV4ID0gKChtYXhJbmRleCArIG1pbkluZGV4KSAvIDIpID4+IDBcbiAgICAgICAgY3VycmVudEl0ZW0gPSBpbmRpY2VzW2N1cnJlbnRJbmRleF1cblxuICAgICAgICBpZiAobWluSW5kZXggPT09IG1heEluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudEl0ZW0gPj0gbGVmdCAmJiBjdXJyZW50SXRlbSA8PSByaWdodFxuICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRJdGVtIDwgbGVmdCkge1xuICAgICAgICAgICAgbWluSW5kZXggPSBjdXJyZW50SW5kZXggKyAxXG4gICAgICAgIH0gZWxzZSAgaWYgKGN1cnJlbnRJdGVtID4gcmlnaHQpIHtcbiAgICAgICAgICAgIG1heEluZGV4ID0gY3VycmVudEluZGV4IC0gMVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gYXNjZW5kaW5nKGEsIGIpIHtcbiAgICByZXR1cm4gYSA+IGIgPyAxIDogLTFcbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3ZpcnR1YWwtZG9tL3Zkb20vZG9tLWluZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gNTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBhcHBseVByb3BlcnRpZXMgPSByZXF1aXJlKFwiLi9hcHBseS1wcm9wZXJ0aWVzXCIpXG5cbnZhciBpc1dpZGdldCA9IHJlcXVpcmUoXCIuLi92bm9kZS9pcy13aWRnZXQuanNcIilcbnZhciBWUGF0Y2ggPSByZXF1aXJlKFwiLi4vdm5vZGUvdnBhdGNoLmpzXCIpXG5cbnZhciB1cGRhdGVXaWRnZXQgPSByZXF1aXJlKFwiLi91cGRhdGUtd2lkZ2V0XCIpXG5cbm1vZHVsZS5leHBvcnRzID0gYXBwbHlQYXRjaFxuXG5mdW5jdGlvbiBhcHBseVBhdGNoKHZwYXRjaCwgZG9tTm9kZSwgcmVuZGVyT3B0aW9ucykge1xuICAgIHZhciB0eXBlID0gdnBhdGNoLnR5cGVcbiAgICB2YXIgdk5vZGUgPSB2cGF0Y2gudk5vZGVcbiAgICB2YXIgcGF0Y2ggPSB2cGF0Y2gucGF0Y2hcblxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIFZQYXRjaC5SRU1PVkU6XG4gICAgICAgICAgICByZXR1cm4gcmVtb3ZlTm9kZShkb21Ob2RlLCB2Tm9kZSlcbiAgICAgICAgY2FzZSBWUGF0Y2guSU5TRVJUOlxuICAgICAgICAgICAgcmV0dXJuIGluc2VydE5vZGUoZG9tTm9kZSwgcGF0Y2gsIHJlbmRlck9wdGlvbnMpXG4gICAgICAgIGNhc2UgVlBhdGNoLlZURVhUOlxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZ1BhdGNoKGRvbU5vZGUsIHZOb2RlLCBwYXRjaCwgcmVuZGVyT3B0aW9ucylcbiAgICAgICAgY2FzZSBWUGF0Y2guV0lER0VUOlxuICAgICAgICAgICAgcmV0dXJuIHdpZGdldFBhdGNoKGRvbU5vZGUsIHZOb2RlLCBwYXRjaCwgcmVuZGVyT3B0aW9ucylcbiAgICAgICAgY2FzZSBWUGF0Y2guVk5PREU6XG4gICAgICAgICAgICByZXR1cm4gdk5vZGVQYXRjaChkb21Ob2RlLCB2Tm9kZSwgcGF0Y2gsIHJlbmRlck9wdGlvbnMpXG4gICAgICAgIGNhc2UgVlBhdGNoLk9SREVSOlxuICAgICAgICAgICAgcmVvcmRlckNoaWxkcmVuKGRvbU5vZGUsIHBhdGNoKVxuICAgICAgICAgICAgcmV0dXJuIGRvbU5vZGVcbiAgICAgICAgY2FzZSBWUGF0Y2guUFJPUFM6XG4gICAgICAgICAgICBhcHBseVByb3BlcnRpZXMoZG9tTm9kZSwgcGF0Y2gsIHZOb2RlLnByb3BlcnRpZXMpXG4gICAgICAgICAgICByZXR1cm4gZG9tTm9kZVxuICAgICAgICBjYXNlIFZQYXRjaC5USFVOSzpcbiAgICAgICAgICAgIHJldHVybiByZXBsYWNlUm9vdChkb21Ob2RlLFxuICAgICAgICAgICAgICAgIHJlbmRlck9wdGlvbnMucGF0Y2goZG9tTm9kZSwgcGF0Y2gsIHJlbmRlck9wdGlvbnMpKVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGRvbU5vZGVcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZU5vZGUoZG9tTm9kZSwgdk5vZGUpIHtcbiAgICB2YXIgcGFyZW50Tm9kZSA9IGRvbU5vZGUucGFyZW50Tm9kZVxuXG4gICAgaWYgKHBhcmVudE5vZGUpIHtcbiAgICAgICAgcGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkb21Ob2RlKVxuICAgIH1cblxuICAgIGRlc3Ryb3lXaWRnZXQoZG9tTm9kZSwgdk5vZGUpO1xuXG4gICAgcmV0dXJuIG51bGxcbn1cblxuZnVuY3Rpb24gaW5zZXJ0Tm9kZShwYXJlbnROb2RlLCB2Tm9kZSwgcmVuZGVyT3B0aW9ucykge1xuICAgIHZhciBuZXdOb2RlID0gcmVuZGVyT3B0aW9ucy5yZW5kZXIodk5vZGUsIHJlbmRlck9wdGlvbnMpXG5cbiAgICBpZiAocGFyZW50Tm9kZSkge1xuICAgICAgICBwYXJlbnROb2RlLmFwcGVuZENoaWxkKG5ld05vZGUpXG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcmVudE5vZGVcbn1cblxuZnVuY3Rpb24gc3RyaW5nUGF0Y2goZG9tTm9kZSwgbGVmdFZOb2RlLCB2VGV4dCwgcmVuZGVyT3B0aW9ucykge1xuICAgIHZhciBuZXdOb2RlXG5cbiAgICBpZiAoZG9tTm9kZS5ub2RlVHlwZSA9PT0gMykge1xuICAgICAgICBkb21Ob2RlLnJlcGxhY2VEYXRhKDAsIGRvbU5vZGUubGVuZ3RoLCB2VGV4dC50ZXh0KVxuICAgICAgICBuZXdOb2RlID0gZG9tTm9kZVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBwYXJlbnROb2RlID0gZG9tTm9kZS5wYXJlbnROb2RlXG4gICAgICAgIG5ld05vZGUgPSByZW5kZXJPcHRpb25zLnJlbmRlcih2VGV4dCwgcmVuZGVyT3B0aW9ucylcblxuICAgICAgICBpZiAocGFyZW50Tm9kZSAmJiBuZXdOb2RlICE9PSBkb21Ob2RlKSB7XG4gICAgICAgICAgICBwYXJlbnROb2RlLnJlcGxhY2VDaGlsZChuZXdOb2RlLCBkb21Ob2RlKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ld05vZGVcbn1cblxuZnVuY3Rpb24gd2lkZ2V0UGF0Y2goZG9tTm9kZSwgbGVmdFZOb2RlLCB3aWRnZXQsIHJlbmRlck9wdGlvbnMpIHtcbiAgICB2YXIgdXBkYXRpbmcgPSB1cGRhdGVXaWRnZXQobGVmdFZOb2RlLCB3aWRnZXQpXG4gICAgdmFyIG5ld05vZGVcblxuICAgIGlmICh1cGRhdGluZykge1xuICAgICAgICBuZXdOb2RlID0gd2lkZ2V0LnVwZGF0ZShsZWZ0Vk5vZGUsIGRvbU5vZGUpIHx8IGRvbU5vZGVcbiAgICB9IGVsc2Uge1xuICAgICAgICBuZXdOb2RlID0gcmVuZGVyT3B0aW9ucy5yZW5kZXIod2lkZ2V0LCByZW5kZXJPcHRpb25zKVxuICAgIH1cblxuICAgIHZhciBwYXJlbnROb2RlID0gZG9tTm9kZS5wYXJlbnROb2RlXG5cbiAgICBpZiAocGFyZW50Tm9kZSAmJiBuZXdOb2RlICE9PSBkb21Ob2RlKSB7XG4gICAgICAgIHBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld05vZGUsIGRvbU5vZGUpXG4gICAgfVxuXG4gICAgaWYgKCF1cGRhdGluZykge1xuICAgICAgICBkZXN0cm95V2lkZ2V0KGRvbU5vZGUsIGxlZnRWTm9kZSlcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3Tm9kZVxufVxuXG5mdW5jdGlvbiB2Tm9kZVBhdGNoKGRvbU5vZGUsIGxlZnRWTm9kZSwgdk5vZGUsIHJlbmRlck9wdGlvbnMpIHtcbiAgICB2YXIgcGFyZW50Tm9kZSA9IGRvbU5vZGUucGFyZW50Tm9kZVxuICAgIHZhciBuZXdOb2RlID0gcmVuZGVyT3B0aW9ucy5yZW5kZXIodk5vZGUsIHJlbmRlck9wdGlvbnMpXG5cbiAgICBpZiAocGFyZW50Tm9kZSAmJiBuZXdOb2RlICE9PSBkb21Ob2RlKSB7XG4gICAgICAgIHBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld05vZGUsIGRvbU5vZGUpXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ld05vZGVcbn1cblxuZnVuY3Rpb24gZGVzdHJveVdpZGdldChkb21Ob2RlLCB3KSB7XG4gICAgaWYgKHR5cGVvZiB3LmRlc3Ryb3kgPT09IFwiZnVuY3Rpb25cIiAmJiBpc1dpZGdldCh3KSkge1xuICAgICAgICB3LmRlc3Ryb3koZG9tTm9kZSlcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlb3JkZXJDaGlsZHJlbihkb21Ob2RlLCBtb3Zlcykge1xuICAgIHZhciBjaGlsZE5vZGVzID0gZG9tTm9kZS5jaGlsZE5vZGVzXG4gICAgdmFyIGtleU1hcCA9IHt9XG4gICAgdmFyIG5vZGVcbiAgICB2YXIgcmVtb3ZlXG4gICAgdmFyIGluc2VydFxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb3Zlcy5yZW1vdmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJlbW92ZSA9IG1vdmVzLnJlbW92ZXNbaV1cbiAgICAgICAgbm9kZSA9IGNoaWxkTm9kZXNbcmVtb3ZlLmZyb21dXG4gICAgICAgIGlmIChyZW1vdmUua2V5KSB7XG4gICAgICAgICAgICBrZXlNYXBbcmVtb3ZlLmtleV0gPSBub2RlXG4gICAgICAgIH1cbiAgICAgICAgZG9tTm9kZS5yZW1vdmVDaGlsZChub2RlKVxuICAgIH1cblxuICAgIHZhciBsZW5ndGggPSBjaGlsZE5vZGVzLmxlbmd0aFxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgbW92ZXMuaW5zZXJ0cy5sZW5ndGg7IGorKykge1xuICAgICAgICBpbnNlcnQgPSBtb3Zlcy5pbnNlcnRzW2pdXG4gICAgICAgIG5vZGUgPSBrZXlNYXBbaW5zZXJ0LmtleV1cbiAgICAgICAgLy8gdGhpcyBpcyB0aGUgd2VpcmRlc3QgYnVnIGkndmUgZXZlciBzZWVuIGluIHdlYmtpdFxuICAgICAgICBkb21Ob2RlLmluc2VydEJlZm9yZShub2RlLCBpbnNlcnQudG8gPj0gbGVuZ3RoKysgPyBudWxsIDogY2hpbGROb2Rlc1tpbnNlcnQudG9dKVxuICAgIH1cbn1cblxuZnVuY3Rpb24gcmVwbGFjZVJvb3Qob2xkUm9vdCwgbmV3Um9vdCkge1xuICAgIGlmIChvbGRSb290ICYmIG5ld1Jvb3QgJiYgb2xkUm9vdCAhPT0gbmV3Um9vdCAmJiBvbGRSb290LnBhcmVudE5vZGUpIHtcbiAgICAgICAgb2xkUm9vdC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChuZXdSb290LCBvbGRSb290KVxuICAgIH1cblxuICAgIHJldHVybiBuZXdSb290O1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdmlydHVhbC1kb20vdmRvbS9wYXRjaC1vcC5qc1xuICoqIG1vZHVsZSBpZCA9IDU3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZG9jdW1lbnQgPSByZXF1aXJlKFwiZ2xvYmFsL2RvY3VtZW50XCIpXG52YXIgaXNBcnJheSA9IHJlcXVpcmUoXCJ4LWlzLWFycmF5XCIpXG5cbnZhciByZW5kZXIgPSByZXF1aXJlKFwiLi9jcmVhdGUtZWxlbWVudFwiKVxudmFyIGRvbUluZGV4ID0gcmVxdWlyZShcIi4vZG9tLWluZGV4XCIpXG52YXIgcGF0Y2hPcCA9IHJlcXVpcmUoXCIuL3BhdGNoLW9wXCIpXG5tb2R1bGUuZXhwb3J0cyA9IHBhdGNoXG5cbmZ1bmN0aW9uIHBhdGNoKHJvb3ROb2RlLCBwYXRjaGVzLCByZW5kZXJPcHRpb25zKSB7XG4gICAgcmVuZGVyT3B0aW9ucyA9IHJlbmRlck9wdGlvbnMgfHwge31cbiAgICByZW5kZXJPcHRpb25zLnBhdGNoID0gcmVuZGVyT3B0aW9ucy5wYXRjaCAmJiByZW5kZXJPcHRpb25zLnBhdGNoICE9PSBwYXRjaFxuICAgICAgICA/IHJlbmRlck9wdGlvbnMucGF0Y2hcbiAgICAgICAgOiBwYXRjaFJlY3Vyc2l2ZVxuICAgIHJlbmRlck9wdGlvbnMucmVuZGVyID0gcmVuZGVyT3B0aW9ucy5yZW5kZXIgfHwgcmVuZGVyXG5cbiAgICByZXR1cm4gcmVuZGVyT3B0aW9ucy5wYXRjaChyb290Tm9kZSwgcGF0Y2hlcywgcmVuZGVyT3B0aW9ucylcbn1cblxuZnVuY3Rpb24gcGF0Y2hSZWN1cnNpdmUocm9vdE5vZGUsIHBhdGNoZXMsIHJlbmRlck9wdGlvbnMpIHtcbiAgICB2YXIgaW5kaWNlcyA9IHBhdGNoSW5kaWNlcyhwYXRjaGVzKVxuXG4gICAgaWYgKGluZGljZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiByb290Tm9kZVxuICAgIH1cblxuICAgIHZhciBpbmRleCA9IGRvbUluZGV4KHJvb3ROb2RlLCBwYXRjaGVzLmEsIGluZGljZXMpXG4gICAgdmFyIG93bmVyRG9jdW1lbnQgPSByb290Tm9kZS5vd25lckRvY3VtZW50XG5cbiAgICBpZiAoIXJlbmRlck9wdGlvbnMuZG9jdW1lbnQgJiYgb3duZXJEb2N1bWVudCAhPT0gZG9jdW1lbnQpIHtcbiAgICAgICAgcmVuZGVyT3B0aW9ucy5kb2N1bWVudCA9IG93bmVyRG9jdW1lbnRcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluZGljZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIG5vZGVJbmRleCA9IGluZGljZXNbaV1cbiAgICAgICAgcm9vdE5vZGUgPSBhcHBseVBhdGNoKHJvb3ROb2RlLFxuICAgICAgICAgICAgaW5kZXhbbm9kZUluZGV4XSxcbiAgICAgICAgICAgIHBhdGNoZXNbbm9kZUluZGV4XSxcbiAgICAgICAgICAgIHJlbmRlck9wdGlvbnMpXG4gICAgfVxuXG4gICAgcmV0dXJuIHJvb3ROb2RlXG59XG5cbmZ1bmN0aW9uIGFwcGx5UGF0Y2gocm9vdE5vZGUsIGRvbU5vZGUsIHBhdGNoTGlzdCwgcmVuZGVyT3B0aW9ucykge1xuICAgIGlmICghZG9tTm9kZSkge1xuICAgICAgICByZXR1cm4gcm9vdE5vZGVcbiAgICB9XG5cbiAgICB2YXIgbmV3Tm9kZVxuXG4gICAgaWYgKGlzQXJyYXkocGF0Y2hMaXN0KSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGNoTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbmV3Tm9kZSA9IHBhdGNoT3AocGF0Y2hMaXN0W2ldLCBkb21Ob2RlLCByZW5kZXJPcHRpb25zKVxuXG4gICAgICAgICAgICBpZiAoZG9tTm9kZSA9PT0gcm9vdE5vZGUpIHtcbiAgICAgICAgICAgICAgICByb290Tm9kZSA9IG5ld05vZGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld05vZGUgPSBwYXRjaE9wKHBhdGNoTGlzdCwgZG9tTm9kZSwgcmVuZGVyT3B0aW9ucylcblxuICAgICAgICBpZiAoZG9tTm9kZSA9PT0gcm9vdE5vZGUpIHtcbiAgICAgICAgICAgIHJvb3ROb2RlID0gbmV3Tm9kZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJvb3ROb2RlXG59XG5cbmZ1bmN0aW9uIHBhdGNoSW5kaWNlcyhwYXRjaGVzKSB7XG4gICAgdmFyIGluZGljZXMgPSBbXVxuXG4gICAgZm9yICh2YXIga2V5IGluIHBhdGNoZXMpIHtcbiAgICAgICAgaWYgKGtleSAhPT0gXCJhXCIpIHtcbiAgICAgICAgICAgIGluZGljZXMucHVzaChOdW1iZXIoa2V5KSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBpbmRpY2VzXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92aXJ0dWFsLWRvbS92ZG9tL3BhdGNoLmpzXG4gKiogbW9kdWxlIGlkID0gNThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc1dpZGdldCA9IHJlcXVpcmUoXCIuLi92bm9kZS9pcy13aWRnZXQuanNcIilcblxubW9kdWxlLmV4cG9ydHMgPSB1cGRhdGVXaWRnZXRcblxuZnVuY3Rpb24gdXBkYXRlV2lkZ2V0KGEsIGIpIHtcbiAgICBpZiAoaXNXaWRnZXQoYSkgJiYgaXNXaWRnZXQoYikpIHtcbiAgICAgICAgaWYgKFwibmFtZVwiIGluIGEgJiYgXCJuYW1lXCIgaW4gYikge1xuICAgICAgICAgICAgcmV0dXJuIGEuaWQgPT09IGIuaWRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBhLmluaXQgPT09IGIuaW5pdFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92aXJ0dWFsLWRvbS92ZG9tL3VwZGF0ZS13aWRnZXQuanNcbiAqKiBtb2R1bGUgaWQgPSA1OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzT2JqZWN0ID0gcmVxdWlyZShcImlzLW9iamVjdFwiKVxudmFyIGlzSG9vayA9IHJlcXVpcmUoXCIuLi92bm9kZS9pcy12aG9va1wiKVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRpZmZQcm9wc1xuXG5mdW5jdGlvbiBkaWZmUHJvcHMoYSwgYikge1xuICAgIHZhciBkaWZmXG5cbiAgICBmb3IgKHZhciBhS2V5IGluIGEpIHtcbiAgICAgICAgaWYgKCEoYUtleSBpbiBiKSkge1xuICAgICAgICAgICAgZGlmZiA9IGRpZmYgfHwge31cbiAgICAgICAgICAgIGRpZmZbYUtleV0gPSB1bmRlZmluZWRcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhVmFsdWUgPSBhW2FLZXldXG4gICAgICAgIHZhciBiVmFsdWUgPSBiW2FLZXldXG5cbiAgICAgICAgaWYgKGFWYWx1ZSA9PT0gYlZhbHVlKSB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KGFWYWx1ZSkgJiYgaXNPYmplY3QoYlZhbHVlKSkge1xuICAgICAgICAgICAgaWYgKGdldFByb3RvdHlwZShiVmFsdWUpICE9PSBnZXRQcm90b3R5cGUoYVZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGRpZmYgPSBkaWZmIHx8IHt9XG4gICAgICAgICAgICAgICAgZGlmZlthS2V5XSA9IGJWYWx1ZVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0hvb2soYlZhbHVlKSkge1xuICAgICAgICAgICAgICAgICBkaWZmID0gZGlmZiB8fCB7fVxuICAgICAgICAgICAgICAgICBkaWZmW2FLZXldID0gYlZhbHVlXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBvYmplY3REaWZmID0gZGlmZlByb3BzKGFWYWx1ZSwgYlZhbHVlKVxuICAgICAgICAgICAgICAgIGlmIChvYmplY3REaWZmKSB7XG4gICAgICAgICAgICAgICAgICAgIGRpZmYgPSBkaWZmIHx8IHt9XG4gICAgICAgICAgICAgICAgICAgIGRpZmZbYUtleV0gPSBvYmplY3REaWZmXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGlmZiA9IGRpZmYgfHwge31cbiAgICAgICAgICAgIGRpZmZbYUtleV0gPSBiVmFsdWVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIGJLZXkgaW4gYikge1xuICAgICAgICBpZiAoIShiS2V5IGluIGEpKSB7XG4gICAgICAgICAgICBkaWZmID0gZGlmZiB8fCB7fVxuICAgICAgICAgICAgZGlmZltiS2V5XSA9IGJbYktleV1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBkaWZmXG59XG5cbmZ1bmN0aW9uIGdldFByb3RvdHlwZSh2YWx1ZSkge1xuICBpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKSB7XG4gICAgcmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZih2YWx1ZSlcbiAgfSBlbHNlIGlmICh2YWx1ZS5fX3Byb3RvX18pIHtcbiAgICByZXR1cm4gdmFsdWUuX19wcm90b19fXG4gIH0gZWxzZSBpZiAodmFsdWUuY29uc3RydWN0b3IpIHtcbiAgICByZXR1cm4gdmFsdWUuY29uc3RydWN0b3IucHJvdG90eXBlXG4gIH1cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3ZpcnR1YWwtZG9tL3Z0cmVlL2RpZmYtcHJvcHMuanNcbiAqKiBtb2R1bGUgaWQgPSA2MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzQXJyYXkgPSByZXF1aXJlKFwieC1pcy1hcnJheVwiKVxuXG52YXIgVlBhdGNoID0gcmVxdWlyZShcIi4uL3Zub2RlL3ZwYXRjaFwiKVxudmFyIGlzVk5vZGUgPSByZXF1aXJlKFwiLi4vdm5vZGUvaXMtdm5vZGVcIilcbnZhciBpc1ZUZXh0ID0gcmVxdWlyZShcIi4uL3Zub2RlL2lzLXZ0ZXh0XCIpXG52YXIgaXNXaWRnZXQgPSByZXF1aXJlKFwiLi4vdm5vZGUvaXMtd2lkZ2V0XCIpXG52YXIgaXNUaHVuayA9IHJlcXVpcmUoXCIuLi92bm9kZS9pcy10aHVua1wiKVxudmFyIGhhbmRsZVRodW5rID0gcmVxdWlyZShcIi4uL3Zub2RlL2hhbmRsZS10aHVua1wiKVxuXG52YXIgZGlmZlByb3BzID0gcmVxdWlyZShcIi4vZGlmZi1wcm9wc1wiKVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRpZmZcblxuZnVuY3Rpb24gZGlmZihhLCBiKSB7XG4gICAgdmFyIHBhdGNoID0geyBhOiBhIH1cbiAgICB3YWxrKGEsIGIsIHBhdGNoLCAwKVxuICAgIHJldHVybiBwYXRjaFxufVxuXG5mdW5jdGlvbiB3YWxrKGEsIGIsIHBhdGNoLCBpbmRleCkge1xuICAgIGlmIChhID09PSBiKSB7XG4gICAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHZhciBhcHBseSA9IHBhdGNoW2luZGV4XVxuICAgIHZhciBhcHBseUNsZWFyID0gZmFsc2VcblxuICAgIGlmIChpc1RodW5rKGEpIHx8IGlzVGh1bmsoYikpIHtcbiAgICAgICAgdGh1bmtzKGEsIGIsIHBhdGNoLCBpbmRleClcbiAgICB9IGVsc2UgaWYgKGIgPT0gbnVsbCkge1xuXG4gICAgICAgIC8vIElmIGEgaXMgYSB3aWRnZXQgd2Ugd2lsbCBhZGQgYSByZW1vdmUgcGF0Y2ggZm9yIGl0XG4gICAgICAgIC8vIE90aGVyd2lzZSBhbnkgY2hpbGQgd2lkZ2V0cy9ob29rcyBtdXN0IGJlIGRlc3Ryb3llZC5cbiAgICAgICAgLy8gVGhpcyBwcmV2ZW50cyBhZGRpbmcgdHdvIHJlbW92ZSBwYXRjaGVzIGZvciBhIHdpZGdldC5cbiAgICAgICAgaWYgKCFpc1dpZGdldChhKSkge1xuICAgICAgICAgICAgY2xlYXJTdGF0ZShhLCBwYXRjaCwgaW5kZXgpXG4gICAgICAgICAgICBhcHBseSA9IHBhdGNoW2luZGV4XVxuICAgICAgICB9XG5cbiAgICAgICAgYXBwbHkgPSBhcHBlbmRQYXRjaChhcHBseSwgbmV3IFZQYXRjaChWUGF0Y2guUkVNT1ZFLCBhLCBiKSlcbiAgICB9IGVsc2UgaWYgKGlzVk5vZGUoYikpIHtcbiAgICAgICAgaWYgKGlzVk5vZGUoYSkpIHtcbiAgICAgICAgICAgIGlmIChhLnRhZ05hbWUgPT09IGIudGFnTmFtZSAmJlxuICAgICAgICAgICAgICAgIGEubmFtZXNwYWNlID09PSBiLm5hbWVzcGFjZSAmJlxuICAgICAgICAgICAgICAgIGEua2V5ID09PSBiLmtleSkge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wc1BhdGNoID0gZGlmZlByb3BzKGEucHJvcGVydGllcywgYi5wcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgIGlmIChwcm9wc1BhdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGFwcGx5ID0gYXBwZW5kUGF0Y2goYXBwbHksXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgVlBhdGNoKFZQYXRjaC5QUk9QUywgYSwgcHJvcHNQYXRjaCkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFwcGx5ID0gZGlmZkNoaWxkcmVuKGEsIGIsIHBhdGNoLCBhcHBseSwgaW5kZXgpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFwcGx5ID0gYXBwZW5kUGF0Y2goYXBwbHksIG5ldyBWUGF0Y2goVlBhdGNoLlZOT0RFLCBhLCBiKSlcbiAgICAgICAgICAgICAgICBhcHBseUNsZWFyID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXBwbHkgPSBhcHBlbmRQYXRjaChhcHBseSwgbmV3IFZQYXRjaChWUGF0Y2guVk5PREUsIGEsIGIpKVxuICAgICAgICAgICAgYXBwbHlDbGVhciA9IHRydWVcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNWVGV4dChiKSkge1xuICAgICAgICBpZiAoIWlzVlRleHQoYSkpIHtcbiAgICAgICAgICAgIGFwcGx5ID0gYXBwZW5kUGF0Y2goYXBwbHksIG5ldyBWUGF0Y2goVlBhdGNoLlZURVhULCBhLCBiKSlcbiAgICAgICAgICAgIGFwcGx5Q2xlYXIgPSB0cnVlXG4gICAgICAgIH0gZWxzZSBpZiAoYS50ZXh0ICE9PSBiLnRleHQpIHtcbiAgICAgICAgICAgIGFwcGx5ID0gYXBwZW5kUGF0Y2goYXBwbHksIG5ldyBWUGF0Y2goVlBhdGNoLlZURVhULCBhLCBiKSlcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNXaWRnZXQoYikpIHtcbiAgICAgICAgaWYgKCFpc1dpZGdldChhKSkge1xuICAgICAgICAgICAgYXBwbHlDbGVhciA9IHRydWVcbiAgICAgICAgfVxuXG4gICAgICAgIGFwcGx5ID0gYXBwZW5kUGF0Y2goYXBwbHksIG5ldyBWUGF0Y2goVlBhdGNoLldJREdFVCwgYSwgYikpXG4gICAgfVxuXG4gICAgaWYgKGFwcGx5KSB7XG4gICAgICAgIHBhdGNoW2luZGV4XSA9IGFwcGx5XG4gICAgfVxuXG4gICAgaWYgKGFwcGx5Q2xlYXIpIHtcbiAgICAgICAgY2xlYXJTdGF0ZShhLCBwYXRjaCwgaW5kZXgpXG4gICAgfVxufVxuXG5mdW5jdGlvbiBkaWZmQ2hpbGRyZW4oYSwgYiwgcGF0Y2gsIGFwcGx5LCBpbmRleCkge1xuICAgIHZhciBhQ2hpbGRyZW4gPSBhLmNoaWxkcmVuXG4gICAgdmFyIG9yZGVyZWRTZXQgPSByZW9yZGVyKGFDaGlsZHJlbiwgYi5jaGlsZHJlbilcbiAgICB2YXIgYkNoaWxkcmVuID0gb3JkZXJlZFNldC5jaGlsZHJlblxuXG4gICAgdmFyIGFMZW4gPSBhQ2hpbGRyZW4ubGVuZ3RoXG4gICAgdmFyIGJMZW4gPSBiQ2hpbGRyZW4ubGVuZ3RoXG4gICAgdmFyIGxlbiA9IGFMZW4gPiBiTGVuID8gYUxlbiA6IGJMZW5cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIGxlZnROb2RlID0gYUNoaWxkcmVuW2ldXG4gICAgICAgIHZhciByaWdodE5vZGUgPSBiQ2hpbGRyZW5baV1cbiAgICAgICAgaW5kZXggKz0gMVxuXG4gICAgICAgIGlmICghbGVmdE5vZGUpIHtcbiAgICAgICAgICAgIGlmIChyaWdodE5vZGUpIHtcbiAgICAgICAgICAgICAgICAvLyBFeGNlc3Mgbm9kZXMgaW4gYiBuZWVkIHRvIGJlIGFkZGVkXG4gICAgICAgICAgICAgICAgYXBwbHkgPSBhcHBlbmRQYXRjaChhcHBseSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZQYXRjaChWUGF0Y2guSU5TRVJULCBudWxsLCByaWdodE5vZGUpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgd2FsayhsZWZ0Tm9kZSwgcmlnaHROb2RlLCBwYXRjaCwgaW5kZXgpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNWTm9kZShsZWZ0Tm9kZSkgJiYgbGVmdE5vZGUuY291bnQpIHtcbiAgICAgICAgICAgIGluZGV4ICs9IGxlZnROb2RlLmNvdW50XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAob3JkZXJlZFNldC5tb3Zlcykge1xuICAgICAgICAvLyBSZW9yZGVyIG5vZGVzIGxhc3RcbiAgICAgICAgYXBwbHkgPSBhcHBlbmRQYXRjaChhcHBseSwgbmV3IFZQYXRjaChcbiAgICAgICAgICAgIFZQYXRjaC5PUkRFUixcbiAgICAgICAgICAgIGEsXG4gICAgICAgICAgICBvcmRlcmVkU2V0Lm1vdmVzXG4gICAgICAgICkpXG4gICAgfVxuXG4gICAgcmV0dXJuIGFwcGx5XG59XG5cbmZ1bmN0aW9uIGNsZWFyU3RhdGUodk5vZGUsIHBhdGNoLCBpbmRleCkge1xuICAgIC8vIFRPRE86IE1ha2UgdGhpcyBhIHNpbmdsZSB3YWxrLCBub3QgdHdvXG4gICAgdW5ob29rKHZOb2RlLCBwYXRjaCwgaW5kZXgpXG4gICAgZGVzdHJveVdpZGdldHModk5vZGUsIHBhdGNoLCBpbmRleClcbn1cblxuLy8gUGF0Y2ggcmVjb3JkcyBmb3IgYWxsIGRlc3Ryb3llZCB3aWRnZXRzIG11c3QgYmUgYWRkZWQgYmVjYXVzZSB3ZSBuZWVkXG4vLyBhIERPTSBub2RlIHJlZmVyZW5jZSBmb3IgdGhlIGRlc3Ryb3kgZnVuY3Rpb25cbmZ1bmN0aW9uIGRlc3Ryb3lXaWRnZXRzKHZOb2RlLCBwYXRjaCwgaW5kZXgpIHtcbiAgICBpZiAoaXNXaWRnZXQodk5vZGUpKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygdk5vZGUuZGVzdHJveSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBwYXRjaFtpbmRleF0gPSBhcHBlbmRQYXRjaChcbiAgICAgICAgICAgICAgICBwYXRjaFtpbmRleF0sXG4gICAgICAgICAgICAgICAgbmV3IFZQYXRjaChWUGF0Y2guUkVNT1ZFLCB2Tm9kZSwgbnVsbClcbiAgICAgICAgICAgIClcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNWTm9kZSh2Tm9kZSkgJiYgKHZOb2RlLmhhc1dpZGdldHMgfHwgdk5vZGUuaGFzVGh1bmtzKSkge1xuICAgICAgICB2YXIgY2hpbGRyZW4gPSB2Tm9kZS5jaGlsZHJlblxuICAgICAgICB2YXIgbGVuID0gY2hpbGRyZW4ubGVuZ3RoXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuW2ldXG4gICAgICAgICAgICBpbmRleCArPSAxXG5cbiAgICAgICAgICAgIGRlc3Ryb3lXaWRnZXRzKGNoaWxkLCBwYXRjaCwgaW5kZXgpXG5cbiAgICAgICAgICAgIGlmIChpc1ZOb2RlKGNoaWxkKSAmJiBjaGlsZC5jb3VudCkge1xuICAgICAgICAgICAgICAgIGluZGV4ICs9IGNoaWxkLmNvdW50XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzVGh1bmsodk5vZGUpKSB7XG4gICAgICAgIHRodW5rcyh2Tm9kZSwgbnVsbCwgcGF0Y2gsIGluZGV4KVxuICAgIH1cbn1cblxuLy8gQ3JlYXRlIGEgc3ViLXBhdGNoIGZvciB0aHVua3NcbmZ1bmN0aW9uIHRodW5rcyhhLCBiLCBwYXRjaCwgaW5kZXgpIHtcbiAgICB2YXIgbm9kZXMgPSBoYW5kbGVUaHVuayhhLCBiKVxuICAgIHZhciB0aHVua1BhdGNoID0gZGlmZihub2Rlcy5hLCBub2Rlcy5iKVxuICAgIGlmIChoYXNQYXRjaGVzKHRodW5rUGF0Y2gpKSB7XG4gICAgICAgIHBhdGNoW2luZGV4XSA9IG5ldyBWUGF0Y2goVlBhdGNoLlRIVU5LLCBudWxsLCB0aHVua1BhdGNoKVxuICAgIH1cbn1cblxuZnVuY3Rpb24gaGFzUGF0Y2hlcyhwYXRjaCkge1xuICAgIGZvciAodmFyIGluZGV4IGluIHBhdGNoKSB7XG4gICAgICAgIGlmIChpbmRleCAhPT0gXCJhXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2Vcbn1cblxuLy8gRXhlY3V0ZSBob29rcyB3aGVuIHR3byBub2RlcyBhcmUgaWRlbnRpY2FsXG5mdW5jdGlvbiB1bmhvb2sodk5vZGUsIHBhdGNoLCBpbmRleCkge1xuICAgIGlmIChpc1ZOb2RlKHZOb2RlKSkge1xuICAgICAgICBpZiAodk5vZGUuaG9va3MpIHtcbiAgICAgICAgICAgIHBhdGNoW2luZGV4XSA9IGFwcGVuZFBhdGNoKFxuICAgICAgICAgICAgICAgIHBhdGNoW2luZGV4XSxcbiAgICAgICAgICAgICAgICBuZXcgVlBhdGNoKFxuICAgICAgICAgICAgICAgICAgICBWUGF0Y2guUFJPUFMsXG4gICAgICAgICAgICAgICAgICAgIHZOb2RlLFxuICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWRLZXlzKHZOb2RlLmhvb2tzKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2Tm9kZS5kZXNjZW5kYW50SG9va3MgfHwgdk5vZGUuaGFzVGh1bmtzKSB7XG4gICAgICAgICAgICB2YXIgY2hpbGRyZW4gPSB2Tm9kZS5jaGlsZHJlblxuICAgICAgICAgICAgdmFyIGxlbiA9IGNoaWxkcmVuLmxlbmd0aFxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuW2ldXG4gICAgICAgICAgICAgICAgaW5kZXggKz0gMVxuXG4gICAgICAgICAgICAgICAgdW5ob29rKGNoaWxkLCBwYXRjaCwgaW5kZXgpXG5cbiAgICAgICAgICAgICAgICBpZiAoaXNWTm9kZShjaGlsZCkgJiYgY2hpbGQuY291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggKz0gY2hpbGQuY291bnRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzVGh1bmsodk5vZGUpKSB7XG4gICAgICAgIHRodW5rcyh2Tm9kZSwgbnVsbCwgcGF0Y2gsIGluZGV4KVxuICAgIH1cbn1cblxuZnVuY3Rpb24gdW5kZWZpbmVkS2V5cyhvYmopIHtcbiAgICB2YXIgcmVzdWx0ID0ge31cblxuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgICAgcmVzdWx0W2tleV0gPSB1bmRlZmluZWRcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0XG59XG5cbi8vIExpc3QgZGlmZiwgbmFpdmUgbGVmdCB0byByaWdodCByZW9yZGVyaW5nXG5mdW5jdGlvbiByZW9yZGVyKGFDaGlsZHJlbiwgYkNoaWxkcmVuKSB7XG4gICAgLy8gTyhNKSB0aW1lLCBPKE0pIG1lbW9yeVxuICAgIHZhciBiQ2hpbGRJbmRleCA9IGtleUluZGV4KGJDaGlsZHJlbilcbiAgICB2YXIgYktleXMgPSBiQ2hpbGRJbmRleC5rZXlzXG4gICAgdmFyIGJGcmVlID0gYkNoaWxkSW5kZXguZnJlZVxuXG4gICAgaWYgKGJGcmVlLmxlbmd0aCA9PT0gYkNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2hpbGRyZW46IGJDaGlsZHJlbixcbiAgICAgICAgICAgIG1vdmVzOiBudWxsXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBPKE4pIHRpbWUsIE8oTikgbWVtb3J5XG4gICAgdmFyIGFDaGlsZEluZGV4ID0ga2V5SW5kZXgoYUNoaWxkcmVuKVxuICAgIHZhciBhS2V5cyA9IGFDaGlsZEluZGV4LmtleXNcbiAgICB2YXIgYUZyZWUgPSBhQ2hpbGRJbmRleC5mcmVlXG5cbiAgICBpZiAoYUZyZWUubGVuZ3RoID09PSBhQ2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjaGlsZHJlbjogYkNoaWxkcmVuLFxuICAgICAgICAgICAgbW92ZXM6IG51bGxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIE8oTUFYKE4sIE0pKSBtZW1vcnlcbiAgICB2YXIgbmV3Q2hpbGRyZW4gPSBbXVxuXG4gICAgdmFyIGZyZWVJbmRleCA9IDBcbiAgICB2YXIgZnJlZUNvdW50ID0gYkZyZWUubGVuZ3RoXG4gICAgdmFyIGRlbGV0ZWRJdGVtcyA9IDBcblxuICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBhIGFuZCBtYXRjaCBhIG5vZGUgaW4gYlxuICAgIC8vIE8oTikgdGltZSxcbiAgICBmb3IgKHZhciBpID0gMCA7IGkgPCBhQ2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGFJdGVtID0gYUNoaWxkcmVuW2ldXG4gICAgICAgIHZhciBpdGVtSW5kZXhcblxuICAgICAgICBpZiAoYUl0ZW0ua2V5KSB7XG4gICAgICAgICAgICBpZiAoYktleXMuaGFzT3duUHJvcGVydHkoYUl0ZW0ua2V5KSkge1xuICAgICAgICAgICAgICAgIC8vIE1hdGNoIHVwIHRoZSBvbGQga2V5c1xuICAgICAgICAgICAgICAgIGl0ZW1JbmRleCA9IGJLZXlzW2FJdGVtLmtleV1cbiAgICAgICAgICAgICAgICBuZXdDaGlsZHJlbi5wdXNoKGJDaGlsZHJlbltpdGVtSW5kZXhdKVxuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBvbGQga2V5ZWQgaXRlbXNcbiAgICAgICAgICAgICAgICBpdGVtSW5kZXggPSBpIC0gZGVsZXRlZEl0ZW1zKytcbiAgICAgICAgICAgICAgICBuZXdDaGlsZHJlbi5wdXNoKG51bGwpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBNYXRjaCB0aGUgaXRlbSBpbiBhIHdpdGggdGhlIG5leHQgZnJlZSBpdGVtIGluIGJcbiAgICAgICAgICAgIGlmIChmcmVlSW5kZXggPCBmcmVlQ291bnQpIHtcbiAgICAgICAgICAgICAgICBpdGVtSW5kZXggPSBiRnJlZVtmcmVlSW5kZXgrK11cbiAgICAgICAgICAgICAgICBuZXdDaGlsZHJlbi5wdXNoKGJDaGlsZHJlbltpdGVtSW5kZXhdKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBUaGVyZSBhcmUgbm8gZnJlZSBpdGVtcyBpbiBiIHRvIG1hdGNoIHdpdGhcbiAgICAgICAgICAgICAgICAvLyB0aGUgZnJlZSBpdGVtcyBpbiBhLCBzbyB0aGUgZXh0cmEgZnJlZSBub2Rlc1xuICAgICAgICAgICAgICAgIC8vIGFyZSBkZWxldGVkLlxuICAgICAgICAgICAgICAgIGl0ZW1JbmRleCA9IGkgLSBkZWxldGVkSXRlbXMrK1xuICAgICAgICAgICAgICAgIG5ld0NoaWxkcmVuLnB1c2gobnVsbClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBsYXN0RnJlZUluZGV4ID0gZnJlZUluZGV4ID49IGJGcmVlLmxlbmd0aCA/XG4gICAgICAgIGJDaGlsZHJlbi5sZW5ndGggOlxuICAgICAgICBiRnJlZVtmcmVlSW5kZXhdXG5cbiAgICAvLyBJdGVyYXRlIHRocm91Z2ggYiBhbmQgYXBwZW5kIGFueSBuZXcga2V5c1xuICAgIC8vIE8oTSkgdGltZVxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgYkNoaWxkcmVuLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIHZhciBuZXdJdGVtID0gYkNoaWxkcmVuW2pdXG5cbiAgICAgICAgaWYgKG5ld0l0ZW0ua2V5KSB7XG4gICAgICAgICAgICBpZiAoIWFLZXlzLmhhc093blByb3BlcnR5KG5ld0l0ZW0ua2V5KSkge1xuICAgICAgICAgICAgICAgIC8vIEFkZCBhbnkgbmV3IGtleWVkIGl0ZW1zXG4gICAgICAgICAgICAgICAgLy8gV2UgYXJlIGFkZGluZyBuZXcgaXRlbXMgdG8gdGhlIGVuZCBhbmQgdGhlbiBzb3J0aW5nIHRoZW1cbiAgICAgICAgICAgICAgICAvLyBpbiBwbGFjZS4gSW4gZnV0dXJlIHdlIHNob3VsZCBpbnNlcnQgbmV3IGl0ZW1zIGluIHBsYWNlLlxuICAgICAgICAgICAgICAgIG5ld0NoaWxkcmVuLnB1c2gobmV3SXRlbSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChqID49IGxhc3RGcmVlSW5kZXgpIHtcbiAgICAgICAgICAgIC8vIEFkZCBhbnkgbGVmdG92ZXIgbm9uLWtleWVkIGl0ZW1zXG4gICAgICAgICAgICBuZXdDaGlsZHJlbi5wdXNoKG5ld0l0ZW0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgc2ltdWxhdGUgPSBuZXdDaGlsZHJlbi5zbGljZSgpXG4gICAgdmFyIHNpbXVsYXRlSW5kZXggPSAwXG4gICAgdmFyIHJlbW92ZXMgPSBbXVxuICAgIHZhciBpbnNlcnRzID0gW11cbiAgICB2YXIgc2ltdWxhdGVJdGVtXG5cbiAgICBmb3IgKHZhciBrID0gMDsgayA8IGJDaGlsZHJlbi5sZW5ndGg7KSB7XG4gICAgICAgIHZhciB3YW50ZWRJdGVtID0gYkNoaWxkcmVuW2tdXG4gICAgICAgIHNpbXVsYXRlSXRlbSA9IHNpbXVsYXRlW3NpbXVsYXRlSW5kZXhdXG5cbiAgICAgICAgLy8gcmVtb3ZlIGl0ZW1zXG4gICAgICAgIHdoaWxlIChzaW11bGF0ZUl0ZW0gPT09IG51bGwgJiYgc2ltdWxhdGUubGVuZ3RoKSB7XG4gICAgICAgICAgICByZW1vdmVzLnB1c2gocmVtb3ZlKHNpbXVsYXRlLCBzaW11bGF0ZUluZGV4LCBudWxsKSlcbiAgICAgICAgICAgIHNpbXVsYXRlSXRlbSA9IHNpbXVsYXRlW3NpbXVsYXRlSW5kZXhdXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXNpbXVsYXRlSXRlbSB8fCBzaW11bGF0ZUl0ZW0ua2V5ICE9PSB3YW50ZWRJdGVtLmtleSkge1xuICAgICAgICAgICAgLy8gaWYgd2UgbmVlZCBhIGtleSBpbiB0aGlzIHBvc2l0aW9uLi4uXG4gICAgICAgICAgICBpZiAod2FudGVkSXRlbS5rZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2ltdWxhdGVJdGVtICYmIHNpbXVsYXRlSXRlbS5rZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgYW4gaW5zZXJ0IGRvZXNuJ3QgcHV0IHRoaXMga2V5IGluIHBsYWNlLCBpdCBuZWVkcyB0byBtb3ZlXG4gICAgICAgICAgICAgICAgICAgIGlmIChiS2V5c1tzaW11bGF0ZUl0ZW0ua2V5XSAhPT0gayArIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZXMucHVzaChyZW1vdmUoc2ltdWxhdGUsIHNpbXVsYXRlSW5kZXgsIHNpbXVsYXRlSXRlbS5rZXkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgc2ltdWxhdGVJdGVtID0gc2ltdWxhdGVbc2ltdWxhdGVJbmRleF1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSByZW1vdmUgZGlkbid0IHB1dCB0aGUgd2FudGVkIGl0ZW0gaW4gcGxhY2UsIHdlIG5lZWQgdG8gaW5zZXJ0IGl0XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNpbXVsYXRlSXRlbSB8fCBzaW11bGF0ZUl0ZW0ua2V5ICE9PSB3YW50ZWRJdGVtLmtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc2VydHMucHVzaCh7a2V5OiB3YW50ZWRJdGVtLmtleSwgdG86IGt9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXRlbXMgYXJlIG1hdGNoaW5nLCBzbyBza2lwIGFoZWFkXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW11bGF0ZUluZGV4KytcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc2VydHMucHVzaCh7a2V5OiB3YW50ZWRJdGVtLmtleSwgdG86IGt9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbnNlcnRzLnB1c2goe2tleTogd2FudGVkSXRlbS5rZXksIHRvOiBrfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaysrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBhIGtleSBpbiBzaW11bGF0ZSBoYXMgbm8gbWF0Y2hpbmcgd2FudGVkIGtleSwgcmVtb3ZlIGl0XG4gICAgICAgICAgICBlbHNlIGlmIChzaW11bGF0ZUl0ZW0gJiYgc2ltdWxhdGVJdGVtLmtleSkge1xuICAgICAgICAgICAgICAgIHJlbW92ZXMucHVzaChyZW1vdmUoc2ltdWxhdGUsIHNpbXVsYXRlSW5kZXgsIHNpbXVsYXRlSXRlbS5rZXkpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2ltdWxhdGVJbmRleCsrXG4gICAgICAgICAgICBrKytcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJlbW92ZSBhbGwgdGhlIHJlbWFpbmluZyBub2RlcyBmcm9tIHNpbXVsYXRlXG4gICAgd2hpbGUoc2ltdWxhdGVJbmRleCA8IHNpbXVsYXRlLmxlbmd0aCkge1xuICAgICAgICBzaW11bGF0ZUl0ZW0gPSBzaW11bGF0ZVtzaW11bGF0ZUluZGV4XVxuICAgICAgICByZW1vdmVzLnB1c2gocmVtb3ZlKHNpbXVsYXRlLCBzaW11bGF0ZUluZGV4LCBzaW11bGF0ZUl0ZW0gJiYgc2ltdWxhdGVJdGVtLmtleSkpXG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIG9ubHkgbW92ZXMgd2UgaGF2ZSBhcmUgZGVsZXRlcyB0aGVuIHdlIGNhbiBqdXN0XG4gICAgLy8gbGV0IHRoZSBkZWxldGUgcGF0Y2ggcmVtb3ZlIHRoZXNlIGl0ZW1zLlxuICAgIGlmIChyZW1vdmVzLmxlbmd0aCA9PT0gZGVsZXRlZEl0ZW1zICYmICFpbnNlcnRzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2hpbGRyZW46IG5ld0NoaWxkcmVuLFxuICAgICAgICAgICAgbW92ZXM6IG51bGxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGNoaWxkcmVuOiBuZXdDaGlsZHJlbixcbiAgICAgICAgbW92ZXM6IHtcbiAgICAgICAgICAgIHJlbW92ZXM6IHJlbW92ZXMsXG4gICAgICAgICAgICBpbnNlcnRzOiBpbnNlcnRzXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZShhcnIsIGluZGV4LCBrZXkpIHtcbiAgICBhcnIuc3BsaWNlKGluZGV4LCAxKVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZnJvbTogaW5kZXgsXG4gICAgICAgIGtleToga2V5XG4gICAgfVxufVxuXG5mdW5jdGlvbiBrZXlJbmRleChjaGlsZHJlbikge1xuICAgIHZhciBrZXlzID0ge31cbiAgICB2YXIgZnJlZSA9IFtdXG4gICAgdmFyIGxlbmd0aCA9IGNoaWxkcmVuLmxlbmd0aFxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXVxuXG4gICAgICAgIGlmIChjaGlsZC5rZXkpIHtcbiAgICAgICAgICAgIGtleXNbY2hpbGQua2V5XSA9IGlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZyZWUucHVzaChpKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAga2V5czoga2V5cywgICAgIC8vIEEgaGFzaCBvZiBrZXkgbmFtZSB0byBpbmRleFxuICAgICAgICBmcmVlOiBmcmVlICAgICAgLy8gQW4gYXJyYXkgb2YgdW5rZXllZCBpdGVtIGluZGljZXNcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFwcGVuZFBhdGNoKGFwcGx5LCBwYXRjaCkge1xuICAgIGlmIChhcHBseSkge1xuICAgICAgICBpZiAoaXNBcnJheShhcHBseSkpIHtcbiAgICAgICAgICAgIGFwcGx5LnB1c2gocGF0Y2gpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhcHBseSA9IFthcHBseSwgcGF0Y2hdXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYXBwbHlcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcGF0Y2hcbiAgICB9XG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92aXJ0dWFsLWRvbS92dHJlZS9kaWZmLmpzXG4gKiogbW9kdWxlIGlkID0gNjFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=